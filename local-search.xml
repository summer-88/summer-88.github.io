<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
  
  <entry>
    <title>hexoæ·»åŠ æ”¯æŒemoji</title>
    <link href="/2021/12/02/hexo%E6%B7%BB%E5%8A%A0%E6%94%AF%E6%8C%81emoji/"/>
    <url>/2021/12/02/hexo%E6%B7%BB%E5%8A%A0%E6%94%AF%E6%8C%81emoji/</url>
    
    <content type="html"><![CDATA[<h1>hexoæ·»åŠ æ”¯æŒemoji</h1><p><u><strong>å¾ˆç®€å•ï¼Œæ¢ä¸€ä¸ª markdown å¼•æ“ï¼Œç„¶åå†å¢åŠ  emoji æ’ä»¶å³å¯ã€‚</strong></u></p><hr><div class="hljs code-wrapper"><pre><code class="hljs shell"><span class="hljs-meta">$</span><span class="bash"> npm un hexo-renderer-marked --save</span><span class="hljs-meta">$</span><span class="bash"> npm i hexo-renderer-markdown-it --save</span> <span class="hljs-meta">$</span><span class="bash"> npm install markdown-it-emoji --save</span></code></pre></div><p><u><strong>ç„¶åç¼–è¾‘ _config.ymlï¼š</strong></u></p>  <div class="hljs code-wrapper"><pre><code class="hljs yml"><span class="hljs-attr">markdown:</span><span class="hljs-attr">preset:</span> <span class="hljs-string">&#x27;default&#x27;</span><span class="hljs-attr">render:</span>  <span class="hljs-attr">html:</span> <span class="hljs-literal">true</span>  <span class="hljs-attr">xhtmlOut:</span> <span class="hljs-literal">false</span>  <span class="hljs-attr">langPrefix:</span> <span class="hljs-string">&#x27;language-&#x27;</span>  <span class="hljs-attr">breaks:</span> <span class="hljs-literal">true</span>  <span class="hljs-attr">linkify:</span> <span class="hljs-literal">true</span>  <span class="hljs-attr">typographer:</span> <span class="hljs-literal">true</span>  <span class="hljs-attr">quotes:</span> <span class="hljs-string">&#x27;â€œâ€â€˜â€™&#x27;</span><span class="hljs-attr">enable_rules:</span><span class="hljs-attr">disable_rules:</span><span class="hljs-attr">plugins:</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-footnote</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sup</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-sub</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-abbr</span>  <span class="hljs-bullet">-</span> <span class="hljs-string">markdown-it-emoji</span><span class="hljs-attr">anchors:</span>  <span class="hljs-attr">level:</span> <span class="hljs-number">2</span>  <span class="hljs-attr">collisionSuffix:</span> <span class="hljs-string">&#x27;&#x27;</span>  <span class="hljs-attr">permalink:</span> <span class="hljs-literal">false</span>  <span class="hljs-attr">permalinkClass:</span> <span class="hljs-string">&#x27;header-anchor&#x27;</span>  <span class="hljs-attr">permalinkSide:</span> <span class="hljs-string">&#x27;left&#x27;</span>  <span class="hljs-attr">permalinkSymbol:</span> <span class="hljs-string">&#x27;Â¶&#x27;</span>  <span class="hljs-attr">case:</span> <span class="hljs-number">0</span>  <span class="hljs-attr">separator:</span> <span class="hljs-string">&#x27;-&#x27;</span></code></pre></div><p>ä½¿ç”¨æ–¹æ³•åœ¨<a href="https://www.webfx.com/tools/emoji-cheat-sheet/#tabs-1">Emoji</a> ä¸­æ‰¾åˆ°ä½ æƒ³è¦çš„è¡¨æƒ…ï¼Œç„¶åç‚¹å‡»å³å¯å¤åˆ¶ã€‚<br>æ¯”å¦‚ä½ æƒ³å‘ä¸€ä¸ªç¬‘è„¸ ğŸ˜„ ç›´æ¥è¾“å…¥ç¬‘è„¸å¯¹åº”çš„ emoji ç¼–ç å°±å¯ä»¥ã€‚</p>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>WSLå¸¸ç”¨å‘½ä»¤</title>
    <link href="/2021/12/01/WSL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <url>/2021/12/01/WSL%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/</url>
    
    <content type="html"><![CDATA[<h1>WSLå¸¸ç”¨å‘½ä»¤</h1><h3 id="æŸ¥çœ‹æ‰€æœ‰å·²ç»å®‰è£…çš„åˆ†å‘ç‰ˆæœ¬ï¼š">æŸ¥çœ‹æ‰€æœ‰å·²ç»å®‰è£…çš„åˆ†å‘ç‰ˆæœ¬ï¼š</h3><div class="hljs code-wrapper"><pre><code class="hljs brainfuck"><span class="hljs-comment">wsl</span> --<span class="hljs-comment">list</span> --<span class="hljs-comment">all</span></code></pre></div><h3 id="æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„åˆ†å‘ç‰ˆæœ¬ï¼š">æŸ¥çœ‹æ­£åœ¨è¿è¡Œçš„åˆ†å‘ç‰ˆæœ¬ï¼š</h3><div class="hljs code-wrapper"><pre><code class="hljs brainfuck"><span class="hljs-comment">wsl</span> --<span class="hljs-comment">list</span> --<span class="hljs-comment">running</span></code></pre></div><h3 id="åˆ é™¤æŒ‡å®šçš„åˆ†å‘ç‰ˆæœ¬ï¼š">åˆ é™¤æŒ‡å®šçš„åˆ†å‘ç‰ˆæœ¬ï¼š</h3><div class="hljs code-wrapper"><pre><code class="hljs ada">wsl <span class="hljs-comment">--unregister &lt;DistributionName&gt;</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>WSL</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Javaè·å–å¸¸è§çš„ç³»ç»Ÿä¿¡æ¯</title>
    <link href="/2021/11/30/Java%E8%8E%B7%E5%8F%96%E5%B8%B8%E8%A7%81%E7%9A%84%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF/"/>
    <url>/2021/11/30/Java%E8%8E%B7%E5%8F%96%E5%B8%B8%E8%A7%81%E7%9A%84%E7%B3%BB%E7%BB%9F%E4%BF%A1%E6%81%AF/</url>
    
    <content type="html"><![CDATA[<h1>Javaè·å–å¸¸è§çš„ç³»ç»Ÿä¿¡æ¯</h1><p>ğŸ˜‚</p><div class="hljs code-wrapper"><pre><code class="hljs reasonml"><span class="hljs-comment">// æ–‡ä»¶è·¯å¾„åˆ†éš”ç¬¦</span>String fileSeparator = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">File</span>.</span></span>separator;<span class="hljs-comment">// ç”¨æˆ·ä¸»ç›®å½•</span>String userHome = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>get<span class="hljs-constructor">Properties()</span>.get<span class="hljs-constructor">Property(<span class="hljs-string">&quot;user.home&quot;</span>)</span>;<span class="hljs-comment">// Javaçš„jreçš„å®‰è£…è·¯å¾„</span>String javaPath = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>get<span class="hljs-constructor">Properties()</span>.get<span class="hljs-constructor">Property(<span class="hljs-string">&quot;java.home&quot;</span>)</span>;<span class="hljs-comment">// æ“ä½œç³»ç»Ÿåç§°</span>String osName = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>get<span class="hljs-constructor">Properties()</span>.get<span class="hljs-constructor">Property(<span class="hljs-string">&quot;os.name&quot;</span>)</span>;<span class="hljs-comment">// å½“å‰ç”¨æˆ·ç¨‹åºæ‰€åœ¨ç›®å½•</span>String userDir = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>get<span class="hljs-constructor">Properties()</span>.get<span class="hljs-constructor">Property(<span class="hljs-string">&quot;user.dir&quot;</span>)</span>;<span class="hljs-comment">// JDKçš„å®‰è£…ç›®å½•</span>String jdkDir = <span class="hljs-module-access"><span class="hljs-module"><span class="hljs-identifier">System</span>.</span></span>get<span class="hljs-constructor">Properties()</span>.get<span class="hljs-constructor">Property(<span class="hljs-string">&quot;java.ext.dirs&quot;</span>)</span>;</code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å¾®ä¿¡æ”¯ä»˜ä»£ç </title>
    <link href="/2021/11/29/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E4%BB%A3%E7%A0%81/"/>
    <url>/2021/11/29/%E5%BE%AE%E4%BF%A1%E6%94%AF%E4%BB%98%E4%BB%A3%E7%A0%81/</url>
    
    <content type="html"><![CDATA[<div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">package</span> com.qujie.mintwo.system.wechatpay;<span class="hljs-keyword">import</span> com.alibaba.fastjson.JSON;<span class="hljs-keyword">import</span> com.qujie.mintwo.config.WechatConfig;<span class="hljs-keyword">import</span> com.wechat.pay.contrib.apache.httpclient.Validator;<span class="hljs-keyword">import</span> com.wechat.pay.contrib.apache.httpclient.WechatPayHttpClientBuilder;<span class="hljs-keyword">import</span> com.wechat.pay.contrib.apache.httpclient.auth.*;<span class="hljs-keyword">import</span> com.wechat.pay.contrib.apache.httpclient.util.AesUtil;<span class="hljs-keyword">import</span> com.wechat.pay.contrib.apache.httpclient.util.PemUtil;<span class="hljs-keyword">import</span> org.apache.http.client.methods.CloseableHttpResponse;<span class="hljs-keyword">import</span> org.apache.http.client.methods.HttpGet;<span class="hljs-keyword">import</span> org.apache.http.client.methods.HttpUriRequest;<span class="hljs-keyword">import</span> org.apache.http.impl.client.CloseableHttpClient;<span class="hljs-keyword">import</span> org.apache.http.util.EntityUtils;<span class="hljs-keyword">import</span> org.slf4j.Logger;<span class="hljs-keyword">import</span> org.slf4j.LoggerFactory;<span class="hljs-keyword">import</span> org.springframework.stereotype.Component;<span class="hljs-keyword">import</span> javax.annotation.Resource;<span class="hljs-keyword">import</span> java.io.*;<span class="hljs-keyword">import</span> java.nio.charset.StandardCharsets;<span class="hljs-keyword">import</span> java.security.GeneralSecurityException;<span class="hljs-keyword">import</span> java.security.PrivateKey;<span class="hljs-keyword">import</span> java.security.cert.X509Certificate;<span class="hljs-keyword">import</span> java.util.ArrayList;<span class="hljs-keyword">import</span> java.util.Comparator;<span class="hljs-keyword">import</span> java.util.List;<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.apache.http.HttpHeaders.ACCEPT;<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.apache.http.HttpHeaders.CONTENT_TYPE;<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.apache.http.HttpStatus.SC_OK;<span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> org.apache.http.entity.ContentType.APPLICATION_JSON;<span class="hljs-comment">/**</span><span class="hljs-comment"> * <span class="hljs-doctag">@author</span> å¤å¤©</span><span class="hljs-comment"> * <span class="hljs-doctag">@version</span> 1.0</span><span class="hljs-comment"> * <span class="hljs-doctag">@date</span> 2021/11/24</span><span class="hljs-comment"> */</span><span class="hljs-meta">@Component</span><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">WechatPayApiUtil</span> </span>&#123;    <span class="hljs-keyword">private</span>  <span class="hljs-keyword">final</span> Logger logger = LoggerFactory.getLogger(WechatPayApiUtil.class);    <span class="hljs-comment">/**</span><span class="hljs-comment">     * å‚æ•°é…ç½®</span><span class="hljs-comment">     */</span>    <span class="hljs-meta">@Resource</span>    <span class="hljs-keyword">private</span> WechatConfig wechatConfig;    <span class="hljs-function"><span class="hljs-keyword">public</span> CloseableHttpResponse <span class="hljs-title">v3Execution</span><span class="hljs-params">(HttpUriRequest request)</span> <span class="hljs-keyword">throws</span> IOException, GeneralSecurityException </span>&#123;        request.addHeader(CONTENT_TYPE, APPLICATION_JSON.toString());        request.addHeader(ACCEPT, APPLICATION_JSON.toString());        FileInputStream privateKey;        <span class="hljs-keyword">try</span> &#123;            privateKey = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;D:\\apiClient_key.pem&quot;</span>);        &#125;<span class="hljs-keyword">catch</span> (FileNotFoundException e)&#123;            logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜æ¥å£è°ƒç”¨æ‰€éœ€çš„ç§é’¥æ–‡ä»¶ä¸å­˜åœ¨,è·¯å¾„ã€&#123;&#125;ã€‘&quot;</span>,wechatConfig.getPrivateKeyPath());            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> FileNotFoundException(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜æ¥å£è°ƒç”¨æ‰€éœ€çš„ç§é’¥æ–‡ä»¶ä¸å­˜åœ¨&quot;</span>);        &#125;        PrivateKey merChantPrivateKey = PemUtil.loadPrivateKey(privateKey);        List&lt;X509Certificate&gt; certs = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();        <span class="hljs-keyword">try</span> &#123;            FileInputStream certKey = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;D:\\api\\apiClient_cert.pem&quot;</span>);            certs.add(PemUtil.loadCertificate(certKey));        &#125;<span class="hljs-keyword">catch</span> (FileNotFoundException e)&#123;            logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜æ¥å£è°ƒç”¨æ‰€éœ€çš„å¹³å°è¯ä¹¦æ–‡ä»¶ä¸å­˜åœ¨,è·¯å¾„ã€&#123;&#125;ã€‘&quot;</span>,wechatConfig.getCertKeyPath());            certs = downloadCertificate();        &#125;        AutoUpdateCertificatesVerifier verifier = <span class="hljs-keyword">new</span> AutoUpdateCertificatesVerifier(                <span class="hljs-keyword">new</span> WechatPay2Credentials(wechatConfig.getMerchantId(), <span class="hljs-keyword">new</span> PrivateKeySigner(wechatConfig.getSerialNumber(), merChantPrivateKey)),                wechatConfig.getApiKey().getBytes(StandardCharsets.UTF_8));        WechatPayHttpClientBuilder builder = WechatPayHttpClientBuilder.create()                .withMerchant(wechatConfig.getMerchantId(),wechatConfig.getSerialNumber(),merChantPrivateKey).withValidator(<span class="hljs-keyword">new</span> WechatPay2Validator(verifier));        <span class="hljs-keyword">try</span> (CloseableHttpClient client = builder.build()) &#123;            CloseableHttpResponse response = client.execute(request);            <span class="hljs-keyword">int</span> statusCode = response.getStatusLine().getStatusCode();            String body = EntityUtils.toString(response.getEntity());            <span class="hljs-keyword">if</span> (SC_OK == statusCode) &#123;                logger.info(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å•†å®¶å¹³å°æ¥å£è°ƒç”¨æˆåŠŸ,æ¥å£å“åº”ä¿¡æ¯ï¼šã€&#123;&#125;ã€‘&quot;</span>,body);                <span class="hljs-keyword">if</span>(validate(response,certs))&#123;                    logger.info(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å•†å®¶å¹³å°å“åº”ä¿¡æ¯éªŒè¯ç­¾åæˆåŠŸ&quot;</span>);                    <span class="hljs-keyword">return</span> response;                &#125;<span class="hljs-keyword">else</span> &#123;                    logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å•†å®¶å¹³å°å“åº”ä¿¡æ¯éªŒè¯ç­¾åå¤±è´¥&quot;</span>);                    <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IOException(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å•†å®¶å¹³å°å“åº”ä¿¡æ¯éªŒè¯ç­¾åå¤±è´¥&quot;</span>);                &#125;            &#125;<span class="hljs-keyword">else</span> &#123;                logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å•†å®¶å¹³å°æ¥å£è°ƒç”¨å¤±è´¥,é”™è¯¯ç ã€&#123;&#125;ã€‘,é”™è¯¯ä¿¡æ¯ã€&#123;&#125;ã€‘&quot;</span>,statusCode,body);                <span class="hljs-keyword">return</span> response;            &#125;        &#125;    &#125;    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">validate</span><span class="hljs-params">(CloseableHttpResponse response,List&lt;X509Certificate&gt; x509Certs)</span> <span class="hljs-keyword">throws</span> IOException </span>&#123;        <span class="hljs-comment">//ä»ä¸‹è½½çš„è¯ä¹¦ä¸­ï¼Œè·å–å¯¹æŠ¥æ–‡ç­¾åçš„ç§é’¥æ‰€å¯¹åº”çš„è¯ä¹¦ï¼Œå¹¶è¿›è¡ŒéªŒç­¾æ¥éªŒè¯è¯ä¹¦å‡†ç¡®</span>        Verifier verifier = <span class="hljs-keyword">new</span> CertificatesVerifier(x509Certs);        Validator validator = <span class="hljs-keyword">new</span> WechatPay2Validator(verifier);        <span class="hljs-keyword">return</span>  validator.validate(response);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;X509Certificate&gt; <span class="hljs-title">downloadCertificate</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> IOException, GeneralSecurityException </span>&#123;        FileInputStream privateKey;        <span class="hljs-keyword">try</span> &#123;            privateKey = <span class="hljs-keyword">new</span> FileInputStream(<span class="hljs-string">&quot;D:\\apiClient_key.pem&quot;</span>);        &#125;<span class="hljs-keyword">catch</span> (FileNotFoundException e)&#123;            logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜æ¥å£è°ƒç”¨æ‰€éœ€çš„ç§é’¥æ–‡ä»¶è·¯å¾„ã€&#123;&#125;ã€‘ä¸å­˜åœ¨&quot;</span>,wechatConfig.getPrivateKeyPath());            <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> FileNotFoundException(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜æ¥å£è°ƒç”¨æ‰€éœ€çš„ç§é’¥æ–‡ä»¶ä¸å­˜åœ¨&quot;</span>);        &#125;        PrivateKey merChantPrivateKey = PemUtil.loadPrivateKey(privateKey);        WechatPayHttpClientBuilder builder = WechatPayHttpClientBuilder.create()                .withMerchant(wechatConfig.getMerchantId(),wechatConfig.getSerialNumber(),merChantPrivateKey).withValidator(response -&gt; <span class="hljs-keyword">true</span>);        HttpGet httpGet = <span class="hljs-keyword">new</span> HttpGet(<span class="hljs-string">&quot;https://api.mch.weixin.qq.com/v3/certificates&quot;</span>);        httpGet.addHeader(ACCEPT, APPLICATION_JSON.toString());        <span class="hljs-keyword">try</span> (CloseableHttpClient client = builder.build()) &#123;            CloseableHttpResponse response = client.execute(httpGet);            <span class="hljs-keyword">int</span> statusCode = response.getStatusLine().getStatusCode();            String body = EntityUtils.toString(response.getEntity());            <span class="hljs-keyword">if</span> (SC_OK != statusCode) &#123;                logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å•†å®¶å¹³å°æ¥å£è°ƒç”¨å¤±è´¥,æ¥å£å“åº”ç ï¼šã€&#123;&#125;ã€‘,æ¥å£å“åº”ä¿¡æ¯ï¼šã€&#123;&#125;ã€‘&quot;</span>,statusCode,body);                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IOException(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å•†å®¶å¹³å°æ¥å£è°ƒç”¨å¤±è´¥&quot;</span>);            &#125;            logger.info(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å¹³å°è¯ä¹¦è·å–æˆåŠŸ,æ¥å£å“åº”ä¿¡æ¯ï¼šã€&#123;&#125;ã€‘&quot;</span>,body);            CertificateList certList = JSON.parseObject(body, CertificateList.class);            List&lt;X509Certificate&gt; x509Certs = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();            AesUtil aesUtil = <span class="hljs-keyword">new</span> AesUtil(wechatConfig.getApiKey().getBytes(StandardCharsets.UTF_8));            CertificateItem certificateItem = certList.getCerts().stream().max(Comparator.comparing(CertificateItem::getExpireTime)).orElse(<span class="hljs-keyword">null</span>);            <span class="hljs-keyword">if</span>(certificateItem == <span class="hljs-keyword">null</span>)&#123;                logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜è·å–å¹³å°è¯ä¹¦æ¥å£å“åº”ä¿¡æ¯è·å–è¯ä¹¦ä¸ºç©º&quot;</span>);                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IOException(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜è·å–å¹³å°è¯ä¹¦æ¥å£å“åº”ä¿¡æ¯è·å–è¯ä¹¦ä¸ºç©º&quot;</span>);            &#125;            String plainCertificate = aesUtil.decryptToString(certificateItem.getEncryptCertificate().getAssociatedData().getBytes(StandardCharsets.UTF_8),                    certificateItem.getEncryptCertificate().getNonce().getBytes(StandardCharsets.UTF_8),                    certificateItem.getEncryptCertificate().getCiphertext());            ByteArrayInputStream inputStream = <span class="hljs-keyword">new</span> ByteArrayInputStream(plainCertificate.getBytes(StandardCharsets.UTF_8));            X509Certificate x509Cert = PemUtil.loadCertificate(inputStream);            x509Certs.add(x509Cert);            <span class="hljs-comment">//ä»ä¸‹è½½çš„è¯ä¹¦ä¸­ï¼Œè·å–å¯¹æŠ¥æ–‡ç­¾åçš„ç§é’¥æ‰€å¯¹åº”çš„è¯ä¹¦ï¼Œå¹¶è¿›è¡ŒéªŒç­¾æ¥éªŒè¯è¯ä¹¦å‡†ç¡®</span>            <span class="hljs-keyword">boolean</span> isCorrectCert = validate(response,x509Certs);            logger.info(isCorrectCert ? <span class="hljs-string">&quot;=== validate success ===&quot;</span> : <span class="hljs-string">&quot;=== validate failed ===&quot;</span>);            <span class="hljs-keyword">if</span>(!isCorrectCert)&#123;                logger.error(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å¹³å°è¯ä¹¦å“åº”ç»“æœéªŒè¯å¤±è´¥&quot;</span>);                <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IOException(<span class="hljs-string">&quot;å¾®ä¿¡æ”¯ä»˜å¹³å°è¯ä¹¦å“åº”ç»“æœéªŒè¯å¤±è´¥&quot;</span>);            &#125;            File file = <span class="hljs-keyword">new</span> File(<span class="hljs-string">&quot;D:\\api&quot;</span>);            <span class="hljs-keyword">if</span>(!file.exists())&#123;                <span class="hljs-keyword">boolean</span> result = file.mkdirs();                logger.info(<span class="hljs-string">&quot;ç›®å½•ã€&#123;&#125;ã€‘ä¸å­˜åœ¨éœ€è¦åˆ›å»ºç›®å½•ï¼Œåˆ›å»ºç»“æœï¼šã€&#123;&#125;ã€‘&quot;</span>,file.getAbsolutePath(),result);            &#125;            String outputAbsoluteFilename = file.getAbsolutePath() + File.separator + <span class="hljs-string">&quot;apiClient_cert.pem&quot;</span>;            <span class="hljs-keyword">try</span> (BufferedWriter writer = <span class="hljs-keyword">new</span> BufferedWriter(                    <span class="hljs-keyword">new</span> OutputStreamWriter(<span class="hljs-keyword">new</span> FileOutputStream(outputAbsoluteFilename), StandardCharsets.UTF_8))) &#123;                writer.write(plainCertificate);            &#125;            logger.info(<span class="hljs-string">&quot;save cert file absolute path &#123;&#125; &quot;</span> , outputAbsoluteFilename);            <span class="hljs-keyword">return</span> x509Certs;        &#125;    &#125;&#125;</code></pre></div>]]></content>
    
    
    
  </entry>
  
  
  
  <entry>
    <title>Postmanæ±‰åŒ–</title>
    <link href="/2021/11/22/Postman%E6%B1%89%E5%8C%96/"/>
    <url>/2021/11/22/Postman%E6%B1%89%E5%8C%96/</url>
    
    <content type="html"><![CDATA[<h1>Postmanæ±‰åŒ–</h1><p>è¿›å…¥[Githubä¸‹è½½é¡µé¢](<a href="https://github.com/hlmd/Postman-cn/releases">Releases Â· hlmd/Postman-cn (github.com)</a>)<strong>ä¸‹è½½å¯¹åº”ç‰ˆæœ¬çš„</strong> app.zipï¼Œ<strong>è¿›å…¥</strong><code>Postmanå®‰è£…åœ°å€/ç‰ˆæœ¬/resources</code><strong>ç›®å½•</strong>ï¼Œ</p><p>å¤åˆ¶<code>app.zip</code>åˆ°<code>resources</code>ç›®å½•ï¼Œå°†<code>app.zip</code>è§£å‹åˆ°å½“å‰æ–‡ä»¶å¤¹ä¼šç”Ÿæˆä¸€ä¸ª<code>app</code>ç›®å½•ï¼Œé‡å¯Postmanå°±å¯ä»¥äº†</p>]]></content>
    
    
    
    <tags>
      
      <tag>Postman</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>Centos7ä¿®æ”¹æœåŠ¡å™¨åç§°</title>
    <link href="/2021/11/18/Centos7%E4%BF%AE%E6%94%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E7%A7%B0/"/>
    <url>/2021/11/18/Centos7%E4%BF%AE%E6%94%B9%E6%9C%8D%E5%8A%A1%E5%99%A8%E5%90%8D%E7%A7%B0/</url>
    
    <content type="html"><![CDATA[<div class="hljs code-wrapper"><pre><code class="hljs dsconfig"><span class="hljs-string">hostnamectl</span> <span class="hljs-built_in">set-hostname</span> <span class="hljs-string">yourhostname</span></code></pre></div>]]></content>
    
    
    
    <tags>
      
      <tag>Centos</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JAVAå®¹å™¨</title>
    <link href="/2021/11/18/JAVA%E9%9B%86%E5%90%88/"/>
    <url>/2021/11/18/JAVA%E9%9B%86%E5%90%88/</url>
    
    <content type="html"><![CDATA[<h1>Java å®¹å™¨</h1><!-- GFM-TOC --><ul><li><a href="#java-%E5%AE%B9%E5%99%A8">Java å®¹å™¨</a><ul><li><a href="#%E4%B8%80%E6%A6%82%E8%A7%88">ä¸€ã€æ¦‚è§ˆ</a><ul><li><a href="#collection">Collection</a></li><li><a href="#map">Map</a></li></ul></li><li><a href="#%E4%BA%8C%E5%AE%B9%E5%99%A8%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F">äºŒã€å®¹å™¨ä¸­çš„è®¾è®¡æ¨¡å¼</a><ul><li><a href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E6%A8%A1%E5%BC%8F">è¿­ä»£å™¨æ¨¡å¼</a></li><li><a href="#%E9%80%82%E9%85%8D%E5%99%A8%E6%A8%A1%E5%BC%8F">é€‚é…å™¨æ¨¡å¼</a></li></ul></li><li><a href="#%E4%B8%89%E6%BA%90%E7%A0%81%E5%88%86%E6%9E%90">ä¸‰ã€æºç åˆ†æ</a><ul><li><a href="#arraylist">ArrayList</a></li><li><a href="#vector">Vector</a></li><li><a href="#copyonwritearraylist">CopyOnWriteArrayList</a></li><li><a href="#linkedlist">LinkedList</a></li><li><a href="#hashmap">HashMap</a></li><li><a href="#concurrenthashmap">ConcurrentHashMap</a></li><li><a href="#linkedhashmap">LinkedHashMap</a></li><li><a href="#weakhashmap">WeakHashMap</a></li></ul></li><li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a><!-- GFM-TOC --></li></ul></li></ul><h2 id="ä¸€ã€æ¦‚è§ˆ">ä¸€ã€æ¦‚è§ˆ</h2><p>å®¹å™¨ä¸»è¦åŒ…æ‹¬ Collection å’Œ Map ä¸¤ç§ï¼ŒCollection å­˜å‚¨ç€å¯¹è±¡çš„é›†åˆï¼Œè€Œ Map å­˜å‚¨ç€é”®å€¼å¯¹ï¼ˆä¸¤ä¸ªå¯¹è±¡ï¼‰çš„æ˜ å°„è¡¨ã€‚</p><h3 id="Collection">Collection</h3><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191208220948084.png"/> </div><br><h4 id="1-Set">1. Set</h4><ul><li><p>TreeSetï¼šåŸºäºçº¢é»‘æ ‘å®ç°ï¼Œæ”¯æŒæœ‰åºæ€§æ“ä½œï¼Œä¾‹å¦‚æ ¹æ®ä¸€ä¸ªèŒƒå›´æŸ¥æ‰¾å…ƒç´ çš„æ“ä½œã€‚ä½†æ˜¯æŸ¥æ‰¾æ•ˆç‡ä¸å¦‚ HashSetï¼ŒHashSet æŸ¥æ‰¾çš„æ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼ŒTreeSet åˆ™ä¸º O(logN)ã€‚</p></li><li><p>HashSetï¼šåŸºäºå“ˆå¸Œè¡¨å®ç°ï¼Œæ”¯æŒå¿«é€ŸæŸ¥æ‰¾ï¼Œä½†ä¸æ”¯æŒæœ‰åºæ€§æ“ä½œã€‚å¹¶ä¸”å¤±å»äº†å…ƒç´ çš„æ’å…¥é¡ºåºä¿¡æ¯ï¼Œä¹Ÿå°±æ˜¯è¯´ä½¿ç”¨ Iterator éå† HashSet å¾—åˆ°çš„ç»“æœæ˜¯ä¸ç¡®å®šçš„ã€‚</p></li><li><p>LinkedHashSetï¼šå…·æœ‰ HashSet çš„æŸ¥æ‰¾æ•ˆç‡ï¼Œå¹¶ä¸”å†…éƒ¨ä½¿ç”¨åŒå‘é“¾è¡¨ç»´æŠ¤å…ƒç´ çš„æ’å…¥é¡ºåºã€‚</p></li></ul><h4 id="2-List">2. List</h4><ul><li><p>ArrayListï¼šåŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼Œæ”¯æŒéšæœºè®¿é—®ã€‚</p></li><li><p>Vectorï¼šå’Œ ArrayList ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ã€‚</p></li><li><p>LinkedListï¼šåŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œåªèƒ½é¡ºåºè®¿é—®ï¼Œä½†æ˜¯å¯ä»¥å¿«é€Ÿåœ°åœ¨é“¾è¡¨ä¸­é—´æ’å…¥å’Œåˆ é™¤å…ƒç´ ã€‚ä¸ä»…å¦‚æ­¤ï¼ŒLinkedList è¿˜å¯ä»¥ç”¨ä½œæ ˆã€é˜Ÿåˆ—å’ŒåŒå‘é˜Ÿåˆ—ã€‚</p></li></ul><h4 id="3-Queue">3. Queue</h4><ul><li><p>LinkedListï¼šå¯ä»¥ç”¨å®ƒæ¥å®ç°åŒå‘é˜Ÿåˆ—ã€‚</p></li><li><p>PriorityQueueï¼šåŸºäºå †ç»“æ„å®ç°ï¼Œå¯ä»¥ç”¨å®ƒæ¥å®ç°ä¼˜å…ˆé˜Ÿåˆ—ã€‚</p></li></ul><h3 id="Map">Map</h3><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20201101234335837.png"/> </div><br><ul><li><p>TreeMapï¼šåŸºäºçº¢é»‘æ ‘å®ç°ã€‚</p></li><li><p>HashMapï¼šåŸºäºå“ˆå¸Œè¡¨å®ç°ã€‚</p></li><li><p>HashTableï¼šå’Œ HashMap ç±»ä¼¼ï¼Œä½†å®ƒæ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œè¿™æ„å‘³ç€åŒä¸€æ—¶åˆ»å¤šä¸ªçº¿ç¨‹åŒæ—¶å†™å…¥ HashTable ä¸ä¼šå¯¼è‡´æ•°æ®ä¸ä¸€è‡´ã€‚å®ƒæ˜¯é—ç•™ç±»ï¼Œä¸åº”è¯¥å»ä½¿ç”¨å®ƒï¼Œè€Œæ˜¯ä½¿ç”¨ ConcurrentHashMap æ¥æ”¯æŒçº¿ç¨‹å®‰å…¨ï¼ŒConcurrentHashMap çš„æ•ˆç‡ä¼šæ›´é«˜ï¼Œå› ä¸º ConcurrentHashMap å¼•å…¥äº†åˆ†æ®µé”ã€‚</p></li><li><p>LinkedHashMapï¼šä½¿ç”¨åŒå‘é“¾è¡¨æ¥ç»´æŠ¤å…ƒç´ çš„é¡ºåºï¼Œé¡ºåºä¸ºæ’å…¥é¡ºåºæˆ–è€…æœ€è¿‘æœ€å°‘ä½¿ç”¨ï¼ˆLRUï¼‰é¡ºåºã€‚</p></li></ul><h2 id="äºŒã€å®¹å™¨ä¸­çš„è®¾è®¡æ¨¡å¼">äºŒã€å®¹å™¨ä¸­çš„è®¾è®¡æ¨¡å¼</h2><h3 id="è¿­ä»£å™¨æ¨¡å¼">è¿­ä»£å™¨æ¨¡å¼</h3><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191208225301973.png"/> </div><br><p>Collection ç»§æ‰¿äº† Iterable æ¥å£ï¼Œå…¶ä¸­çš„ iterator() æ–¹æ³•èƒ½å¤Ÿäº§ç”Ÿä¸€ä¸ª Iterator å¯¹è±¡ï¼Œé€šè¿‡è¿™ä¸ªå¯¹è±¡å°±å¯ä»¥è¿­ä»£éå† Collection ä¸­çš„å…ƒç´ ã€‚</p><p>ä» JDK 1.5 ä¹‹åå¯ä»¥ä½¿ç”¨ foreach æ–¹æ³•æ¥éå†å®ç°äº† Iterable æ¥å£çš„èšåˆå¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();list.add(<span class="hljs-string">&quot;a&quot;</span>);list.add(<span class="hljs-string">&quot;b&quot;</span>);<span class="hljs-keyword">for</span> (String item : list) &#123;    System.out.println(item);&#125;</code></pre></div><h3 id="é€‚é…å™¨æ¨¡å¼">é€‚é…å™¨æ¨¡å¼</h3><p>java.util.Arrays#asList() å¯ä»¥æŠŠæ•°ç»„ç±»å‹è½¬æ¢ä¸º List ç±»å‹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@SafeVarargs</span><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> &lt;T&gt; <span class="hljs-function">List&lt;T&gt; <span class="hljs-title">asList</span><span class="hljs-params">(T... a)</span></span></code></pre></div><p>åº”è¯¥æ³¨æ„çš„æ˜¯ asList() çš„å‚æ•°ä¸ºæ³›å‹çš„å˜é•¿å‚æ•°ï¼Œä¸èƒ½ä½¿ç”¨åŸºæœ¬ç±»å‹æ•°ç»„ä½œä¸ºå‚æ•°ï¼Œåªèƒ½ä½¿ç”¨ç›¸åº”çš„åŒ…è£…ç±»å‹æ•°ç»„ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">Integer[] arr = &#123;<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>&#125;;List list = Arrays.asList(arr);</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹å¼è°ƒç”¨ asList()ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs java">List list = Arrays.asList(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);</code></pre></div><h2 id="ä¸‰ã€æºç åˆ†æ">ä¸‰ã€æºç åˆ†æ</h2><p>å¦‚æœæ²¡æœ‰ç‰¹åˆ«è¯´æ˜ï¼Œä»¥ä¸‹æºç åˆ†æåŸºäº JDK 1.8ã€‚</p><p>åœ¨ IDEA ä¸­ double shift è°ƒå‡º Search EveryWhereï¼ŒæŸ¥æ‰¾æºç æ–‡ä»¶ï¼Œæ‰¾åˆ°ä¹‹åå°±å¯ä»¥é˜…è¯»æºç ã€‚</p><h3 id="ArrayList">ArrayList</h3><h4 id="1-æ¦‚è§ˆ">1. æ¦‚è§ˆ</h4><p>å› ä¸º ArrayList æ˜¯åŸºäºæ•°ç»„å®ç°çš„ï¼Œæ‰€ä»¥æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚RandomAccess æ¥å£æ ‡è¯†ç€è¯¥ç±»æ”¯æŒå¿«é€Ÿéšæœºè®¿é—®ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ArrayList</span>&lt;<span class="hljs-title">E</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractList</span>&lt;<span class="hljs-title">E</span>&gt;</span><span class="hljs-class">        <span class="hljs-keyword">implements</span> <span class="hljs-title">List</span>&lt;<span class="hljs-title">E</span>&gt;, <span class="hljs-title">RandomAccess</span>, <span class="hljs-title">Cloneable</span>, <span class="hljs-title">java</span>.<span class="hljs-title">io</span>.<span class="hljs-title">Serializable</span></span></code></pre></div><p>æ•°ç»„çš„é»˜è®¤å¤§å°ä¸º 10ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> DEFAULT_CAPACITY = <span class="hljs-number">10</span>;</code></pre></div><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191208232221265.png"/> </div><br><h4 id="2-æ‰©å®¹">2. æ‰©å®¹</h4><p>æ·»åŠ å…ƒç´ æ—¶ä½¿ç”¨ ensureCapacityInternal() æ–¹æ³•æ¥ä¿è¯å®¹é‡è¶³å¤Ÿï¼Œå¦‚æœä¸å¤Ÿæ—¶ï¼Œéœ€è¦ä½¿ç”¨ grow() æ–¹æ³•è¿›è¡Œæ‰©å®¹ï¼Œæ–°å®¹é‡çš„å¤§å°ä¸º <code>oldCapacity + (oldCapacity &gt;&gt; 1)</code>ï¼Œå³ oldCapacity+oldCapacity/2ã€‚å…¶ä¸­ oldCapacity &gt;&gt; 1 éœ€è¦å–æ•´ï¼Œæ‰€ä»¥æ–°å®¹é‡å¤§çº¦æ˜¯æ—§å®¹é‡çš„ 1.5 å€å·¦å³ã€‚ï¼ˆoldCapacity ä¸ºå¶æ•°å°±æ˜¯ 1.5 å€ï¼Œä¸ºå¥‡æ•°å°±æ˜¯ 1.5 å€-0.5ï¼‰</p><p>æ‰©å®¹æ“ä½œéœ€è¦è°ƒç”¨ <code>Arrays.copyOf()</code> æŠŠåŸæ•°ç»„æ•´ä¸ªå¤åˆ¶åˆ°æ–°æ•°ç»„ä¸­ï¼Œè¿™ä¸ªæ“ä½œä»£ä»·å¾ˆé«˜ï¼Œå› æ­¤æœ€å¥½åœ¨åˆ›å»º ArrayList å¯¹è±¡æ—¶å°±æŒ‡å®šå¤§æ¦‚çš„å®¹é‡å¤§å°ï¼Œå‡å°‘æ‰©å®¹æ“ä½œçš„æ¬¡æ•°ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>&#123;    ensureCapacityInternal(size + <span class="hljs-number">1</span>);  <span class="hljs-comment">// Increments modCount!!</span>    elementData[size++] = e;    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ensureCapacityInternal</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;    <span class="hljs-keyword">if</span> (elementData == DEFAULTCAPACITY_EMPTY_ELEMENTDATA) &#123;        minCapacity = Math.max(DEFAULT_CAPACITY, minCapacity);    &#125;    ensureExplicitCapacity(minCapacity);&#125;<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">ensureExplicitCapacity</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;    modCount++;    <span class="hljs-comment">// overflow-conscious code</span>    <span class="hljs-keyword">if</span> (minCapacity - elementData.length &gt; <span class="hljs-number">0</span>)        grow(minCapacity);&#125;<span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">grow</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;    <span class="hljs-comment">// overflow-conscious code</span>    <span class="hljs-keyword">int</span> oldCapacity = elementData.length;    <span class="hljs-keyword">int</span> newCapacity = oldCapacity + (oldCapacity &gt;&gt; <span class="hljs-number">1</span>);    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>)        newCapacity = minCapacity;    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>)        newCapacity = hugeCapacity(minCapacity);    <span class="hljs-comment">// minCapacity is usually close to size, so this is a win:</span>    elementData = Arrays.copyOf(elementData, newCapacity);&#125;</code></pre></div><h4 id="3-åˆ é™¤å…ƒç´ ">3. åˆ é™¤å…ƒç´ </h4><p>éœ€è¦è°ƒç”¨ System.arraycopy() å°† index+1 åé¢çš„å…ƒç´ éƒ½å¤åˆ¶åˆ° index ä½ç½®ä¸Šï¼Œè¯¥æ“ä½œçš„æ—¶é—´å¤æ‚åº¦ä¸º O(N)ï¼Œå¯ä»¥çœ‹åˆ° ArrayList åˆ é™¤å…ƒç´ çš„ä»£ä»·æ˜¯éå¸¸é«˜çš„ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> E <span class="hljs-title">remove</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;    rangeCheck(index);    modCount++;    E oldValue = elementData(index);    <span class="hljs-keyword">int</span> numMoved = size - index - <span class="hljs-number">1</span>;    <span class="hljs-keyword">if</span> (numMoved &gt; <span class="hljs-number">0</span>)        System.arraycopy(elementData, index+<span class="hljs-number">1</span>, elementData, index, numMoved);    elementData[--size] = <span class="hljs-keyword">null</span>; <span class="hljs-comment">// clear to let GC do its work</span>    <span class="hljs-keyword">return</span> oldValue;&#125;</code></pre></div><h4 id="4-åºåˆ—åŒ–">4. åºåˆ—åŒ–</h4><p>ArrayList åŸºäºæ•°ç»„å®ç°ï¼Œå¹¶ä¸”å…·æœ‰åŠ¨æ€æ‰©å®¹ç‰¹æ€§ï¼Œå› æ­¤ä¿å­˜å…ƒç´ çš„æ•°ç»„ä¸ä¸€å®šéƒ½ä¼šè¢«ä½¿ç”¨ï¼Œé‚£ä¹ˆå°±æ²¡å¿…è¦å…¨éƒ¨è¿›è¡Œåºåˆ—åŒ–ã€‚</p><p>ä¿å­˜å…ƒç´ çš„æ•°ç»„ elementData ä½¿ç”¨ transient ä¿®é¥°ï¼Œè¯¥å…³é”®å­—å£°æ˜æ•°ç»„é»˜è®¤ä¸ä¼šè¢«åºåˆ—åŒ–ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">transient</span> Object[] elementData; <span class="hljs-comment">// non-private to simplify nested class access</span></code></pre></div><p>ArrayList å®ç°äº† writeObject() å’Œ readObject() æ¥æ§åˆ¶åªåºåˆ—åŒ–æ•°ç»„ä¸­æœ‰å…ƒç´ å¡«å……é‚£éƒ¨åˆ†å†…å®¹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">readObject</span><span class="hljs-params">(java.io.ObjectInputStream s)</span></span><span class="hljs-function">    <span class="hljs-keyword">throws</span> java.io.IOException, ClassNotFoundException </span>&#123;    elementData = EMPTY_ELEMENTDATA;    <span class="hljs-comment">// Read in size, and any hidden stuff</span>    s.defaultReadObject();    <span class="hljs-comment">// Read in capacity</span>    s.readInt(); <span class="hljs-comment">// ignored</span>    <span class="hljs-keyword">if</span> (size &gt; <span class="hljs-number">0</span>) &#123;        <span class="hljs-comment">// be like clone(), allocate array based upon size not capacity</span>        ensureCapacityInternal(size);        Object[] a = elementData;        <span class="hljs-comment">// Read in all elements in the proper order.</span>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++) &#123;            a[i] = s.readObject();        &#125;    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">writeObject</span><span class="hljs-params">(java.io.ObjectOutputStream s)</span></span><span class="hljs-function">    <span class="hljs-keyword">throws</span> java.io.IOException</span>&#123;    <span class="hljs-comment">// Write out element count, and any hidden stuff</span>    <span class="hljs-keyword">int</span> expectedModCount = modCount;    s.defaultWriteObject();    <span class="hljs-comment">// Write out size as capacity for behavioural compatibility with clone()</span>    s.writeInt(size);    <span class="hljs-comment">// Write out all elements in the proper order.</span>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i=<span class="hljs-number">0</span>; i&lt;size; i++) &#123;        s.writeObject(elementData[i]);    &#125;    <span class="hljs-keyword">if</span> (modCount != expectedModCount) &#123;        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ConcurrentModificationException();    &#125;&#125;</code></pre></div><p>åºåˆ—åŒ–æ—¶éœ€è¦ä½¿ç”¨ ObjectOutputStream çš„ writeObject() å°†å¯¹è±¡è½¬æ¢ä¸ºå­—èŠ‚æµå¹¶è¾“å‡ºã€‚è€Œ writeObject() æ–¹æ³•åœ¨ä¼ å…¥çš„å¯¹è±¡å­˜åœ¨ writeObject() çš„æ—¶å€™ä¼šå»åå°„è°ƒç”¨è¯¥å¯¹è±¡çš„ writeObject() æ¥å®ç°åºåˆ—åŒ–ã€‚ååºåˆ—åŒ–ä½¿ç”¨çš„æ˜¯ ObjectInputStream çš„ readObject() æ–¹æ³•ï¼ŒåŸç†ç±»ä¼¼ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">ArrayList list = <span class="hljs-keyword">new</span> ArrayList();ObjectOutputStream oos = <span class="hljs-keyword">new</span> ObjectOutputStream(<span class="hljs-keyword">new</span> FileOutputStream(file));oos.writeObject(list);</code></pre></div><h4 id="5-Fail-Fast">5. Fail-Fast</h4><p>modCount ç”¨æ¥è®°å½• ArrayList ç»“æ„å‘ç”Ÿå˜åŒ–çš„æ¬¡æ•°ã€‚ç»“æ„å‘ç”Ÿå˜åŒ–æ˜¯æŒ‡æ·»åŠ æˆ–è€…åˆ é™¤è‡³å°‘ä¸€ä¸ªå…ƒç´ çš„æ‰€æœ‰æ“ä½œï¼Œæˆ–è€…æ˜¯è°ƒæ•´å†…éƒ¨æ•°ç»„çš„å¤§å°ï¼Œä»…ä»…åªæ˜¯è®¾ç½®å…ƒç´ çš„å€¼ä¸ç®—ç»“æ„å‘ç”Ÿå˜åŒ–ã€‚</p><p>åœ¨è¿›è¡Œåºåˆ—åŒ–æˆ–è€…è¿­ä»£ç­‰æ“ä½œæ—¶ï¼Œéœ€è¦æ¯”è¾ƒæ“ä½œå‰å modCount æ˜¯å¦æ”¹å˜ï¼Œå¦‚æœæ”¹å˜äº†éœ€è¦æŠ›å‡º ConcurrentModificationExceptionã€‚ä»£ç å‚è€ƒä¸ŠèŠ‚åºåˆ—åŒ–ä¸­çš„ writeObject() æ–¹æ³•ã€‚</p><h3 id="Vector">Vector</h3><h4 id="1-åŒæ­¥">1. åŒæ­¥</h4><p>å®ƒçš„å®ç°ä¸ ArrayList ç±»ä¼¼ï¼Œä½†æ˜¯ä½¿ç”¨äº† synchronized è¿›è¡ŒåŒæ­¥ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>&#123;    modCount++;    ensureCapacityHelper(elementCount + <span class="hljs-number">1</span>);    elementData[elementCount++] = e;    <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;&#125;<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">synchronized</span> E <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;    <span class="hljs-keyword">if</span> (index &gt;= elementCount)        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> ArrayIndexOutOfBoundsException(index);    <span class="hljs-keyword">return</span> elementData(index);&#125;</code></pre></div><h4 id="2-æ‰©å®¹-2">2. æ‰©å®¹</h4><p>Vector çš„æ„é€ å‡½æ•°å¯ä»¥ä¼ å…¥ capacityIncrement å‚æ•°ï¼Œå®ƒçš„ä½œç”¨æ˜¯åœ¨æ‰©å®¹æ—¶ä½¿å®¹é‡ capacity å¢é•¿ capacityIncrementã€‚å¦‚æœè¿™ä¸ªå‚æ•°çš„å€¼å°äºç­‰äº 0ï¼Œæ‰©å®¹æ—¶æ¯æ¬¡éƒ½ä»¤ capacity ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Vector</span><span class="hljs-params">(<span class="hljs-keyword">int</span> initialCapacity, <span class="hljs-keyword">int</span> capacityIncrement)</span> </span>&#123;    <span class="hljs-keyword">super</span>();    <span class="hljs-keyword">if</span> (initialCapacity &lt; <span class="hljs-number">0</span>)        <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> IllegalArgumentException(<span class="hljs-string">&quot;Illegal Capacity: &quot;</span>+                                           initialCapacity);    <span class="hljs-keyword">this</span>.elementData = <span class="hljs-keyword">new</span> Object[initialCapacity];    <span class="hljs-keyword">this</span>.capacityIncrement = capacityIncrement;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">void</span> <span class="hljs-title">grow</span><span class="hljs-params">(<span class="hljs-keyword">int</span> minCapacity)</span> </span>&#123;    <span class="hljs-comment">// overflow-conscious code</span>    <span class="hljs-keyword">int</span> oldCapacity = elementData.length;    <span class="hljs-keyword">int</span> newCapacity = oldCapacity + ((capacityIncrement &gt; <span class="hljs-number">0</span>) ?                                     capacityIncrement : oldCapacity);    <span class="hljs-keyword">if</span> (newCapacity - minCapacity &lt; <span class="hljs-number">0</span>)        newCapacity = minCapacity;    <span class="hljs-keyword">if</span> (newCapacity - MAX_ARRAY_SIZE &gt; <span class="hljs-number">0</span>)        newCapacity = hugeCapacity(minCapacity);    elementData = Arrays.copyOf(elementData, newCapacity);&#125;</code></pre></div><p>è°ƒç”¨æ²¡æœ‰ capacityIncrement çš„æ„é€ å‡½æ•°æ—¶ï¼ŒcapacityIncrement å€¼è¢«è®¾ç½®ä¸º 0ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤æƒ…å†µä¸‹ Vector æ¯æ¬¡æ‰©å®¹æ—¶å®¹é‡éƒ½ä¼šç¿»å€ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Vector</span><span class="hljs-params">(<span class="hljs-keyword">int</span> initialCapacity)</span> </span>&#123;    <span class="hljs-keyword">this</span>(initialCapacity, <span class="hljs-number">0</span>);&#125;<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Vector</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">this</span>(<span class="hljs-number">10</span>);&#125;</code></pre></div><h4 id="3-ä¸-ArrayList-çš„æ¯”è¾ƒ">3. ä¸ ArrayList çš„æ¯”è¾ƒ</h4><ul><li>Vector æ˜¯åŒæ­¥çš„ï¼Œå› æ­¤å¼€é”€å°±æ¯” ArrayList è¦å¤§ï¼Œè®¿é—®é€Ÿåº¦æ›´æ…¢ã€‚æœ€å¥½ä½¿ç”¨ ArrayList è€Œä¸æ˜¯ Vectorï¼Œå› ä¸ºåŒæ­¥æ“ä½œå®Œå…¨å¯ä»¥ç”±ç¨‹åºå‘˜è‡ªå·±æ¥æ§åˆ¶ï¼›</li><li>Vector æ¯æ¬¡æ‰©å®¹è¯·æ±‚å…¶å¤§å°çš„ 2 å€ï¼ˆä¹Ÿå¯ä»¥é€šè¿‡æ„é€ å‡½æ•°è®¾ç½®å¢é•¿çš„å®¹é‡ï¼‰ï¼Œè€Œ ArrayList æ˜¯ 1.5 å€ã€‚</li></ul><h4 id="4-æ›¿ä»£æ–¹æ¡ˆ">4. æ›¿ä»£æ–¹æ¡ˆ</h4><p>å¯ä»¥ä½¿ç”¨ <code>Collections.synchronizedList();</code> å¾—åˆ°ä¸€ä¸ªçº¿ç¨‹å®‰å…¨çš„ ArrayListã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">List&lt;String&gt; list = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();List&lt;String&gt; synList = Collections.synchronizedList(list);</code></pre></div><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ concurrent å¹¶å‘åŒ…ä¸‹çš„ CopyOnWriteArrayList ç±»ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">List&lt;String&gt; list = <span class="hljs-keyword">new</span> CopyOnWriteArrayList&lt;&gt;();</code></pre></div><h3 id="CopyOnWriteArrayList">CopyOnWriteArrayList</h3><h4 id="1-è¯»å†™åˆ†ç¦»">1. è¯»å†™åˆ†ç¦»</h4><p>å†™æ“ä½œåœ¨ä¸€ä¸ªå¤åˆ¶çš„æ•°ç»„ä¸Šè¿›è¡Œï¼Œè¯»æ“ä½œè¿˜æ˜¯åœ¨åŸå§‹æ•°ç»„ä¸­è¿›è¡Œï¼Œè¯»å†™åˆ†ç¦»ï¼Œäº’ä¸å½±å“ã€‚</p><p>å†™æ“ä½œéœ€è¦åŠ é”ï¼Œé˜²æ­¢å¹¶å‘å†™å…¥æ—¶å¯¼è‡´å†™å…¥æ•°æ®ä¸¢å¤±ã€‚</p><p>å†™æ“ä½œç»“æŸä¹‹åéœ€è¦æŠŠåŸå§‹æ•°ç»„æŒ‡å‘æ–°çš„å¤åˆ¶æ•°ç»„ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">add</span><span class="hljs-params">(E e)</span> </span>&#123;    <span class="hljs-keyword">final</span> ReentrantLock lock = <span class="hljs-keyword">this</span>.lock;    lock.lock();    <span class="hljs-keyword">try</span> &#123;        Object[] elements = getArray();        <span class="hljs-keyword">int</span> len = elements.length;        Object[] newElements = Arrays.copyOf(elements, len + <span class="hljs-number">1</span>);        newElements[len] = e;        setArray(newElements);        <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;    &#125; <span class="hljs-keyword">finally</span> &#123;        lock.unlock();    &#125;&#125;<span class="hljs-function"><span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setArray</span><span class="hljs-params">(Object[] a)</span> </span>&#123;    array = a;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@SuppressWarnings(&quot;unchecked&quot;)</span><span class="hljs-function"><span class="hljs-keyword">private</span> E <span class="hljs-title">get</span><span class="hljs-params">(Object[] a, <span class="hljs-keyword">int</span> index)</span> </span>&#123;    <span class="hljs-keyword">return</span> (E) a[index];&#125;</code></pre></div><h4 id="2-é€‚ç”¨åœºæ™¯">2. é€‚ç”¨åœºæ™¯</h4><p>CopyOnWriteArrayList åœ¨å†™æ“ä½œçš„åŒæ—¶å…è®¸è¯»æ“ä½œï¼Œå¤§å¤§æé«˜äº†è¯»æ“ä½œçš„æ€§èƒ½ï¼Œå› æ­¤å¾ˆé€‚åˆè¯»å¤šå†™å°‘çš„åº”ç”¨åœºæ™¯ã€‚</p><p>ä½†æ˜¯ CopyOnWriteArrayList æœ‰å…¶ç¼ºé™·ï¼š</p><ul><li>å†…å­˜å ç”¨ï¼šåœ¨å†™æ“ä½œæ—¶éœ€è¦å¤åˆ¶ä¸€ä¸ªæ–°çš„æ•°ç»„ï¼Œä½¿å¾—å†…å­˜å ç”¨ä¸ºåŸæ¥çš„ä¸¤å€å·¦å³ï¼›</li><li>æ•°æ®ä¸ä¸€è‡´ï¼šè¯»æ“ä½œä¸èƒ½è¯»å–å®æ—¶æ€§çš„æ•°æ®ï¼Œå› ä¸ºéƒ¨åˆ†å†™æ“ä½œçš„æ•°æ®è¿˜æœªåŒæ­¥åˆ°è¯»æ•°ç»„ä¸­ã€‚</li></ul><p>æ‰€ä»¥ CopyOnWriteArrayList ä¸é€‚åˆå†…å­˜æ•æ„Ÿä»¥åŠå¯¹å®æ—¶æ€§è¦æ±‚å¾ˆé«˜çš„åœºæ™¯ã€‚</p><h3 id="LinkedList">LinkedList</h3><h4 id="1-æ¦‚è§ˆ-2">1. æ¦‚è§ˆ</h4><p>åŸºäºåŒå‘é“¾è¡¨å®ç°ï¼Œä½¿ç”¨ Node å­˜å‚¨é“¾è¡¨èŠ‚ç‚¹ä¿¡æ¯ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Node</span>&lt;<span class="hljs-title">E</span>&gt; </span>&#123;    E item;    Node&lt;E&gt; next;    Node&lt;E&gt; prev;&#125;</code></pre></div><p>æ¯ä¸ªé“¾è¡¨å­˜å‚¨äº† first å’Œ last æŒ‡é’ˆï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">transient</span> Node&lt;E&gt; first;<span class="hljs-keyword">transient</span> Node&lt;E&gt; last;</code></pre></div><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191208233940066.png"/> </div><br><h4 id="2-ä¸-ArrayList-çš„æ¯”è¾ƒ">2. ä¸ ArrayList çš„æ¯”è¾ƒ</h4><p>ArrayList åŸºäºåŠ¨æ€æ•°ç»„å®ç°ï¼ŒLinkedList åŸºäºåŒå‘é“¾è¡¨å®ç°ã€‚ArrayList å’Œ LinkedList çš„åŒºåˆ«å¯ä»¥å½’ç»“ä¸ºæ•°ç»„å’Œé“¾è¡¨çš„åŒºåˆ«ï¼š</p><ul><li>æ•°ç»„æ”¯æŒéšæœºè®¿é—®ï¼Œä½†æ’å…¥åˆ é™¤çš„ä»£ä»·å¾ˆé«˜ï¼Œéœ€è¦ç§»åŠ¨å¤§é‡å…ƒç´ ï¼›</li><li>é“¾è¡¨ä¸æ”¯æŒéšæœºè®¿é—®ï¼Œä½†æ’å…¥åˆ é™¤åªéœ€è¦æ”¹å˜æŒ‡é’ˆã€‚</li></ul><h3 id="HashMap">HashMap</h3><p>ä¸ºäº†ä¾¿äºç†è§£ï¼Œä»¥ä¸‹æºç åˆ†æä»¥ JDK 1.7 ä¸ºä¸»ã€‚</p><h4 id="1-å­˜å‚¨ç»“æ„">1. å­˜å‚¨ç»“æ„</h4><p>å†…éƒ¨åŒ…å«äº†ä¸€ä¸ª Entry ç±»å‹çš„æ•°ç»„ tableã€‚Entry å­˜å‚¨ç€é”®å€¼å¯¹ã€‚å®ƒåŒ…å«äº†å››ä¸ªå­—æ®µï¼Œä» next å­—æ®µæˆ‘ä»¬å¯ä»¥çœ‹å‡º Entry æ˜¯ä¸€ä¸ªé“¾è¡¨ã€‚å³æ•°ç»„ä¸­çš„æ¯ä¸ªä½ç½®è¢«å½“æˆä¸€ä¸ªæ¡¶ï¼Œä¸€ä¸ªæ¡¶å­˜æ”¾ä¸€ä¸ªé“¾è¡¨ã€‚HashMap ä½¿ç”¨æ‹‰é“¾æ³•æ¥è§£å†³å†²çªï¼ŒåŒä¸€ä¸ªé“¾è¡¨ä¸­å­˜æ”¾å“ˆå¸Œå€¼å’Œæ•£åˆ—æ¡¶å–æ¨¡è¿ç®—ç»“æœç›¸åŒçš„ Entryã€‚</p><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191208234948205.png"/> </div><br><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">transient</span> Entry[] table;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Entry</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">Map</span>.<span class="hljs-title">Entry</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; </span>&#123;    <span class="hljs-keyword">final</span> K key;    V value;    Entry&lt;K,V&gt; next;    <span class="hljs-keyword">int</span> hash;    Entry(<span class="hljs-keyword">int</span> h, K k, V v, Entry&lt;K,V&gt; n) &#123;        value = v;        next = n;        key = k;        hash = h;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> K <span class="hljs-title">getKey</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> key;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> V <span class="hljs-title">getValue</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> value;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> V <span class="hljs-title">setValue</span><span class="hljs-params">(V newValue)</span> </span>&#123;        V oldValue = value;        value = newValue;        <span class="hljs-keyword">return</span> oldValue;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span> </span>&#123;        <span class="hljs-keyword">if</span> (!(o <span class="hljs-keyword">instanceof</span> Map.Entry))            <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;        Map.Entry e = (Map.Entry)o;        Object k1 = getKey();        Object k2 = e.getKey();        <span class="hljs-keyword">if</span> (k1 == k2 || (k1 != <span class="hljs-keyword">null</span> &amp;&amp; k1.equals(k2))) &#123;            Object v1 = getValue();            Object v2 = e.getValue();            <span class="hljs-keyword">if</span> (v1 == v2 || (v1 != <span class="hljs-keyword">null</span> &amp;&amp; v1.equals(v2)))                <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;        &#125;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> Objects.hashCode(getKey()) ^ Objects.hashCode(getValue());    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> getKey() + <span class="hljs-string">&quot;=&quot;</span> + getValue();    &#125;&#125;</code></pre></div><h4 id="2-æ‹‰é“¾æ³•çš„å·¥ä½œåŸç†">2. æ‹‰é“¾æ³•çš„å·¥ä½œåŸç†</h4><div class="hljs code-wrapper"><pre><code class="hljs java">HashMap&lt;String, String&gt; map = <span class="hljs-keyword">new</span> HashMap&lt;&gt;();map.put(<span class="hljs-string">&quot;K1&quot;</span>, <span class="hljs-string">&quot;V1&quot;</span>);map.put(<span class="hljs-string">&quot;K2&quot;</span>, <span class="hljs-string">&quot;V2&quot;</span>);map.put(<span class="hljs-string">&quot;K3&quot;</span>, <span class="hljs-string">&quot;V3&quot;</span>);</code></pre></div><ul><li>æ–°å»ºä¸€ä¸ª HashMapï¼Œé»˜è®¤å¤§å°ä¸º 16ï¼›</li><li>æ’å…¥ &lt;K1,V1&gt; é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®— K1 çš„ hashCode ä¸º 115ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ 115%16=3ã€‚</li><li>æ’å…¥ &lt;K2,V2&gt; é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®— K2 çš„ hashCode ä¸º 118ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ 118%16=6ã€‚</li><li>æ’å…¥ &lt;K3,V3&gt; é”®å€¼å¯¹ï¼Œå…ˆè®¡ç®— K3 çš„ hashCode ä¸º 118ï¼Œä½¿ç”¨é™¤ç•™ä½™æ•°æ³•å¾—åˆ°æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ 118%16=6ï¼Œæ’åœ¨ &lt;K2,V2&gt; å‰é¢ã€‚</li></ul><p>åº”è¯¥æ³¨æ„åˆ°é“¾è¡¨çš„æ’å…¥æ˜¯ä»¥å¤´æ’æ³•æ–¹å¼è¿›è¡Œçš„ï¼Œä¾‹å¦‚ä¸Šé¢çš„ &lt;K3,V3&gt; ä¸æ˜¯æ’åœ¨ &lt;K2,V2&gt; åé¢ï¼Œè€Œæ˜¯æ’å…¥åœ¨é“¾è¡¨å¤´éƒ¨ã€‚</p><p>æŸ¥æ‰¾éœ€è¦åˆ†æˆä¸¤æ­¥è¿›è¡Œï¼š</p><ul><li>è®¡ç®—é”®å€¼å¯¹æ‰€åœ¨çš„æ¡¶ï¼›</li><li>åœ¨é“¾è¡¨ä¸Šé¡ºåºæŸ¥æ‰¾ï¼Œæ—¶é—´å¤æ‚åº¦æ˜¾ç„¶å’Œé“¾è¡¨çš„é•¿åº¦æˆæ­£æ¯”ã€‚</li></ul><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191208235258643.png"/> </div><br><h4 id="3-put-æ“ä½œ">3. put æ“ä½œ</h4><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> V <span class="hljs-title">put</span><span class="hljs-params">(K key, V value)</span> </span>&#123;    <span class="hljs-keyword">if</span> (table == EMPTY_TABLE) &#123;        inflateTable(threshold);    &#125;    <span class="hljs-comment">// é”®ä¸º null å•ç‹¬å¤„ç†</span>    <span class="hljs-keyword">if</span> (key == <span class="hljs-keyword">null</span>)        <span class="hljs-keyword">return</span> putForNullKey(value);    <span class="hljs-keyword">int</span> hash = hash(key);    <span class="hljs-comment">// ç¡®å®šæ¡¶ä¸‹æ ‡</span>    <span class="hljs-keyword">int</span> i = indexFor(hash, table.length);    <span class="hljs-comment">// å…ˆæ‰¾å‡ºæ˜¯å¦å·²ç»å­˜åœ¨é”®ä¸º key çš„é”®å€¼å¯¹ï¼Œå¦‚æœå­˜åœ¨çš„è¯å°±æ›´æ–°è¿™ä¸ªé”®å€¼å¯¹çš„å€¼ä¸º value</span>    <span class="hljs-keyword">for</span> (Entry&lt;K,V&gt; e = table[i]; e != <span class="hljs-keyword">null</span>; e = e.next) &#123;        Object k;        <span class="hljs-keyword">if</span> (e.hash == hash &amp;&amp; ((k = e.key) == key || key.equals(k))) &#123;            V oldValue = e.value;            e.value = value;            e.recordAccess(<span class="hljs-keyword">this</span>);            <span class="hljs-keyword">return</span> oldValue;        &#125;    &#125;    modCount++;    <span class="hljs-comment">// æ’å…¥æ–°é”®å€¼å¯¹</span>    addEntry(hash, key, value, i);    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;&#125;</code></pre></div><p>HashMap å…è®¸æ’å…¥é”®ä¸º null çš„é”®å€¼å¯¹ã€‚ä½†æ˜¯å› ä¸ºæ— æ³•è°ƒç”¨ null çš„ hashCode() æ–¹æ³•ï¼Œä¹Ÿå°±æ— æ³•ç¡®å®šè¯¥é”®å€¼å¯¹çš„æ¡¶ä¸‹æ ‡ï¼Œåªèƒ½é€šè¿‡å¼ºåˆ¶æŒ‡å®šä¸€ä¸ªæ¡¶ä¸‹æ ‡æ¥å­˜æ”¾ã€‚HashMap ä½¿ç”¨ç¬¬ 0 ä¸ªæ¡¶å­˜æ”¾é”®ä¸º null çš„é”®å€¼å¯¹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">private</span> V <span class="hljs-title">putForNullKey</span><span class="hljs-params">(V value)</span> </span>&#123;    <span class="hljs-keyword">for</span> (Entry&lt;K,V&gt; e = table[<span class="hljs-number">0</span>]; e != <span class="hljs-keyword">null</span>; e = e.next) &#123;        <span class="hljs-keyword">if</span> (e.key == <span class="hljs-keyword">null</span>) &#123;            V oldValue = e.value;            e.value = value;            e.recordAccess(<span class="hljs-keyword">this</span>);            <span class="hljs-keyword">return</span> oldValue;        &#125;    &#125;    modCount++;    addEntry(<span class="hljs-number">0</span>, <span class="hljs-keyword">null</span>, value, <span class="hljs-number">0</span>);    <span class="hljs-keyword">return</span> <span class="hljs-keyword">null</span>;&#125;</code></pre></div><p>ä½¿ç”¨é“¾è¡¨çš„å¤´æ’æ³•ï¼Œä¹Ÿå°±æ˜¯æ–°çš„é”®å€¼å¯¹æ’åœ¨é“¾è¡¨çš„å¤´éƒ¨ï¼Œè€Œä¸æ˜¯é“¾è¡¨çš„å°¾éƒ¨ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addEntry</span><span class="hljs-params">(<span class="hljs-keyword">int</span> hash, K key, V value, <span class="hljs-keyword">int</span> bucketIndex)</span> </span>&#123;    <span class="hljs-keyword">if</span> ((size &gt;= threshold) &amp;&amp; (<span class="hljs-keyword">null</span> != table[bucketIndex])) &#123;        resize(<span class="hljs-number">2</span> * table.length);        hash = (<span class="hljs-keyword">null</span> != key) ? hash(key) : <span class="hljs-number">0</span>;        bucketIndex = indexFor(hash, table.length);    &#125;    createEntry(hash, key, value, bucketIndex);&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">createEntry</span><span class="hljs-params">(<span class="hljs-keyword">int</span> hash, K key, V value, <span class="hljs-keyword">int</span> bucketIndex)</span> </span>&#123;    Entry&lt;K,V&gt; e = table[bucketIndex];    <span class="hljs-comment">// å¤´æ’æ³•ï¼Œé“¾è¡¨å¤´éƒ¨æŒ‡å‘æ–°çš„é”®å€¼å¯¹</span>    table[bucketIndex] = <span class="hljs-keyword">new</span> Entry&lt;&gt;(hash, key, value, e);    size++;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">Entry(<span class="hljs-keyword">int</span> h, K k, V v, Entry&lt;K,V&gt; n) &#123;    value = v;    next = n;    key = k;    hash = h;&#125;</code></pre></div><h4 id="4-ç¡®å®šæ¡¶ä¸‹æ ‡">4. ç¡®å®šæ¡¶ä¸‹æ ‡</h4><p>å¾ˆå¤šæ“ä½œéƒ½éœ€è¦å…ˆç¡®å®šä¸€ä¸ªé”®å€¼å¯¹æ‰€åœ¨çš„æ¡¶ä¸‹æ ‡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">int</span> hash = hash(key);<span class="hljs-keyword">int</span> i = indexFor(hash, table.length);</code></pre></div><p><strong>4.1 è®¡ç®— hash å€¼</strong></p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hash</span><span class="hljs-params">(Object k)</span> </span>&#123;    <span class="hljs-keyword">int</span> h = hashSeed;    <span class="hljs-keyword">if</span> (<span class="hljs-number">0</span> != h &amp;&amp; k <span class="hljs-keyword">instanceof</span> String) &#123;        <span class="hljs-keyword">return</span> sun.misc.Hashing.stringHash32((String) k);    &#125;    h ^= k.hashCode();    <span class="hljs-comment">// This function ensures that hashCodes that differ only by</span>    <span class="hljs-comment">// constant multiples at each bit position have a bounded</span>    <span class="hljs-comment">// number of collisions (approximately 8 at default load factor).</span>    h ^= (h &gt;&gt;&gt; <span class="hljs-number">20</span>) ^ (h &gt;&gt;&gt; <span class="hljs-number">12</span>);    <span class="hljs-keyword">return</span> h ^ (h &gt;&gt;&gt; <span class="hljs-number">7</span>) ^ (h &gt;&gt;&gt; <span class="hljs-number">4</span>);&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">return</span> Objects.hashCode(key) ^ Objects.hashCode(value);&#125;</code></pre></div><p><strong>4.2 å–æ¨¡</strong></p><p>ä»¤ x = 1&lt;&lt;4ï¼Œå³ x ä¸º 2 çš„ 4 æ¬¡æ–¹ï¼Œå®ƒå…·æœ‰ä»¥ä¸‹æ€§è´¨ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">x</span>   : <span class="hljs-number">00010000</span><span class="hljs-attribute">x</span>-<span class="hljs-number">1</span> : <span class="hljs-number">00001111</span></code></pre></div><p>ä»¤ä¸€ä¸ªæ•° y ä¸ x-1 åšä¸è¿ç®—ï¼Œå¯ä»¥å»é™¤ y ä½çº§è¡¨ç¤ºçš„ç¬¬ 4 ä½ä»¥ä¸Šæ•°ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">y</span>       : <span class="hljs-number">10110010</span><span class="hljs-attribute">x</span>-<span class="hljs-number">1</span>     : <span class="hljs-number">00001111</span><span class="hljs-attribute">y</span>&amp;(x-<span class="hljs-number">1</span>) : <span class="hljs-number">00000010</span></code></pre></div><p>è¿™ä¸ªæ€§è´¨å’Œ y å¯¹ x å–æ¨¡æ•ˆæœæ˜¯ä¸€æ ·çš„ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs ada">y   : 10110010x   : 00010000y%x : 00000010</code></pre></div><p>æˆ‘ä»¬çŸ¥é“ï¼Œä½è¿ç®—çš„ä»£ä»·æ¯”æ±‚æ¨¡è¿ç®—å°çš„å¤šï¼Œå› æ­¤åœ¨è¿›è¡Œè¿™ç§è®¡ç®—æ—¶ç”¨ä½è¿ç®—çš„è¯èƒ½å¸¦æ¥æ›´é«˜çš„æ€§èƒ½ã€‚</p><p>ç¡®å®šæ¡¶ä¸‹æ ‡çš„æœ€åä¸€æ­¥æ˜¯å°† key çš„ hash å€¼å¯¹æ¡¶ä¸ªæ•°å–æ¨¡ï¼šhash%capacityï¼Œå¦‚æœèƒ½ä¿è¯ capacity ä¸º 2 çš„ n æ¬¡æ–¹ï¼Œé‚£ä¹ˆå°±å¯ä»¥å°†è¿™ä¸ªæ“ä½œè½¬æ¢ä¸ºä½è¿ç®—ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">indexFor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> h, <span class="hljs-keyword">int</span> length)</span> </span>&#123;    <span class="hljs-keyword">return</span> h &amp; (length-<span class="hljs-number">1</span>);&#125;</code></pre></div><h4 id="5-æ‰©å®¹-åŸºæœ¬åŸç†">5. æ‰©å®¹-åŸºæœ¬åŸç†</h4><p>è®¾ HashMap çš„ table é•¿åº¦ä¸º Mï¼Œéœ€è¦å­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡ä¸º Nï¼Œå¦‚æœå“ˆå¸Œå‡½æ•°æ»¡è¶³å‡åŒ€æ€§çš„è¦æ±‚ï¼Œé‚£ä¹ˆæ¯æ¡é“¾è¡¨çš„é•¿åº¦å¤§çº¦ä¸º N/Mï¼Œå› æ­¤æŸ¥æ‰¾çš„å¤æ‚åº¦ä¸º O(N/M)ã€‚</p><p>ä¸ºäº†è®©æŸ¥æ‰¾çš„æˆæœ¬é™ä½ï¼Œåº”è¯¥ä½¿ N/M å°½å¯èƒ½å°ï¼Œå› æ­¤éœ€è¦ä¿è¯ M å°½å¯èƒ½å¤§ï¼Œä¹Ÿå°±æ˜¯è¯´ table è¦å°½å¯èƒ½å¤§ã€‚HashMap é‡‡ç”¨åŠ¨æ€æ‰©å®¹æ¥æ ¹æ®å½“å‰çš„ N å€¼æ¥è°ƒæ•´ M å€¼ï¼Œä½¿å¾—ç©ºé—´æ•ˆç‡å’Œæ—¶é—´æ•ˆç‡éƒ½èƒ½å¾—åˆ°ä¿è¯ã€‚</p><p>å’Œæ‰©å®¹ç›¸å…³çš„å‚æ•°ä¸»è¦æœ‰ï¼šcapacityã€sizeã€threshold å’Œ load_factorã€‚</p><table><thead><tr><th style="text-align:center">å‚æ•°</th><th style="text-align:left">å«ä¹‰</th></tr></thead><tbody><tr><td style="text-align:center">capacity</td><td style="text-align:left">table çš„å®¹é‡å¤§å°ï¼Œé»˜è®¤ä¸º 16ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ capacity å¿…é¡»ä¿è¯ä¸º 2 çš„ n æ¬¡æ–¹ã€‚</td></tr><tr><td style="text-align:center">size</td><td style="text-align:left">é”®å€¼å¯¹æ•°é‡ã€‚</td></tr><tr><td style="text-align:center">threshold</td><td style="text-align:left">size çš„ä¸´ç•Œå€¼ï¼Œå½“ size å¤§äºç­‰äº threshold å°±å¿…é¡»è¿›è¡Œæ‰©å®¹æ“ä½œã€‚</td></tr><tr><td style="text-align:center">loadFactor</td><td style="text-align:left">è£…è½½å› å­ï¼Œtable èƒ½å¤Ÿä½¿ç”¨çš„æ¯”ä¾‹ï¼Œthreshold = (int)(capacity* loadFactor)ã€‚</td></tr></tbody></table><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> DEFAULT_INITIAL_CAPACITY = <span class="hljs-number">16</span>;<span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAXIMUM_CAPACITY = <span class="hljs-number">1</span> &lt;&lt; <span class="hljs-number">30</span>;<span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">float</span> DEFAULT_LOAD_FACTOR = <span class="hljs-number">0.75f</span>;<span class="hljs-keyword">transient</span> Entry[] table;<span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> size;<span class="hljs-keyword">int</span> threshold;<span class="hljs-keyword">final</span> <span class="hljs-keyword">float</span> loadFactor;<span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> modCount;</code></pre></div><p>ä»ä¸‹é¢çš„æ·»åŠ å…ƒç´ ä»£ç ä¸­å¯ä»¥çœ‹å‡ºï¼Œå½“éœ€è¦æ‰©å®¹æ—¶ï¼Œä»¤ capacity ä¸ºåŸæ¥çš„ä¸¤å€ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">addEntry</span><span class="hljs-params">(<span class="hljs-keyword">int</span> hash, K key, V value, <span class="hljs-keyword">int</span> bucketIndex)</span> </span>&#123;    Entry&lt;K,V&gt; e = table[bucketIndex];    table[bucketIndex] = <span class="hljs-keyword">new</span> Entry&lt;&gt;(hash, key, value, e);    <span class="hljs-keyword">if</span> (size++ &gt;= threshold)        resize(<span class="hljs-number">2</span> * table.length);&#125;</code></pre></div><p>æ‰©å®¹ä½¿ç”¨ resize() å®ç°ï¼Œéœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ‰©å®¹æ“ä½œåŒæ ·éœ€è¦æŠŠ oldTable çš„æ‰€æœ‰é”®å€¼å¯¹é‡æ–°æ’å…¥ newTable ä¸­ï¼Œå› æ­¤è¿™ä¸€æ­¥æ˜¯å¾ˆè´¹æ—¶çš„ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">resize</span><span class="hljs-params">(<span class="hljs-keyword">int</span> newCapacity)</span> </span>&#123;    Entry[] oldTable = table;    <span class="hljs-keyword">int</span> oldCapacity = oldTable.length;    <span class="hljs-keyword">if</span> (oldCapacity == MAXIMUM_CAPACITY) &#123;        threshold = Integer.MAX_VALUE;        <span class="hljs-keyword">return</span>;    &#125;    Entry[] newTable = <span class="hljs-keyword">new</span> Entry[newCapacity];    transfer(newTable);    table = newTable;    threshold = (<span class="hljs-keyword">int</span>)(newCapacity * loadFactor);&#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">transfer</span><span class="hljs-params">(Entry[] newTable)</span> </span>&#123;    Entry[] src = table;    <span class="hljs-keyword">int</span> newCapacity = newTable.length;    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; src.length; j++) &#123;        Entry&lt;K,V&gt; e = src[j];        <span class="hljs-keyword">if</span> (e != <span class="hljs-keyword">null</span>) &#123;            src[j] = <span class="hljs-keyword">null</span>;            <span class="hljs-keyword">do</span> &#123;                Entry&lt;K,V&gt; next = e.next;                <span class="hljs-keyword">int</span> i = indexFor(e.hash, newCapacity);                e.next = newTable[i];                newTable[i] = e;                e = next;            &#125; <span class="hljs-keyword">while</span> (e != <span class="hljs-keyword">null</span>);        &#125;    &#125;&#125;</code></pre></div><h4 id="6-æ‰©å®¹-é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡">6. æ‰©å®¹-é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡</h4><p>åœ¨è¿›è¡Œæ‰©å®¹æ—¶ï¼Œéœ€è¦æŠŠé”®å€¼å¯¹é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡ï¼Œä»è€Œæ”¾åˆ°å¯¹åº”çš„æ¡¶ä¸Šã€‚åœ¨å‰é¢æåˆ°ï¼ŒHashMap ä½¿ç”¨ hash%capacity æ¥ç¡®å®šæ¡¶ä¸‹æ ‡ã€‚HashMap capacity ä¸º 2 çš„ n æ¬¡æ–¹è¿™ä¸€ç‰¹ç‚¹èƒ½å¤Ÿæå¤§é™ä½é‡æ–°è®¡ç®—æ¡¶ä¸‹æ ‡æ“ä½œçš„å¤æ‚åº¦ã€‚</p><p>å‡è®¾åŸæ•°ç»„é•¿åº¦ capacity ä¸º 16ï¼Œæ‰©å®¹ä¹‹å new capacity ä¸º 32ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs html">capacity     : 00010000new capacity : 00100000</code></pre></div><p>å¯¹äºä¸€ä¸ª Keyï¼Œå®ƒçš„å“ˆå¸Œå€¼ hash åœ¨ç¬¬ 5 ä½ï¼š</p><ul><li>ä¸º 0ï¼Œé‚£ä¹ˆ hash%00010000 = hash%00100000ï¼Œæ¡¶ä½ç½®å’ŒåŸæ¥ä¸€è‡´ï¼›</li><li>ä¸º 1ï¼Œhash%00010000 = hash%00100000 + 16ï¼Œæ¡¶ä½ç½®æ˜¯åŸä½ç½® + 16ã€‚</li></ul><h4 id="7-è®¡ç®—æ•°ç»„å®¹é‡">7. è®¡ç®—æ•°ç»„å®¹é‡</h4><p>HashMap æ„é€ å‡½æ•°å…è®¸ç”¨æˆ·ä¼ å…¥çš„å®¹é‡ä¸æ˜¯ 2 çš„ n æ¬¡æ–¹ï¼Œå› ä¸ºå®ƒå¯ä»¥è‡ªåŠ¨åœ°å°†ä¼ å…¥çš„å®¹é‡è½¬æ¢ä¸º 2 çš„ n æ¬¡æ–¹ã€‚</p><p>å…ˆè€ƒè™‘å¦‚ä½•æ±‚ä¸€ä¸ªæ•°çš„æ©ç ï¼Œå¯¹äº 10010000ï¼Œå®ƒçš„æ©ç ä¸º 11111111ï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹æ–¹æ³•å¾—åˆ°ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">mask</span> |= mask &gt;&gt; <span class="hljs-number">1</span>    <span class="hljs-number">11011000</span><span class="hljs-attribute">mask</span> |= mask &gt;&gt; <span class="hljs-number">2</span>    <span class="hljs-number">11111110</span><span class="hljs-attribute">mask</span> |= mask &gt;&gt; <span class="hljs-number">4</span>    <span class="hljs-number">11111111</span></code></pre></div><p>mask+1 æ˜¯å¤§äºåŸå§‹æ•°å­—çš„æœ€å°çš„ 2 çš„ n æ¬¡æ–¹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs apache"><span class="hljs-attribute">num</span>     <span class="hljs-number">10010000</span><span class="hljs-attribute">mask</span>+<span class="hljs-number">1</span> <span class="hljs-number">100000000</span></code></pre></div><p>ä»¥ä¸‹æ˜¯ HashMap ä¸­è®¡ç®—æ•°ç»„å®¹é‡çš„ä»£ç ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> <span class="hljs-title">tableSizeFor</span><span class="hljs-params">(<span class="hljs-keyword">int</span> cap)</span> </span>&#123;    <span class="hljs-keyword">int</span> n = cap - <span class="hljs-number">1</span>;    n |= n &gt;&gt;&gt; <span class="hljs-number">1</span>;    n |= n &gt;&gt;&gt; <span class="hljs-number">2</span>;    n |= n &gt;&gt;&gt; <span class="hljs-number">4</span>;    n |= n &gt;&gt;&gt; <span class="hljs-number">8</span>;    n |= n &gt;&gt;&gt; <span class="hljs-number">16</span>;    <span class="hljs-keyword">return</span> (n &lt; <span class="hljs-number">0</span>) ? <span class="hljs-number">1</span> : (n &gt;= MAXIMUM_CAPACITY) ? MAXIMUM_CAPACITY : n + <span class="hljs-number">1</span>;&#125;</code></pre></div><h4 id="8-é“¾è¡¨è½¬çº¢é»‘æ ‘">8. é“¾è¡¨è½¬çº¢é»‘æ ‘</h4><p>ä» JDK 1.8 å¼€å§‹ï¼Œä¸€ä¸ªæ¡¶å­˜å‚¨çš„é“¾è¡¨é•¿åº¦å¤§äºç­‰äº 8 æ—¶ä¼šå°†é“¾è¡¨è½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p><h4 id="9-ä¸-Hashtable-çš„æ¯”è¾ƒ">9. ä¸ Hashtable çš„æ¯”è¾ƒ</h4><ul><li>Hashtable ä½¿ç”¨ synchronized æ¥è¿›è¡ŒåŒæ­¥ã€‚</li><li>HashMap å¯ä»¥æ’å…¥é”®ä¸º null çš„ Entryã€‚</li><li>HashMap çš„è¿­ä»£å™¨æ˜¯ fail-fast è¿­ä»£å™¨ã€‚</li><li>HashMap ä¸èƒ½ä¿è¯éšç€æ—¶é—´çš„æ¨ç§» Map ä¸­çš„å…ƒç´ æ¬¡åºæ˜¯ä¸å˜çš„ã€‚</li></ul><h3 id="ConcurrentHashMap">ConcurrentHashMap</h3><h4 id="1-å­˜å‚¨ç»“æ„-2">1. å­˜å‚¨ç»“æ„</h4><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191209001038024.png"/> </div><br><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">HashEntry</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; </span>&#123;    <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> hash;    <span class="hljs-keyword">final</span> K key;    <span class="hljs-keyword">volatile</span> V value;    <span class="hljs-keyword">volatile</span> HashEntry&lt;K,V&gt; next;&#125;</code></pre></div><p>ConcurrentHashMap å’Œ HashMap å®ç°ä¸Šç±»ä¼¼ï¼Œæœ€ä¸»è¦çš„å·®åˆ«æ˜¯ ConcurrentHashMap é‡‡ç”¨äº†åˆ†æ®µé”ï¼ˆSegmentï¼‰ï¼Œæ¯ä¸ªåˆ†æ®µé”ç»´æŠ¤ç€å‡ ä¸ªæ¡¶ï¼ˆHashEntryï¼‰ï¼Œå¤šä¸ªçº¿ç¨‹å¯ä»¥åŒæ—¶è®¿é—®ä¸åŒåˆ†æ®µé”ä¸Šçš„æ¡¶ï¼Œä»è€Œä½¿å…¶å¹¶å‘åº¦æ›´é«˜ï¼ˆå¹¶å‘åº¦å°±æ˜¯ Segment çš„ä¸ªæ•°ï¼‰ã€‚</p><p>Segment ç»§æ‰¿è‡ª ReentrantLockã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Segment</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">ReentrantLock</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Serializable</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">long</span> serialVersionUID = <span class="hljs-number">2249069246763182397L</span>;    <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_SCAN_RETRIES =        Runtime.getRuntime().availableProcessors() &gt; <span class="hljs-number">1</span> ? <span class="hljs-number">64</span> : <span class="hljs-number">1</span>;    <span class="hljs-keyword">transient</span> <span class="hljs-keyword">volatile</span> HashEntry&lt;K,V&gt;[] table;    <span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> count;    <span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> modCount;    <span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> threshold;    <span class="hljs-keyword">final</span> <span class="hljs-keyword">float</span> loadFactor;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">final</span> Segment&lt;K,V&gt;[] segments;</code></pre></div><p>é»˜è®¤çš„å¹¶å‘çº§åˆ«ä¸º 16ï¼Œä¹Ÿå°±æ˜¯è¯´é»˜è®¤åˆ›å»º 16 ä¸ª Segmentã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> DEFAULT_CONCURRENCY_LEVEL = <span class="hljs-number">16</span>;</code></pre></div><h4 id="2-size-æ“ä½œ">2. size æ“ä½œ</h4><p>æ¯ä¸ª Segment ç»´æŠ¤äº†ä¸€ä¸ª count å˜é‡æ¥ç»Ÿè®¡è¯¥ Segment ä¸­çš„é”®å€¼å¯¹ä¸ªæ•°ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><span class="hljs-comment"> * The number of elements. Accessed only either within locks</span><span class="hljs-comment"> * or among other volatile reads that maintain visibility.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">transient</span> <span class="hljs-keyword">int</span> count;</code></pre></div><p>åœ¨æ‰§è¡Œ size æ“ä½œæ—¶ï¼Œéœ€è¦éå†æ‰€æœ‰ Segment ç„¶åæŠŠ count ç´¯è®¡èµ·æ¥ã€‚</p><p>ConcurrentHashMap åœ¨æ‰§è¡Œ size æ“ä½œæ—¶å…ˆå°è¯•ä¸åŠ é”ï¼Œå¦‚æœè¿ç»­ä¸¤æ¬¡ä¸åŠ é”æ“ä½œå¾—åˆ°çš„ç»“æœä¸€è‡´ï¼Œé‚£ä¹ˆå¯ä»¥è®¤ä¸ºè¿™ä¸ªç»“æœæ˜¯æ­£ç¡®çš„ã€‚</p><p>å°è¯•æ¬¡æ•°ä½¿ç”¨ RETRIES_BEFORE_LOCK å®šä¹‰ï¼Œè¯¥å€¼ä¸º 2ï¼Œretries åˆå§‹å€¼ä¸º -1ï¼Œå› æ­¤å°è¯•æ¬¡æ•°ä¸º 3ã€‚</p><p>å¦‚æœå°è¯•çš„æ¬¡æ•°è¶…è¿‡ 3 æ¬¡ï¼Œå°±éœ€è¦å¯¹æ¯ä¸ª Segment åŠ é”ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><span class="hljs-comment"> * Number of unsynchronized retries in size and containsValue</span><span class="hljs-comment"> * methods before resorting to locking. This is used to avoid</span><span class="hljs-comment"> * unbounded retries if tables undergo continuous modification</span><span class="hljs-comment"> * which would make it impossible to obtain an accurate result.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> RETRIES_BEFORE_LOCK = <span class="hljs-number">2</span>;<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">size</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-comment">// Try a few times to get accurate count. On failure due to</span>    <span class="hljs-comment">// continuous async changes in table, resort to locking.</span>    <span class="hljs-keyword">final</span> Segment&lt;K,V&gt;[] segments = <span class="hljs-keyword">this</span>.segments;    <span class="hljs-keyword">int</span> size;    <span class="hljs-keyword">boolean</span> overflow; <span class="hljs-comment">// true if size overflows 32 bits</span>    <span class="hljs-keyword">long</span> sum;         <span class="hljs-comment">// sum of modCounts</span>    <span class="hljs-keyword">long</span> last = <span class="hljs-number">0L</span>;   <span class="hljs-comment">// previous sum</span>    <span class="hljs-keyword">int</span> retries = -<span class="hljs-number">1</span>; <span class="hljs-comment">// first iteration isn&#x27;t retry</span>    <span class="hljs-keyword">try</span> &#123;        <span class="hljs-keyword">for</span> (;;) &#123;            <span class="hljs-comment">// è¶…è¿‡å°è¯•æ¬¡æ•°ï¼Œåˆ™å¯¹æ¯ä¸ª Segment åŠ é”</span>            <span class="hljs-keyword">if</span> (retries++ == RETRIES_BEFORE_LOCK) &#123;                <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; segments.length; ++j)                    ensureSegment(j).lock(); <span class="hljs-comment">// force creation</span>            &#125;            sum = <span class="hljs-number">0L</span>;            size = <span class="hljs-number">0</span>;            overflow = <span class="hljs-keyword">false</span>;            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; segments.length; ++j) &#123;                Segment&lt;K,V&gt; seg = segmentAt(segments, j);                <span class="hljs-keyword">if</span> (seg != <span class="hljs-keyword">null</span>) &#123;                    sum += seg.modCount;                    <span class="hljs-keyword">int</span> c = seg.count;                    <span class="hljs-keyword">if</span> (c &lt; <span class="hljs-number">0</span> || (size += c) &lt; <span class="hljs-number">0</span>)                        overflow = <span class="hljs-keyword">true</span>;                &#125;            &#125;            <span class="hljs-comment">// è¿ç»­ä¸¤æ¬¡å¾—åˆ°çš„ç»“æœä¸€è‡´ï¼Œåˆ™è®¤ä¸ºè¿™ä¸ªç»“æœæ˜¯æ­£ç¡®çš„</span>            <span class="hljs-keyword">if</span> (sum == last)                <span class="hljs-keyword">break</span>;            last = sum;        &#125;    &#125; <span class="hljs-keyword">finally</span> &#123;        <span class="hljs-keyword">if</span> (retries &gt; RETRIES_BEFORE_LOCK) &#123;            <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span>; j &lt; segments.length; ++j)                segmentAt(segments, j).unlock();        &#125;    &#125;    <span class="hljs-keyword">return</span> overflow ? Integer.MAX_VALUE : size;&#125;</code></pre></div><h4 id="3-JDK-1-8-çš„æ”¹åŠ¨">3. JDK 1.8 çš„æ”¹åŠ¨</h4><p>JDK 1.7 ä½¿ç”¨åˆ†æ®µé”æœºåˆ¶æ¥å®ç°å¹¶å‘æ›´æ–°æ“ä½œï¼Œæ ¸å¿ƒç±»ä¸º Segmentï¼Œå®ƒç»§æ‰¿è‡ªé‡å…¥é” ReentrantLockï¼Œå¹¶å‘åº¦ä¸ Segment æ•°é‡ç›¸ç­‰ã€‚</p><p>JDK 1.8 ä½¿ç”¨äº† CAS æ“ä½œæ¥æ”¯æŒæ›´é«˜çš„å¹¶å‘åº¦ï¼Œåœ¨ CAS æ“ä½œå¤±è´¥æ—¶ä½¿ç”¨å†…ç½®é” synchronizedã€‚</p><p>å¹¶ä¸” JDK 1.8 çš„å®ç°ä¹Ÿåœ¨é“¾è¡¨è¿‡é•¿æ—¶ä¼šè½¬æ¢ä¸ºçº¢é»‘æ ‘ã€‚</p><h3 id="LinkedHashMap">LinkedHashMap</h3><h4 id="å­˜å‚¨ç»“æ„">å­˜å‚¨ç»“æ„</h4><p>ç»§æ‰¿è‡ª HashMapï¼Œå› æ­¤å…·æœ‰å’Œ HashMap ä¸€æ ·çš„å¿«é€ŸæŸ¥æ‰¾ç‰¹æ€§ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LinkedHashMap</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">HashMap</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">Map</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt;</span></code></pre></div><p>å†…éƒ¨ç»´æŠ¤äº†ä¸€ä¸ªåŒå‘é“¾è¡¨ï¼Œç”¨æ¥ç»´æŠ¤æ’å…¥é¡ºåºæˆ–è€… LRU é¡ºåºã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/**</span><span class="hljs-comment"> * The head (eldest) of the doubly linked list.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">transient</span> LinkedHashMap.Entry&lt;K,V&gt; head;<span class="hljs-comment">/**</span><span class="hljs-comment"> * The tail (youngest) of the doubly linked list.</span><span class="hljs-comment"> */</span><span class="hljs-keyword">transient</span> LinkedHashMap.Entry&lt;K,V&gt; tail;</code></pre></div><p>accessOrder å†³å®šäº†é¡ºåºï¼Œé»˜è®¤ä¸º falseï¼Œæ­¤æ—¶ç»´æŠ¤çš„æ˜¯æ’å…¥é¡ºåºã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">final</span> <span class="hljs-keyword">boolean</span> accessOrder;</code></pre></div><p>LinkedHashMap æœ€é‡è¦çš„æ˜¯ä»¥ä¸‹ç”¨äºç»´æŠ¤é¡ºåºçš„å‡½æ•°ï¼Œå®ƒä»¬ä¼šåœ¨ putã€get ç­‰æ–¹æ³•ä¸­è°ƒç”¨ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterNodeAccess</span><span class="hljs-params">(Node&lt;K,V&gt; p)</span> </span>&#123; &#125;<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterNodeInsertion</span><span class="hljs-params">(<span class="hljs-keyword">boolean</span> evict)</span> </span>&#123; &#125;</code></pre></div><h4 id="afterNodeAccess">afterNodeAccess()</h4><p>å½“ä¸€ä¸ªèŠ‚ç‚¹è¢«è®¿é—®æ—¶ï¼Œå¦‚æœ accessOrder ä¸º trueï¼Œåˆ™ä¼šå°†è¯¥èŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å°¾éƒ¨ã€‚ä¹Ÿå°±æ˜¯è¯´æŒ‡å®šä¸º LRU é¡ºåºä¹‹åï¼Œåœ¨æ¯æ¬¡è®¿é—®ä¸€ä¸ªèŠ‚ç‚¹æ—¶ï¼Œä¼šå°†è¿™ä¸ªèŠ‚ç‚¹ç§»åˆ°é“¾è¡¨å°¾éƒ¨ï¼Œä¿è¯é“¾è¡¨å°¾éƒ¨æ˜¯æœ€è¿‘è®¿é—®çš„èŠ‚ç‚¹ï¼Œé‚£ä¹ˆé“¾è¡¨é¦–éƒ¨å°±æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterNodeAccess</span><span class="hljs-params">(Node&lt;K,V&gt; e)</span> </span>&#123; <span class="hljs-comment">// move node to last</span>    LinkedHashMap.Entry&lt;K,V&gt; last;    <span class="hljs-keyword">if</span> (accessOrder &amp;&amp; (last = tail) != e) &#123;        LinkedHashMap.Entry&lt;K,V&gt; p =            (LinkedHashMap.Entry&lt;K,V&gt;)e, b = p.before, a = p.after;        p.after = <span class="hljs-keyword">null</span>;        <span class="hljs-keyword">if</span> (b == <span class="hljs-keyword">null</span>)            head = a;        <span class="hljs-keyword">else</span>            b.after = a;        <span class="hljs-keyword">if</span> (a != <span class="hljs-keyword">null</span>)            a.before = b;        <span class="hljs-keyword">else</span>            last = b;        <span class="hljs-keyword">if</span> (last == <span class="hljs-keyword">null</span>)            head = p;        <span class="hljs-keyword">else</span> &#123;            p.before = last;            last.after = p;        &#125;        tail = p;        ++modCount;    &#125;&#125;</code></pre></div><h4 id="afterNodeInsertion">afterNodeInsertion()</h4><p>åœ¨ put ç­‰æ“ä½œä¹‹åæ‰§è¡Œï¼Œå½“ removeEldestEntry() æ–¹æ³•è¿”å› true æ—¶ä¼šç§»é™¤æœ€æ™šçš„èŠ‚ç‚¹ï¼Œä¹Ÿå°±æ˜¯é“¾è¡¨é¦–éƒ¨èŠ‚ç‚¹ firstã€‚</p><p>evict åªæœ‰åœ¨æ„å»º Map çš„æ—¶å€™æ‰ä¸º falseï¼Œåœ¨è¿™é‡Œä¸º trueã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">afterNodeInsertion</span><span class="hljs-params">(<span class="hljs-keyword">boolean</span> evict)</span> </span>&#123; <span class="hljs-comment">// possibly remove eldest</span>    LinkedHashMap.Entry&lt;K,V&gt; first;    <span class="hljs-keyword">if</span> (evict &amp;&amp; (first = head) != <span class="hljs-keyword">null</span> &amp;&amp; removeEldestEntry(first)) &#123;        K key = first.key;        removeNode(hash(key), key, <span class="hljs-keyword">null</span>, <span class="hljs-keyword">false</span>, <span class="hljs-keyword">true</span>);    &#125;&#125;</code></pre></div><p>removeEldestEntry() é»˜è®¤ä¸º falseï¼Œå¦‚æœéœ€è¦è®©å®ƒä¸º trueï¼Œéœ€è¦ç»§æ‰¿ LinkedHashMap å¹¶ä¸”è¦†ç›–è¿™ä¸ªæ–¹æ³•çš„å®ç°ï¼Œè¿™åœ¨å®ç° LRU çš„ç¼“å­˜ä¸­ç‰¹åˆ«æœ‰ç”¨ï¼Œé€šè¿‡ç§»é™¤æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œä»è€Œä¿è¯ç¼“å­˜ç©ºé—´è¶³å¤Ÿï¼Œå¹¶ä¸”ç¼“å­˜çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">removeEldestEntry</span><span class="hljs-params">(Map.Entry&lt;K,V&gt; eldest)</span> </span>&#123;    <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;&#125;</code></pre></div><h4 id="LRU-ç¼“å­˜">LRU ç¼“å­˜</h4><p>ä»¥ä¸‹æ˜¯ä½¿ç”¨ LinkedHashMap å®ç°çš„ä¸€ä¸ª LRU ç¼“å­˜ï¼š</p><ul><li>è®¾å®šæœ€å¤§ç¼“å­˜ç©ºé—´ MAX_ENTRIES  ä¸º 3ï¼›</li><li>ä½¿ç”¨ LinkedHashMap çš„æ„é€ å‡½æ•°å°† accessOrder è®¾ç½®ä¸º trueï¼Œå¼€å¯ LRU é¡ºåºï¼›</li><li>è¦†ç›– removeEldestEntry() æ–¹æ³•å®ç°ï¼Œåœ¨èŠ‚ç‚¹å¤šäº MAX_ENTRIES å°±ä¼šå°†æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ç§»é™¤ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">LRUCache</span>&lt;<span class="hljs-title">K</span>, <span class="hljs-title">V</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">LinkedHashMap</span>&lt;<span class="hljs-title">K</span>, <span class="hljs-title">V</span>&gt; </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> MAX_ENTRIES = <span class="hljs-number">3</span>;    <span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">removeEldestEntry</span><span class="hljs-params">(Map.Entry eldest)</span> </span>&#123;        <span class="hljs-keyword">return</span> size() &gt; MAX_ENTRIES;    &#125;    LRUCache() &#123;        <span class="hljs-keyword">super</span>(MAX_ENTRIES, <span class="hljs-number">0.75f</span>, <span class="hljs-keyword">true</span>);    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    LRUCache&lt;Integer, String&gt; cache = <span class="hljs-keyword">new</span> LRUCache&lt;&gt;();    cache.put(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;a&quot;</span>);    cache.put(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;b&quot;</span>);    cache.put(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;c&quot;</span>);    cache.get(<span class="hljs-number">1</span>);    cache.put(<span class="hljs-number">4</span>, <span class="hljs-string">&quot;d&quot;</span>);    System.out.println(cache.keySet());&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs html">[3, 1, 4]</code></pre></div><h3 id="WeakHashMap">WeakHashMap</h3><h4 id="å­˜å‚¨ç»“æ„-2">å­˜å‚¨ç»“æ„</h4><p>WeakHashMap çš„ Entry ç»§æ‰¿è‡ª WeakReferenceï¼Œè¢« WeakReference å…³è”çš„å¯¹è±¡åœ¨ä¸‹ä¸€æ¬¡åƒåœ¾å›æ”¶æ—¶ä¼šè¢«å›æ”¶ã€‚</p><p>WeakHashMap ä¸»è¦ç”¨æ¥å®ç°ç¼“å­˜ï¼Œé€šè¿‡ä½¿ç”¨ WeakHashMap æ¥å¼•ç”¨ç¼“å­˜å¯¹è±¡ï¼Œç”± JVM å¯¹è¿™éƒ¨åˆ†ç¼“å­˜è¿›è¡Œå›æ”¶ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Entry</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt; <span class="hljs-keyword">extends</span> <span class="hljs-title">WeakReference</span>&lt;<span class="hljs-title">Object</span>&gt; <span class="hljs-keyword">implements</span> <span class="hljs-title">Map</span>.<span class="hljs-title">Entry</span>&lt;<span class="hljs-title">K</span>,<span class="hljs-title">V</span>&gt;</span></code></pre></div><h4 id="ConcurrentCache">ConcurrentCache</h4><p>Tomcat ä¸­çš„ ConcurrentCache ä½¿ç”¨äº† WeakHashMap æ¥å®ç°ç¼“å­˜åŠŸèƒ½ã€‚</p><p>ConcurrentCache é‡‡å–çš„æ˜¯åˆ†ä»£ç¼“å­˜ï¼š</p><ul><li>ç»å¸¸ä½¿ç”¨çš„å¯¹è±¡æ”¾å…¥ eden ä¸­ï¼Œeden ä½¿ç”¨ ConcurrentHashMap å®ç°ï¼Œä¸ç”¨æ‹…å¿ƒä¼šè¢«å›æ”¶ï¼ˆä¼Šç”¸å›­ï¼‰ï¼›</li><li>ä¸å¸¸ç”¨çš„å¯¹è±¡æ”¾å…¥ longtermï¼Œlongterm ä½¿ç”¨ WeakHashMap å®ç°ï¼Œè¿™äº›è€å¯¹è±¡ä¼šè¢«åƒåœ¾æ”¶é›†å™¨å›æ”¶ã€‚</li><li>å½“è°ƒç”¨  get() æ–¹æ³•æ—¶ï¼Œä¼šå…ˆä» eden åŒºè·å–ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°çš„è¯å†åˆ° longterm è·å–ï¼Œå½“ä» longterm è·å–åˆ°å°±æŠŠå¯¹è±¡æ”¾å…¥ eden ä¸­ï¼Œä»è€Œä¿è¯ç»å¸¸è¢«è®¿é—®çš„èŠ‚ç‚¹ä¸å®¹æ˜“è¢«å›æ”¶ã€‚</li><li>å½“è°ƒç”¨ put() æ–¹æ³•æ—¶ï¼Œå¦‚æœ eden çš„å¤§å°è¶…è¿‡äº† sizeï¼Œé‚£ä¹ˆå°±å°† eden ä¸­çš„æ‰€æœ‰å¯¹è±¡éƒ½æ”¾å…¥ longterm ä¸­ï¼Œåˆ©ç”¨è™šæ‹Ÿæœºå›æ”¶æ‰ä¸€éƒ¨åˆ†ä¸ç»å¸¸ä½¿ç”¨çš„å¯¹è±¡ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ConcurrentCache</span>&lt;<span class="hljs-title">K</span>, <span class="hljs-title">V</span>&gt; </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> size;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;K, V&gt; eden;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> Map&lt;K, V&gt; longterm;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ConcurrentCache</span><span class="hljs-params">(<span class="hljs-keyword">int</span> size)</span> </span>&#123;        <span class="hljs-keyword">this</span>.size = size;        <span class="hljs-keyword">this</span>.eden = <span class="hljs-keyword">new</span> ConcurrentHashMap&lt;&gt;(size);        <span class="hljs-keyword">this</span>.longterm = <span class="hljs-keyword">new</span> WeakHashMap&lt;&gt;(size);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> V <span class="hljs-title">get</span><span class="hljs-params">(K k)</span> </span>&#123;        V v = <span class="hljs-keyword">this</span>.eden.get(k);        <span class="hljs-keyword">if</span> (v == <span class="hljs-keyword">null</span>) &#123;            v = <span class="hljs-keyword">this</span>.longterm.get(k);            <span class="hljs-keyword">if</span> (v != <span class="hljs-keyword">null</span>)                <span class="hljs-keyword">this</span>.eden.put(k, v);        &#125;        <span class="hljs-keyword">return</span> v;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">put</span><span class="hljs-params">(K k, V v)</span> </span>&#123;        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span>.eden.size() &gt;= size) &#123;            <span class="hljs-keyword">this</span>.longterm.putAll(<span class="hljs-keyword">this</span>.eden);            <span class="hljs-keyword">this</span>.eden.clear();        &#125;        <span class="hljs-keyword">this</span>.eden.put(k, v);    &#125;&#125;</code></pre></div><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ul><li>Eckel B. Java ç¼–ç¨‹æ€æƒ³ [M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2002.</li><li><a href="https://www.w3resource.com/java-tutorial/java-collections.php">Java Collection Framework</a></li><li><a href="https://openhome.cc/Gossip/DesignPattern/IteratorPattern.htm">Iterator æ¨¡å¼</a></li><li><a href="https://tech.meituan.com/java_hashmap.html">Java 8 ç³»åˆ—ä¹‹é‡æ–°è®¤è¯† HashMap</a></li><li><a href="http://javarevisited.blogspot.hk/2010/10/difference-between-hashmap-and.html">What is difference between HashMap and Hashtable in Java?</a></li><li><a href="http://www.zhangchangle.com/2018/02/07/Java%E9%9B%86%E5%90%88%E4%B9%8BHashMap/">Java é›†åˆä¹‹ HashMap</a></li><li><a href="http://www.programering.com/a/MDO3QDNwATM.html">The principle of ConcurrentHashMap analysis</a></li><li><a href="https://www.ibm.com/developerworks/cn/java/java-lo-concurrenthashmap/">æ¢ç´¢ ConcurrentHashMap é«˜å¹¶å‘æ€§çš„å®ç°æœºåˆ¶</a></li><li><a href="https://www.jianshu.com/p/75adf47958a7">HashMap ç›¸å…³é¢è¯•é¢˜åŠå…¶è§£ç­”</a></li><li><a href="http://wiki.jikexueyuan.com/project/java-enhancement/java-thirtysix.html">Java é›†åˆç»†èŠ‚ï¼ˆäºŒï¼‰ï¼šasList çš„ç¼ºé™·</a></li><li><a href="http://javaconceptoftheday.com/java-collection-framework-linkedlist-class/">Java Collection Framework â€“ The LinkedList Class</a></li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>JAVAåŸºç¡€</title>
    <link href="/2021/11/18/JAVA%E5%9F%BA%E7%A1%80/"/>
    <url>/2021/11/18/JAVA%E5%9F%BA%E7%A1%80/</url>
    
    <content type="html"><![CDATA[<h1>Java åŸºç¡€</h1><!-- GFM-TOC --><ul><li><a href="#java-%E5%9F%BA%E7%A1%80">Java åŸºç¡€</a><ul><li><a href="#%E4%B8%80%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">ä¸€ã€æ•°æ®ç±»å‹</a><ul><li><a href="#%E5%9F%BA%E6%9C%AC%E7%B1%BB%E5%9E%8B">åŸºæœ¬ç±»å‹</a></li><li><a href="#%E5%8C%85%E8%A3%85%E7%B1%BB%E5%9E%8B">åŒ…è£…ç±»å‹</a></li><li><a href="#%E7%BC%93%E5%AD%98%E6%B1%A0">ç¼“å­˜æ± </a></li></ul></li><li><a href="#%E4%BA%8Cstring">äºŒã€String</a><ul><li><a href="#%E6%A6%82%E8%A7%88">æ¦‚è§ˆ</a></li><li><a href="#%E4%B8%8D%E5%8F%AF%E5%8F%98%E7%9A%84%E5%A5%BD%E5%A4%84">ä¸å¯å˜çš„å¥½å¤„</a></li><li><a href="#string-stringbuffer-and-stringbuilder">String, StringBuffer and StringBuilder</a></li><li><a href="#string-pool">String Pool</a></li><li><a href="#new-stringabc">new String(â€œabcâ€)</a></li></ul></li><li><a href="#%E4%B8%89%E8%BF%90%E7%AE%97">ä¸‰ã€è¿ç®—</a><ul><li><a href="#%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92">å‚æ•°ä¼ é€’</a></li><li><a href="#float-%E4%B8%8E-double">float ä¸ double</a></li><li><a href="#%E9%9A%90%E5%BC%8F%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2">éšå¼ç±»å‹è½¬æ¢</a></li><li><a href="#switch">switch</a></li></ul></li><li><a href="#%E5%9B%9B%E5%85%B3%E9%94%AE%E5%AD%97">å››ã€å…³é”®å­—</a><ul><li><a href="#final">final</a></li><li><a href="#static">static</a></li></ul></li><li><a href="#%E4%BA%94object-%E9%80%9A%E7%94%A8%E6%96%B9%E6%B3%95">äº”ã€Object é€šç”¨æ–¹æ³•</a><ul><li><a href="#%E6%A6%82%E8%A7%88">æ¦‚è§ˆ</a></li><li><a href="#equals">equals()</a></li><li><a href="#hashcode">hashCode()</a></li><li><a href="#tostring">toString()</a></li><li><a href="#clone">clone()</a></li></ul></li><li><a href="#%E5%85%AD%E7%BB%A7%E6%89%BF">å…­ã€ç»§æ‰¿</a><ul><li><a href="#%E8%AE%BF%E9%97%AE%E6%9D%83%E9%99%90">è®¿é—®æƒé™</a></li><li><a href="#%E6%8A%BD%E8%B1%A1%E7%B1%BB%E4%B8%8E%E6%8E%A5%E5%8F%A3">æŠ½è±¡ç±»ä¸æ¥å£</a></li><li><a href="#super">super</a></li><li><a href="#%E9%87%8D%E5%86%99%E4%B8%8E%E9%87%8D%E8%BD%BD">é‡å†™ä¸é‡è½½</a></li></ul></li><li><a href="#%E4%B8%83%E5%8F%8D%E5%B0%84">ä¸ƒã€åå°„</a></li><li><a href="#%E5%85%AB%E5%BC%82%E5%B8%B8">å…«ã€å¼‚å¸¸</a></li><li><a href="#%E4%B9%9D%E6%B3%9B%E5%9E%8B">ä¹ã€æ³›å‹</a></li><li><a href="#%E5%8D%81%E6%B3%A8%E8%A7%A3">åã€æ³¨è§£</a></li><li><a href="#%E5%8D%81%E4%B8%80%E7%89%B9%E6%80%A7">åä¸€ã€ç‰¹æ€§</a><ul><li><a href="#java-%E5%90%84%E7%89%88%E6%9C%AC%E7%9A%84%E6%96%B0%E7%89%B9%E6%80%A7">Java å„ç‰ˆæœ¬çš„æ–°ç‰¹æ€§</a></li><li><a href="#java-%E4%B8%8E-c-%E7%9A%84%E5%8C%BA%E5%88%AB">Java ä¸ C++ çš„åŒºåˆ«</a></li><li><a href="#jre-or-jdk">JRE or JDK</a></li></ul></li><li><a href="#%E5%8F%82%E8%80%83%E8%B5%84%E6%96%99">å‚è€ƒèµ„æ–™</a><!-- GFM-TOC --></li></ul></li></ul><h2 id="ä¸€ã€æ•°æ®ç±»å‹">ä¸€ã€æ•°æ®ç±»å‹</h2><h3 id="åŸºæœ¬ç±»å‹">åŸºæœ¬ç±»å‹</h3><ul><li>byte/8</li><li>char/16</li><li>short/16</li><li>int/32</li><li>float/32</li><li>long/64</li><li>double/64</li><li>boolean/~</li></ul><p>boolean åªæœ‰ä¸¤ä¸ªå€¼ï¼štrueã€falseï¼Œå¯ä»¥ä½¿ç”¨ 1 bit æ¥å­˜å‚¨ï¼Œä½†æ˜¯å…·ä½“å¤§å°æ²¡æœ‰æ˜ç¡®è§„å®šã€‚JVM ä¼šåœ¨ç¼–è¯‘æ—¶æœŸå°† boolean ç±»å‹çš„æ•°æ®è½¬æ¢ä¸º intï¼Œä½¿ç”¨ 1 æ¥è¡¨ç¤º trueï¼Œ0 è¡¨ç¤º falseã€‚JVM æ”¯æŒ boolean æ•°ç»„ï¼Œä½†æ˜¯æ˜¯é€šè¿‡è¯»å†™ byte æ•°ç»„æ¥å®ç°çš„ã€‚</p><ul><li><a href="https://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html">Primitive Data Types</a></li><li><a href="https://docs.oracle.com/javase/specs/jvms/se8/jvms8.pdf">The JavaÂ® Virtual Machine Specification</a></li></ul><h3 id="åŒ…è£…ç±»å‹">åŒ…è£…ç±»å‹</h3><p>åŸºæœ¬ç±»å‹éƒ½æœ‰å¯¹åº”çš„åŒ…è£…ç±»å‹ï¼ŒåŸºæœ¬ç±»å‹ä¸å…¶å¯¹åº”çš„åŒ…è£…ç±»å‹ä¹‹é—´çš„èµ‹å€¼ä½¿ç”¨è‡ªåŠ¨è£…ç®±ä¸æ‹†ç®±å®Œæˆã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">Integer x = <span class="hljs-number">2</span>;     <span class="hljs-comment">// è£…ç®± è°ƒç”¨äº† Integer.valueOf(2)</span><span class="hljs-keyword">int</span> y = x;         <span class="hljs-comment">// æ‹†ç®± è°ƒç”¨äº† X.intValue()</span></code></pre></div><ul><li><a href="https://docs.oracle.com/javase/tutorial/java/data/autoboxing.html">Autoboxing and Unboxing</a></li></ul><h3 id="ç¼“å­˜æ± ">ç¼“å­˜æ± </h3><p>new Integer(123) ä¸ Integer.valueOf(123) çš„åŒºåˆ«åœ¨äºï¼š</p><ul><li>new Integer(123) æ¯æ¬¡éƒ½ä¼šæ–°å»ºä¸€ä¸ªå¯¹è±¡ï¼›</li><li>Integer.valueOf(123) ä¼šä½¿ç”¨ç¼“å­˜æ± ä¸­çš„å¯¹è±¡ï¼Œå¤šæ¬¡è°ƒç”¨ä¼šå–å¾—åŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java">Integer x = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">123</span>);Integer y = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">123</span>);System.out.println(x == y);    <span class="hljs-comment">// false</span>Integer z = Integer.valueOf(<span class="hljs-number">123</span>);Integer k = Integer.valueOf(<span class="hljs-number">123</span>);System.out.println(z == k);   <span class="hljs-comment">// true</span></code></pre></div><p>valueOf() æ–¹æ³•çš„å®ç°æ¯”è¾ƒç®€å•ï¼Œå°±æ˜¯å…ˆåˆ¤æ–­å€¼æ˜¯å¦åœ¨ç¼“å­˜æ± ä¸­ï¼Œå¦‚æœåœ¨çš„è¯å°±ç›´æ¥è¿”å›ç¼“å­˜æ± çš„å†…å®¹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> Integer <span class="hljs-title">valueOf</span><span class="hljs-params">(<span class="hljs-keyword">int</span> i)</span> </span>&#123;    <span class="hljs-keyword">if</span> (i &gt;= IntegerCache.low &amp;&amp; i &lt;= IntegerCache.high)        <span class="hljs-keyword">return</span> IntegerCache.cache[i + (-IntegerCache.low)];    <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> Integer(i);&#125;</code></pre></div><p>åœ¨ Java 8 ä¸­ï¼ŒInteger ç¼“å­˜æ± çš„å¤§å°é»˜è®¤ä¸º -128~127ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> low = -<span class="hljs-number">128</span>;<span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> high;<span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> Integer cache[];<span class="hljs-keyword">static</span> &#123;    <span class="hljs-comment">// high value may be configured by property</span>    <span class="hljs-keyword">int</span> h = <span class="hljs-number">127</span>;    String integerCacheHighPropValue =        sun.misc.VM.getSavedProperty(<span class="hljs-string">&quot;java.lang.Integer.IntegerCache.high&quot;</span>);    <span class="hljs-keyword">if</span> (integerCacheHighPropValue != <span class="hljs-keyword">null</span>) &#123;        <span class="hljs-keyword">try</span> &#123;            <span class="hljs-keyword">int</span> i = parseInt(integerCacheHighPropValue);            i = Math.max(i, <span class="hljs-number">127</span>);            <span class="hljs-comment">// Maximum array size is Integer.MAX_VALUE</span>            h = Math.min(i, Integer.MAX_VALUE - (-low) -<span class="hljs-number">1</span>);        &#125; <span class="hljs-keyword">catch</span>( NumberFormatException nfe) &#123;            <span class="hljs-comment">// If the property cannot be parsed into an int, ignore it.</span>        &#125;    &#125;    high = h;    cache = <span class="hljs-keyword">new</span> Integer[(high - low) + <span class="hljs-number">1</span>];    <span class="hljs-keyword">int</span> j = low;    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">int</span> k = <span class="hljs-number">0</span>; k &lt; cache.length; k++)        cache[k] = <span class="hljs-keyword">new</span> Integer(j++);    <span class="hljs-comment">// range [-128, 127] must be interned (JLS7 5.1.7)</span>    <span class="hljs-keyword">assert</span> IntegerCache.high &gt;= <span class="hljs-number">127</span>;&#125;</code></pre></div><p>ç¼–è¯‘å™¨ä¼šåœ¨è‡ªåŠ¨è£…ç®±è¿‡ç¨‹è°ƒç”¨ valueOf() æ–¹æ³•ï¼Œå› æ­¤å¤šä¸ªå€¼ç›¸åŒä¸”å€¼åœ¨ç¼“å­˜æ± èŒƒå›´å†…çš„ Integer å®ä¾‹ä½¿ç”¨è‡ªåŠ¨è£…ç®±æ¥åˆ›å»ºï¼Œé‚£ä¹ˆå°±ä¼šå¼•ç”¨ç›¸åŒçš„å¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">Integer m = <span class="hljs-number">123</span>;Integer n = <span class="hljs-number">123</span>;System.out.println(m == n); <span class="hljs-comment">// true</span></code></pre></div><p>åŸºæœ¬ç±»å‹å¯¹åº”çš„ç¼“å†²æ± å¦‚ä¸‹ï¼š</p><ul><li>boolean values true and false</li><li>all byte values</li><li>short values between -128 and 127</li><li>int values between -128 and 127</li><li>char in the range \u0000 to \u007F</li></ul><p>åœ¨ä½¿ç”¨è¿™äº›åŸºæœ¬ç±»å‹å¯¹åº”çš„åŒ…è£…ç±»å‹æ—¶ï¼Œå¦‚æœè¯¥æ•°å€¼èŒƒå›´åœ¨ç¼“å†²æ± èŒƒå›´å†…ï¼Œå°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å†²æ± ä¸­çš„å¯¹è±¡ã€‚</p><p>åœ¨ jdk 1.8 æ‰€æœ‰çš„æ•°å€¼ç±»ç¼“å†²æ± ä¸­ï¼ŒInteger çš„ç¼“å†²æ±  IntegerCache å¾ˆç‰¹æ®Šï¼Œè¿™ä¸ªç¼“å†²æ± çš„ä¸‹ç•Œæ˜¯ - 128ï¼Œä¸Šç•Œé»˜è®¤æ˜¯ 127ï¼Œä½†æ˜¯è¿™ä¸ªä¸Šç•Œæ˜¯å¯è°ƒçš„ï¼Œåœ¨å¯åŠ¨ jvm çš„æ—¶å€™ï¼Œé€šè¿‡ -XX:AutoBoxCacheMax=&lt;size&gt; æ¥æŒ‡å®šè¿™ä¸ªç¼“å†²æ± çš„å¤§å°ï¼Œè¯¥é€‰é¡¹åœ¨ JVM åˆå§‹åŒ–çš„æ—¶å€™ä¼šè®¾å®šä¸€ä¸ªåä¸º java.lang.IntegerCache.high ç³»ç»Ÿå±æ€§ï¼Œç„¶å IntegerCache åˆå§‹åŒ–çš„æ—¶å€™å°±ä¼šè¯»å–è¯¥ç³»ç»Ÿå±æ€§æ¥å†³å®šä¸Šç•Œã€‚</p><p>[StackOverflow : Differences between new Integer(123), Integer.valueOf(123) and just 123</p><p>](<a href="https://stackoverflow.com/questions/9030817/differences-between-new-integer123-integer-valueof123-and-just-123">https://stackoverflow.com/questions/9030817/differences-between-new-integer123-integer-valueof123-and-just-123</a>)</p><h2 id="äºŒã€String">äºŒã€String</h2><h3 id="æ¦‚è§ˆ">æ¦‚è§ˆ</h3><p>String è¢«å£°æ˜ä¸º finalï¼Œå› æ­¤å®ƒä¸å¯è¢«ç»§æ‰¿ã€‚(Integer ç­‰åŒ…è£…ç±»ä¹Ÿä¸èƒ½è¢«ç»§æ‰¿ï¼‰</p><p>åœ¨ Java 8 ä¸­ï¼ŒString å†…éƒ¨ä½¿ç”¨ char æ•°ç»„å­˜å‚¨æ•°æ®ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">String</span></span><span class="hljs-class">    <span class="hljs-keyword">implements</span> <span class="hljs-title">java</span>.<span class="hljs-title">io</span>.<span class="hljs-title">Serializable</span>, <span class="hljs-title">Comparable</span>&lt;<span class="hljs-title">String</span>&gt;, <span class="hljs-title">CharSequence</span> </span>&#123;    <span class="hljs-comment">/** The value is used for character storage. */</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">char</span> value[];&#125;</code></pre></div><p>åœ¨ Java 9 ä¹‹åï¼ŒString ç±»çš„å®ç°æ”¹ç”¨ byte æ•°ç»„å­˜å‚¨å­—ç¬¦ä¸²ï¼ŒåŒæ—¶ä½¿ç”¨ <code>coder</code> æ¥æ ‡è¯†ä½¿ç”¨äº†å“ªç§ç¼–ç ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">String</span></span><span class="hljs-class">    <span class="hljs-keyword">implements</span> <span class="hljs-title">java</span>.<span class="hljs-title">io</span>.<span class="hljs-title">Serializable</span>, <span class="hljs-title">Comparable</span>&lt;<span class="hljs-title">String</span>&gt;, <span class="hljs-title">CharSequence</span> </span>&#123;    <span class="hljs-comment">/** The value is used for character storage. */</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">byte</span>[] value;    <span class="hljs-comment">/** The identifier of the encoding used to encode the bytes in &#123;<span class="hljs-doctag">@code</span> value&#125;. */</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">byte</span> coder;&#125;</code></pre></div><p>value æ•°ç»„è¢«å£°æ˜ä¸º finalï¼Œè¿™æ„å‘³ç€ value æ•°ç»„åˆå§‹åŒ–ä¹‹åå°±ä¸èƒ½å†å¼•ç”¨å…¶å®ƒæ•°ç»„ã€‚å¹¶ä¸” String å†…éƒ¨æ²¡æœ‰æ”¹å˜ value æ•°ç»„çš„æ–¹æ³•ï¼Œå› æ­¤å¯ä»¥ä¿è¯ String ä¸å¯å˜ã€‚</p><h3 id="ä¸å¯å˜çš„å¥½å¤„">ä¸å¯å˜çš„å¥½å¤„</h3><p><strong>1. å¯ä»¥ç¼“å­˜ hash å€¼</strong></p><p>å› ä¸º String çš„ hash å€¼ç»å¸¸è¢«ä½¿ç”¨ï¼Œä¾‹å¦‚ String ç”¨åš HashMap çš„ keyã€‚ä¸å¯å˜çš„ç‰¹æ€§å¯ä»¥ä½¿å¾— hash å€¼ä¹Ÿä¸å¯å˜ï¼Œå› æ­¤åªéœ€è¦è¿›è¡Œä¸€æ¬¡è®¡ç®—ã€‚</p><p><strong>2. String Pool çš„éœ€è¦</strong></p><p>å¦‚æœä¸€ä¸ª String å¯¹è±¡å·²ç»è¢«åˆ›å»ºè¿‡äº†ï¼Œé‚£ä¹ˆå°±ä¼šä» String Pool ä¸­å–å¾—å¼•ç”¨ã€‚åªæœ‰ String æ˜¯ä¸å¯å˜çš„ï¼Œæ‰å¯èƒ½ä½¿ç”¨ String Poolã€‚</p><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/image-20191210004132894.png"/> </div><br><p><strong>3. å®‰å…¨æ€§</strong></p><p>String ç»å¸¸ä½œä¸ºå‚æ•°ï¼ŒString ä¸å¯å˜æ€§å¯ä»¥ä¿è¯å‚æ•°ä¸å¯å˜ã€‚ä¾‹å¦‚åœ¨ä½œä¸ºç½‘ç»œè¿æ¥å‚æ•°çš„æƒ…å†µä¸‹å¦‚æœ String æ˜¯å¯å˜çš„ï¼Œé‚£ä¹ˆåœ¨ç½‘ç»œè¿æ¥è¿‡ç¨‹ä¸­ï¼ŒString è¢«æ”¹å˜ï¼Œæ”¹å˜ String çš„é‚£ä¸€æ–¹ä»¥ä¸ºç°åœ¨è¿æ¥çš„æ˜¯å…¶å®ƒä¸»æœºï¼Œè€Œå®é™…æƒ…å†µå´ä¸ä¸€å®šæ˜¯ã€‚</p><p><strong>4. çº¿ç¨‹å®‰å…¨</strong></p><p>String ä¸å¯å˜æ€§å¤©ç”Ÿå…·å¤‡çº¿ç¨‹å®‰å…¨ï¼Œå¯ä»¥åœ¨å¤šä¸ªçº¿ç¨‹ä¸­å®‰å…¨åœ°ä½¿ç”¨ã€‚</p><p><a href="https://www.programcreek.com/2013/04/why-string-is-immutable-in-java/">Program Creek : Why String is immutable in Java?</a></p><h3 id="String-StringBuffer-and-StringBuilder">String, StringBuffer and StringBuilder</h3><p><strong>1. å¯å˜æ€§</strong></p><ul><li>String ä¸å¯å˜</li><li>StringBuffer å’Œ StringBuilder å¯å˜</li></ul><p><strong>2. çº¿ç¨‹å®‰å…¨</strong></p><ul><li>String ä¸å¯å˜ï¼Œå› æ­¤æ˜¯çº¿ç¨‹å®‰å…¨çš„</li><li>StringBuilder ä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„</li><li>StringBuffer æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå†…éƒ¨ä½¿ç”¨ synchronized è¿›è¡ŒåŒæ­¥</li></ul><p><a href="https://stackoverflow.com/questions/2971315/string-stringbuffer-and-stringbuilder">StackOverflow : String, StringBuffer, and StringBuilder</a></p><h3 id="String-Pool">String Pool</h3><p>å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Poolï¼‰ä¿å­˜ç€æ‰€æœ‰å­—ç¬¦ä¸²å­—é¢é‡ï¼ˆliteral stringsï¼‰ï¼Œè¿™äº›å­—é¢é‡åœ¨ç¼–è¯‘æ—¶æœŸå°±ç¡®å®šã€‚ä¸ä»…å¦‚æ­¤ï¼Œè¿˜å¯ä»¥ä½¿ç”¨ String çš„ intern() æ–¹æ³•åœ¨è¿è¡Œè¿‡ç¨‹å°†å­—ç¬¦ä¸²æ·»åŠ åˆ° String Pool ä¸­ã€‚</p><p>å½“ä¸€ä¸ªå­—ç¬¦ä¸²è°ƒç”¨ intern() æ–¹æ³•æ—¶ï¼Œå¦‚æœ String Pool ä¸­å·²ç»å­˜åœ¨ä¸€ä¸ªå­—ç¬¦ä¸²å’Œè¯¥å­—ç¬¦ä¸²å€¼ç›¸ç­‰ï¼ˆä½¿ç”¨ equals() æ–¹æ³•è¿›è¡Œç¡®å®šï¼‰ï¼Œé‚£ä¹ˆå°±ä¼šè¿”å› String Pool ä¸­å­—ç¬¦ä¸²çš„å¼•ç”¨ï¼›å¦åˆ™ï¼Œå°±ä¼šåœ¨ String Pool ä¸­æ·»åŠ ä¸€ä¸ªæ–°çš„å­—ç¬¦ä¸²ï¼Œå¹¶è¿”å›è¿™ä¸ªæ–°å­—ç¬¦ä¸²çš„å¼•ç”¨ã€‚</p><p>ä¸‹é¢ç¤ºä¾‹ä¸­ï¼Œs1 å’Œ s2 é‡‡ç”¨ new String() çš„æ–¹å¼æ–°å»ºäº†ä¸¤ä¸ªä¸åŒå­—ç¬¦ä¸²ï¼Œè€Œ s3 å’Œ s4 æ˜¯é€šè¿‡ s1.intern() å’Œ s2.intern() æ–¹æ³•å–å¾—åŒä¸€ä¸ªå­—ç¬¦ä¸²å¼•ç”¨ã€‚intern() é¦–å…ˆæŠŠ â€œaaaâ€ æ”¾åˆ° String Pool ä¸­ï¼Œç„¶åè¿”å›è¿™ä¸ªå­—ç¬¦ä¸²å¼•ç”¨ï¼Œå› æ­¤ s3 å’Œ s4 å¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå­—ç¬¦ä¸²ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">String s1 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">&quot;aaa&quot;</span>);String s2 = <span class="hljs-keyword">new</span> String(<span class="hljs-string">&quot;aaa&quot;</span>);System.out.println(s1 == s2);           <span class="hljs-comment">// false</span>String s3 = s1.intern();String s4 = s2.intern();System.out.println(s3 == s4);           <span class="hljs-comment">// true</span></code></pre></div><p>å¦‚æœæ˜¯é‡‡ç”¨ â€œbbbâ€ è¿™ç§å­—é¢é‡çš„å½¢å¼åˆ›å»ºå­—ç¬¦ä¸²ï¼Œä¼šè‡ªåŠ¨åœ°å°†å­—ç¬¦ä¸²æ”¾å…¥ String Pool ä¸­ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">String s5 = <span class="hljs-string">&quot;bbb&quot;</span>;String s6 = <span class="hljs-string">&quot;bbb&quot;</span>;System.out.println(s5 == s6);  <span class="hljs-comment">// true</span></code></pre></div><p>åœ¨ Java 7 ä¹‹å‰ï¼ŒString Pool è¢«æ”¾åœ¨è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ï¼Œå®ƒå±äºæ°¸ä¹…ä»£ã€‚è€Œåœ¨ Java 7ï¼ŒString Pool è¢«ç§»åˆ°å †ä¸­ã€‚è¿™æ˜¯å› ä¸ºæ°¸ä¹…ä»£çš„ç©ºé—´æœ‰é™ï¼Œåœ¨å¤§é‡ä½¿ç”¨å­—ç¬¦ä¸²çš„åœºæ™¯ä¸‹ä¼šå¯¼è‡´ OutOfMemoryError é”™è¯¯ã€‚</p><ul><li><a href="https://stackoverflow.com/questions/10578984/what-is-string-interning">StackOverflow : What is String interning?</a></li><li><a href="https://tech.meituan.com/in_depth_understanding_string_intern.html">æ·±å…¥è§£æ String#intern</a></li></ul><h3 id="new-String-â€œabcâ€">new String(â€œabcâ€)</h3><p>ä½¿ç”¨è¿™ç§æ–¹å¼ä¸€å…±ä¼šåˆ›å»ºä¸¤ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼ˆå‰ææ˜¯ String Pool ä¸­è¿˜æ²¡æœ‰ â€œabcâ€ å­—ç¬¦ä¸²å¯¹è±¡ï¼‰ã€‚</p><ul><li>â€œabcâ€ å±äºå­—ç¬¦ä¸²å­—é¢é‡ï¼Œå› æ­¤ç¼–è¯‘æ—¶æœŸä¼šåœ¨ String Pool ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼ŒæŒ‡å‘è¿™ä¸ª â€œabcâ€ å­—ç¬¦ä¸²å­—é¢é‡ï¼›</li><li>è€Œä½¿ç”¨ new çš„æ–¹å¼ä¼šåœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ã€‚</li></ul><p>åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç±»ï¼Œå…¶ main æ–¹æ³•ä¸­ä½¿ç”¨è¿™ç§æ–¹å¼æ¥åˆ›å»ºå­—ç¬¦ä¸²å¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">NewStringTest</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        String s = <span class="hljs-keyword">new</span> String(<span class="hljs-string">&quot;abc&quot;</span>);    &#125;&#125;</code></pre></div><p>ä½¿ç”¨ javap -verbose è¿›è¡Œåç¼–è¯‘ï¼Œå¾—åˆ°ä»¥ä¸‹å†…å®¹ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// ...</span>Constant pool:<span class="hljs-comment">// ...</span>   #<span class="hljs-number">2</span> = Class              #<span class="hljs-number">18</span>            <span class="hljs-comment">// java/lang/String</span>   #<span class="hljs-number">3</span> = String             #<span class="hljs-number">19</span>            <span class="hljs-comment">// abc</span><span class="hljs-comment">// ...</span>  #<span class="hljs-number">18</span> = Utf8               java/lang/String  #<span class="hljs-number">19</span> = Utf8               abc<span class="hljs-comment">// ...</span>  <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(java.lang.String[])</span></span>;    descriptor: ([Ljava/lang/String;)V    flags: ACC_PUBLIC, ACC_STATIC    Code:      stack=<span class="hljs-number">3</span>, locals=<span class="hljs-number">2</span>, args_size=<span class="hljs-number">1</span>         <span class="hljs-number">0</span>: <span class="hljs-keyword">new</span>           #<span class="hljs-number">2</span>                  <span class="hljs-comment">// class java/lang/String</span>         <span class="hljs-number">3</span>: dup         <span class="hljs-number">4</span>: ldc           #<span class="hljs-number">3</span>                  <span class="hljs-comment">// String abc</span>         <span class="hljs-number">6</span>: invokespecial #<span class="hljs-number">4</span>                  <span class="hljs-comment">// Method java/lang/String.&quot;&lt;init&gt;&quot;:(Ljava/lang/String;)V</span>         <span class="hljs-number">9</span>: astore_1<span class="hljs-comment">// ...</span></code></pre></div><p>åœ¨ Constant Pool ä¸­ï¼Œ#19 å­˜å‚¨è¿™å­—ç¬¦ä¸²å­—é¢é‡ â€œabcâ€ï¼Œ#3 æ˜¯ String Pool çš„å­—ç¬¦ä¸²å¯¹è±¡ï¼Œå®ƒæŒ‡å‘ #19 è¿™ä¸ªå­—ç¬¦ä¸²å­—é¢é‡ã€‚åœ¨ main æ–¹æ³•ä¸­ï¼Œ0: è¡Œä½¿ç”¨ new #2 åœ¨å †ä¸­åˆ›å»ºä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ï¼Œå¹¶ä¸”ä½¿ç”¨ ldc #3 å°† String Pool ä¸­çš„å­—ç¬¦ä¸²å¯¹è±¡ä½œä¸º String æ„é€ å‡½æ•°çš„å‚æ•°ã€‚</p><p>ä»¥ä¸‹æ˜¯ String æ„é€ å‡½æ•°çš„æºç ï¼Œå¯ä»¥çœ‹åˆ°ï¼Œåœ¨å°†ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡ä½œä¸ºå¦ä¸€ä¸ªå­—ç¬¦ä¸²å¯¹è±¡çš„æ„é€ å‡½æ•°å‚æ•°æ—¶ï¼Œå¹¶ä¸ä¼šå®Œå…¨å¤åˆ¶ value æ•°ç»„å†…å®¹ï¼Œè€Œæ˜¯éƒ½ä¼šæŒ‡å‘åŒä¸€ä¸ª value æ•°ç»„ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">String</span><span class="hljs-params">(String original)</span> </span>&#123;    <span class="hljs-keyword">this</span>.value = original.value;    <span class="hljs-keyword">this</span>.hash = original.hash;&#125;</code></pre></div><h2 id="ä¸‰ã€è¿ç®—">ä¸‰ã€è¿ç®—</h2><h3 id="å‚æ•°ä¼ é€’">å‚æ•°ä¼ é€’</h3><p>Java çš„å‚æ•°æ˜¯ä»¥å€¼ä¼ é€’çš„å½¢å¼ä¼ å…¥æ–¹æ³•ä¸­ï¼Œè€Œä¸æ˜¯å¼•ç”¨ä¼ é€’ã€‚</p><p>ä»¥ä¸‹ä»£ç ä¸­ Dog dog çš„ dog æ˜¯ä¸€ä¸ªæŒ‡é’ˆï¼Œå­˜å‚¨çš„æ˜¯å¯¹è±¡çš„åœ°å€ã€‚åœ¨å°†ä¸€ä¸ªå‚æ•°ä¼ å…¥ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œæœ¬è´¨ä¸Šæ˜¯å°†å¯¹è±¡çš„åœ°å€ä»¥å€¼çš„æ–¹å¼ä¼ é€’åˆ°å½¢å‚ä¸­ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Dog</span> </span>&#123;    String name;    Dog(String name) &#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function">String <span class="hljs-title">getName</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">this</span>.name;    &#125;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">setName</span><span class="hljs-params">(String name)</span> </span>&#123;        <span class="hljs-keyword">this</span>.name = name;    &#125;    <span class="hljs-function">String <span class="hljs-title">getObjectAddress</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.toString();    &#125;&#125;</code></pre></div><p>åœ¨æ–¹æ³•ä¸­æ”¹å˜å¯¹è±¡çš„å­—æ®µå€¼ä¼šæ”¹å˜åŸå¯¹è±¡è¯¥å­—æ®µå€¼ï¼Œå› ä¸ºå¼•ç”¨çš„æ˜¯åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PassByValueExample</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        Dog dog = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;A&quot;</span>);        func(dog);        System.out.println(dog.getName());          <span class="hljs-comment">// B</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(Dog dog)</span> </span>&#123;        dog.setName(<span class="hljs-string">&quot;B&quot;</span>);    &#125;&#125;</code></pre></div><p>ä½†æ˜¯åœ¨æ–¹æ³•ä¸­å°†æŒ‡é’ˆå¼•ç”¨äº†å…¶å®ƒå¯¹è±¡ï¼Œé‚£ä¹ˆæ­¤æ—¶æ–¹æ³•é‡Œå’Œæ–¹æ³•å¤–çš„ä¸¤ä¸ªæŒ‡é’ˆæŒ‡å‘äº†ä¸åŒçš„å¯¹è±¡ï¼Œåœ¨ä¸€ä¸ªæŒ‡é’ˆæ”¹å˜å…¶æ‰€æŒ‡å‘å¯¹è±¡çš„å†…å®¹å¯¹å¦ä¸€ä¸ªæŒ‡é’ˆæ‰€æŒ‡å‘çš„å¯¹è±¡æ²¡æœ‰å½±å“ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">PassByValueExample</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        Dog dog = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;A&quot;</span>);        System.out.println(dog.getObjectAddress()); <span class="hljs-comment">// Dog@4554617c</span>        func(dog);        System.out.println(dog.getObjectAddress()); <span class="hljs-comment">// Dog@4554617c</span>        System.out.println(dog.getName());          <span class="hljs-comment">// A</span>    &#125;    <span class="hljs-function"><span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">(Dog dog)</span> </span>&#123;        System.out.println(dog.getObjectAddress()); <span class="hljs-comment">// Dog@4554617c</span>        dog = <span class="hljs-keyword">new</span> Dog(<span class="hljs-string">&quot;B&quot;</span>);        System.out.println(dog.getObjectAddress()); <span class="hljs-comment">// Dog@74a14482</span>        System.out.println(dog.getName());          <span class="hljs-comment">// B</span>    &#125;&#125;</code></pre></div><p><a href="https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value">StackOverflow: Is Java â€œpass-by-referenceâ€ or â€œpass-by-valueâ€?</a></p><h3 id="float-ä¸-double">float ä¸ double</h3><p>Java ä¸èƒ½éšå¼æ‰§è¡Œå‘ä¸‹è½¬å‹ï¼Œå› ä¸ºè¿™ä¼šä½¿å¾—ç²¾åº¦é™ä½ã€‚</p><p>1.1 å­—é¢é‡å±äº double ç±»å‹ï¼Œä¸èƒ½ç›´æ¥å°† 1.1 ç›´æ¥èµ‹å€¼ç»™ float å˜é‡ï¼Œå› ä¸ºè¿™æ˜¯å‘ä¸‹è½¬å‹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// float f = 1.1;</span></code></pre></div><p>1.1f å­—é¢é‡æ‰æ˜¯ float ç±»å‹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">float</span> f = <span class="hljs-number">1.1f</span>;</code></pre></div><h3 id="éšå¼ç±»å‹è½¬æ¢">éšå¼ç±»å‹è½¬æ¢</h3><p>å› ä¸ºå­—é¢é‡ 1 æ˜¯ int ç±»å‹ï¼Œå®ƒæ¯” short ç±»å‹ç²¾åº¦è¦é«˜ï¼Œå› æ­¤ä¸èƒ½éšå¼åœ°å°† int ç±»å‹å‘ä¸‹è½¬å‹ä¸º short ç±»å‹ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">short</span> s1 = <span class="hljs-number">1</span>;<span class="hljs-comment">// s1 = s1 + 1;</span></code></pre></div><p>ä½†æ˜¯ä½¿ç”¨ += æˆ–è€… ++ è¿ç®—ç¬¦ä¼šæ‰§è¡Œéšå¼ç±»å‹è½¬æ¢ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">s1 += <span class="hljs-number">1</span>;s1++;</code></pre></div><p>ä¸Šé¢çš„è¯­å¥ç›¸å½“äºå°† s1 + 1 çš„è®¡ç®—ç»“æœè¿›è¡Œäº†å‘ä¸‹è½¬å‹ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs java">s1 = (<span class="hljs-keyword">short</span>) (s1 + <span class="hljs-number">1</span>);</code></pre></div><p><a href="https://stackoverflow.com/questions/8710619/why-dont-javas-compound-assignment-operators-require-casting">StackOverflow : Why donâ€™t Javaâ€™s +=, -=, *=, /= compound assignment operators require casting?</a></p><h3 id="switch">switch</h3><p>ä» Java 7 å¼€å§‹ï¼Œå¯ä»¥åœ¨ switch æ¡ä»¶åˆ¤æ–­è¯­å¥ä¸­ä½¿ç”¨ String å¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">String s = <span class="hljs-string">&quot;a&quot;</span>;<span class="hljs-keyword">switch</span> (s) &#123;    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;a&quot;</span>:        System.out.println(<span class="hljs-string">&quot;aaa&quot;</span>);        <span class="hljs-keyword">break</span>;    <span class="hljs-keyword">case</span> <span class="hljs-string">&quot;b&quot;</span>:        System.out.println(<span class="hljs-string">&quot;bbb&quot;</span>);        <span class="hljs-keyword">break</span>;&#125;</code></pre></div><p>switch ä¸æ”¯æŒ longã€floatã€doubleï¼Œæ˜¯å› ä¸º switch çš„è®¾è®¡åˆè¡·æ˜¯å¯¹é‚£äº›åªæœ‰å°‘æ•°å‡ ä¸ªå€¼çš„ç±»å‹è¿›è¡Œç­‰å€¼åˆ¤æ–­ï¼Œå¦‚æœå€¼è¿‡äºå¤æ‚ï¼Œé‚£ä¹ˆè¿˜æ˜¯ç”¨ if æ¯”è¾ƒåˆé€‚ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// long x = 111;</span><span class="hljs-comment">// switch (x) &#123; // Incompatible types. Found: &#x27;long&#x27;, required: &#x27;char, byte, short, int, Character, Byte, Short, Integer, String, or an enum&#x27;</span><span class="hljs-comment">//     case 111:</span><span class="hljs-comment">//         System.out.println(111);</span><span class="hljs-comment">//         break;</span><span class="hljs-comment">//     case 222:</span><span class="hljs-comment">//         System.out.println(222);</span><span class="hljs-comment">//         break;</span><span class="hljs-comment">// &#125;</span></code></pre></div><p><a href="https://stackoverflow.com/questions/2676210/why-cant-your-switch-statement-data-type-be-long-java">StackOverflow : Why canâ€™t your switch statement data type be long, Java?</a></p><h2 id="å››ã€å…³é”®å­—">å››ã€å…³é”®å­—</h2><h3 id="final">final</h3><p><strong>1. æ•°æ®</strong></p><p>å£°æ˜æ•°æ®ä¸ºå¸¸é‡ï¼Œå¯ä»¥æ˜¯ç¼–è¯‘æ—¶å¸¸é‡ï¼Œä¹Ÿå¯ä»¥æ˜¯åœ¨è¿è¡Œæ—¶è¢«åˆå§‹åŒ–åä¸èƒ½è¢«æ”¹å˜çš„å¸¸é‡ã€‚</p><ul><li>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œfinal ä½¿æ•°å€¼ä¸å˜ï¼›</li><li>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œfinal ä½¿å¼•ç”¨ä¸å˜ï¼Œä¹Ÿå°±ä¸èƒ½å¼•ç”¨å…¶å®ƒå¯¹è±¡ï¼Œä½†æ˜¯è¢«å¼•ç”¨çš„å¯¹è±¡æœ¬èº«æ˜¯å¯ä»¥ä¿®æ”¹çš„ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">final</span> <span class="hljs-keyword">int</span> x = <span class="hljs-number">1</span>;<span class="hljs-comment">// x = 2;  // cannot assign value to final variable &#x27;x&#x27;</span><span class="hljs-keyword">final</span> A y = <span class="hljs-keyword">new</span> A();y.a = <span class="hljs-number">1</span>;</code></pre></div><p><strong>2. æ–¹æ³•</strong></p><p>å£°æ˜æ–¹æ³•ä¸èƒ½è¢«å­ç±»é‡å†™ã€‚</p><p>private æ–¹æ³•éšå¼åœ°è¢«æŒ‡å®šä¸º finalï¼Œå¦‚æœåœ¨å­ç±»ä¸­å®šä¹‰çš„æ–¹æ³•å’ŒåŸºç±»ä¸­çš„ä¸€ä¸ª private æ–¹æ³•ç­¾åç›¸åŒï¼Œæ­¤æ—¶å­ç±»çš„æ–¹æ³•ä¸æ˜¯é‡å†™åŸºç±»æ–¹æ³•ï¼Œè€Œæ˜¯åœ¨å­ç±»ä¸­å®šä¹‰äº†ä¸€ä¸ªæ–°çš„æ–¹æ³•ã€‚</p><p><strong>3. ç±»</strong></p><p>å£°æ˜ç±»ä¸å…è®¸è¢«ç»§æ‰¿ã€‚</p><h3 id="static">static</h3><p><strong>1. é™æ€å˜é‡</strong></p><ul><li>é™æ€å˜é‡ï¼šåˆç§°ä¸ºç±»å˜é‡ï¼Œä¹Ÿå°±æ˜¯è¯´è¿™ä¸ªå˜é‡å±äºç±»çš„ï¼Œç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å…±äº«é™æ€å˜é‡ï¼Œå¯ä»¥ç›´æ¥é€šè¿‡ç±»åæ¥è®¿é—®å®ƒã€‚é™æ€å˜é‡åœ¨å†…å­˜ä¸­åªå­˜åœ¨ä¸€ä»½ã€‚</li><li>å®ä¾‹å˜é‡ï¼šæ¯åˆ›å»ºä¸€ä¸ªå®ä¾‹å°±ä¼šäº§ç”Ÿä¸€ä¸ªå®ä¾‹å˜é‡ï¼Œå®ƒä¸è¯¥å®ä¾‹åŒç”Ÿå…±æ­»ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> x;         <span class="hljs-comment">// å®ä¾‹å˜é‡</span>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> y;  <span class="hljs-comment">// é™æ€å˜é‡</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        <span class="hljs-comment">// int x = A.x;  // Non-static field &#x27;x&#x27; cannot be referenced from a static context</span>        A a = <span class="hljs-keyword">new</span> A();        <span class="hljs-keyword">int</span> x = a.x;        <span class="hljs-keyword">int</span> y = A.y;    &#125;&#125;</code></pre></div><p><strong>2. é™æ€æ–¹æ³•</strong></p><p>é™æ€æ–¹æ³•åœ¨ç±»åŠ è½½çš„æ—¶å€™å°±å­˜åœ¨äº†ï¼Œå®ƒä¸ä¾èµ–äºä»»ä½•å®ä¾‹ã€‚æ‰€ä»¥é™æ€æ–¹æ³•å¿…é¡»æœ‰å®ç°ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸èƒ½æ˜¯æŠ½è±¡æ–¹æ³•ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span></span>&#123;    &#125;    <span class="hljs-comment">// public abstract static void func2();  // Illegal combination of modifiers: &#x27;abstract&#x27; and &#x27;static&#x27;</span>&#125;</code></pre></div><p>åªèƒ½è®¿é—®æ‰€å±ç±»çš„é™æ€å­—æ®µå’Œé™æ€æ–¹æ³•ï¼Œæ–¹æ³•ä¸­ä¸èƒ½æœ‰ this å’Œ super å…³é”®å­—ï¼Œå› ä¸ºè¿™ä¸¤ä¸ªå…³é”®å­—ä¸å…·ä½“å¯¹è±¡å…³è”ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> x;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> y;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span></span>&#123;        <span class="hljs-keyword">int</span> a = x;        <span class="hljs-comment">// int b = y;  // Non-static field &#x27;y&#x27; cannot be referenced from a static context</span>        <span class="hljs-comment">// int b = this.y;     // &#x27;A.this&#x27; cannot be referenced from a static context</span>    &#125;&#125;</code></pre></div><p><strong>3. é™æ€è¯­å¥å—</strong></p><p>é™æ€è¯­å¥å—åœ¨ç±»åˆå§‹åŒ–æ—¶è¿è¡Œä¸€æ¬¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;    <span class="hljs-keyword">static</span> &#123;        System.out.println(<span class="hljs-string">&quot;123&quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        A a1 = <span class="hljs-keyword">new</span> A();        A a2 = <span class="hljs-keyword">new</span> A();    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs html">123</code></pre></div><p><strong>4. é™æ€å†…éƒ¨ç±»</strong></p><p>éé™æ€å†…éƒ¨ç±»ä¾èµ–äºå¤–éƒ¨ç±»çš„å®ä¾‹ï¼Œä¹Ÿå°±æ˜¯è¯´éœ€è¦å…ˆåˆ›å»ºå¤–éƒ¨ç±»å®ä¾‹ï¼Œæ‰èƒ½ç”¨è¿™ä¸ªå®ä¾‹å»åˆ›å»ºéé™æ€å†…éƒ¨ç±»ã€‚è€Œé™æ€å†…éƒ¨ç±»ä¸éœ€è¦ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OuterClass</span> </span>&#123;    <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InnerClass</span> </span>&#123;    &#125;    <span class="hljs-keyword">static</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">StaticInnerClass</span> </span>&#123;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;        <span class="hljs-comment">// InnerClass innerClass = new InnerClass(); // &#x27;OuterClass.this&#x27; cannot be referenced from a static context</span>        OuterClass outerClass = <span class="hljs-keyword">new</span> OuterClass();        InnerClass innerClass = outerClass.<span class="hljs-function">new <span class="hljs-title">InnerClass</span><span class="hljs-params">()</span></span>;        StaticInnerClass staticInnerClass = <span class="hljs-keyword">new</span> StaticInnerClass();    &#125;&#125;</code></pre></div><p>é™æ€å†…éƒ¨ç±»ä¸èƒ½è®¿é—®å¤–éƒ¨ç±»çš„éé™æ€çš„å˜é‡å’Œæ–¹æ³•ã€‚</p><p><strong>5. é™æ€å¯¼åŒ…</strong></p><p>åœ¨ä½¿ç”¨é™æ€å˜é‡å’Œæ–¹æ³•æ—¶ä¸ç”¨å†æŒ‡æ˜ ClassNameï¼Œä»è€Œç®€åŒ–ä»£ç ï¼Œä½†å¯è¯»æ€§å¤§å¤§é™ä½ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">import</span> <span class="hljs-keyword">static</span> com.xxx.ClassName.*</code></pre></div><p><strong>6. åˆå§‹åŒ–é¡ºåº</strong></p><p>é™æ€å˜é‡å’Œé™æ€è¯­å¥å—ä¼˜å…ˆäºå®ä¾‹å˜é‡å’Œæ™®é€šè¯­å¥å—ï¼Œé™æ€å˜é‡å’Œé™æ€è¯­å¥å—çš„åˆå§‹åŒ–é¡ºåºå–å†³äºå®ƒä»¬åœ¨ä»£ç ä¸­çš„é¡ºåºã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> String staticField = <span class="hljs-string">&quot;é™æ€å˜é‡&quot;</span>;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">static</span> &#123;    System.out.println(<span class="hljs-string">&quot;é™æ€è¯­å¥å—&quot;</span>);&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> String field = <span class="hljs-string">&quot;å®ä¾‹å˜é‡&quot;</span>;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">&#123;    System.out.println(<span class="hljs-string">&quot;æ™®é€šè¯­å¥å—&quot;</span>);&#125;</code></pre></div><p>æœ€åæ‰æ˜¯æ„é€ å‡½æ•°çš„åˆå§‹åŒ–ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">InitialOrderTest</span><span class="hljs-params">()</span> </span>&#123;    System.out.println(<span class="hljs-string">&quot;æ„é€ å‡½æ•°&quot;</span>);&#125;</code></pre></div><p>å­˜åœ¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼Œåˆå§‹åŒ–é¡ºåºä¸ºï¼š</p><ul><li>çˆ¶ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰</li><li>å­ç±»ï¼ˆé™æ€å˜é‡ã€é™æ€è¯­å¥å—ï¼‰</li><li>çˆ¶ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰</li><li>çˆ¶ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰</li><li>å­ç±»ï¼ˆå®ä¾‹å˜é‡ã€æ™®é€šè¯­å¥å—ï¼‰</li><li>å­ç±»ï¼ˆæ„é€ å‡½æ•°ï¼‰</li></ul><h2 id="äº”ã€Object-é€šç”¨æ–¹æ³•">äº”ã€Object é€šç”¨æ–¹æ³•</h2><h3 id="æ¦‚è§ˆ-2">æ¦‚è§ˆ</h3><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span></span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object obj)</span></span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">native</span> Object <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException</span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">toString</span><span class="hljs-params">()</span></span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> Class&lt;?&gt; <span class="hljs-title">getClass</span><span class="hljs-params">()</span></span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">protected</span> <span class="hljs-keyword">void</span> <span class="hljs-title">finalize</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;&#125;<span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notify</span><span class="hljs-params">()</span></span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">notifyAll</span><span class="hljs-params">()</span></span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">native</span> <span class="hljs-keyword">void</span> <span class="hljs-title">wait</span><span class="hljs-params">(<span class="hljs-keyword">long</span> timeout)</span> <span class="hljs-keyword">throws</span> InterruptedException</span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">wait</span><span class="hljs-params">(<span class="hljs-keyword">long</span> timeout, <span class="hljs-keyword">int</span> nanos)</span> <span class="hljs-keyword">throws</span> InterruptedException</span><span class="hljs-function"></span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">final</span> <span class="hljs-keyword">void</span> <span class="hljs-title">wait</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> InterruptedException</span></code></pre></div><h3 id="equals">equals()</h3><p><strong>1. ç­‰ä»·å…³ç³»</strong></p><p>ä¸¤ä¸ªå¯¹è±¡å…·æœ‰ç­‰ä»·å…³ç³»ï¼Œéœ€è¦æ»¡è¶³ä»¥ä¸‹äº”ä¸ªæ¡ä»¶ï¼š</p><p>â…  è‡ªåæ€§</p><div class="hljs code-wrapper"><pre><code class="hljs java">x.equals(x); <span class="hljs-comment">// true</span></code></pre></div><p>â…¡ å¯¹ç§°æ€§</p><div class="hljs code-wrapper"><pre><code class="hljs java">x.equals(y) == y.equals(x); <span class="hljs-comment">// true</span></code></pre></div><p>â…¢ ä¼ é€’æ€§</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">if</span> (x.equals(y) &amp;&amp; y.equals(z))    x.equals(z); <span class="hljs-comment">// true;</span></code></pre></div><p>â…£ ä¸€è‡´æ€§</p><p>å¤šæ¬¡è°ƒç”¨ equals() æ–¹æ³•ç»“æœä¸å˜</p><div class="hljs code-wrapper"><pre><code class="hljs java">x.equals(y) == x.equals(y); <span class="hljs-comment">// true</span></code></pre></div><p>â…¤ ä¸ null çš„æ¯”è¾ƒ</p><p>å¯¹ä»»ä½•ä¸æ˜¯ null çš„å¯¹è±¡ x è°ƒç”¨ x.equals(null) ç»“æœéƒ½ä¸º false</p><div class="hljs code-wrapper"><pre><code class="hljs java">x.equals(<span class="hljs-keyword">null</span>); <span class="hljs-comment">// false;</span></code></pre></div><p><strong>2. ç­‰ä»·ä¸ç›¸ç­‰</strong></p><ul><li>å¯¹äºåŸºæœ¬ç±»å‹ï¼Œ== åˆ¤æ–­ä¸¤ä¸ªå€¼æ˜¯å¦ç›¸ç­‰ï¼ŒåŸºæœ¬ç±»å‹æ²¡æœ‰ equals() æ–¹æ³•ã€‚</li><li>å¯¹äºå¼•ç”¨ç±»å‹ï¼Œ== åˆ¤æ–­ä¸¤ä¸ªå˜é‡æ˜¯å¦å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ï¼Œè€Œ equals() åˆ¤æ–­å¼•ç”¨çš„å¯¹è±¡æ˜¯å¦ç­‰ä»·ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java">Integer x = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">1</span>);Integer y = <span class="hljs-keyword">new</span> Integer(<span class="hljs-number">1</span>);System.out.println(x.equals(y)); <span class="hljs-comment">// true</span>System.out.println(x == y);      <span class="hljs-comment">// false</span></code></pre></div><p><strong>3. å®ç°</strong></p><ul><li>æ£€æŸ¥æ˜¯å¦ä¸ºåŒä¸€ä¸ªå¯¹è±¡çš„å¼•ç”¨ï¼Œå¦‚æœæ˜¯ç›´æ¥è¿”å› trueï¼›</li><li>æ£€æŸ¥æ˜¯å¦æ˜¯åŒä¸€ä¸ªç±»å‹ï¼Œå¦‚æœä¸æ˜¯ï¼Œç›´æ¥è¿”å› falseï¼›</li><li>å°† Object å¯¹è±¡è¿›è¡Œè½¬å‹ï¼›</li><li>åˆ¤æ–­æ¯ä¸ªå…³é”®åŸŸæ˜¯å¦ç›¸ç­‰ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">EqualExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> x;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> y;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> z;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">EqualExample</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> z)</span> </span>&#123;        <span class="hljs-keyword">this</span>.x = x;        <span class="hljs-keyword">this</span>.y = y;        <span class="hljs-keyword">this</span>.z = z;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">boolean</span> <span class="hljs-title">equals</span><span class="hljs-params">(Object o)</span> </span>&#123;        <span class="hljs-keyword">if</span> (<span class="hljs-keyword">this</span> == o) <span class="hljs-keyword">return</span> <span class="hljs-keyword">true</span>;        <span class="hljs-keyword">if</span> (o == <span class="hljs-keyword">null</span> || getClass() != o.getClass()) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;        EqualExample that = (EqualExample) o;        <span class="hljs-keyword">if</span> (x != that.x) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;        <span class="hljs-keyword">if</span> (y != that.y) <span class="hljs-keyword">return</span> <span class="hljs-keyword">false</span>;        <span class="hljs-keyword">return</span> z == that.z;    &#125;&#125;</code></pre></div><h3 id="hashCode">hashCode()</h3><p>hashCode() è¿”å›å“ˆå¸Œå€¼ï¼Œè€Œ equals() æ˜¯ç”¨æ¥åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ç­‰ä»·ã€‚ç­‰ä»·çš„ä¸¤ä¸ªå¯¹è±¡æ•£åˆ—å€¼ä¸€å®šç›¸åŒï¼Œä½†æ˜¯æ•£åˆ—å€¼ç›¸åŒçš„ä¸¤ä¸ªå¯¹è±¡ä¸ä¸€å®šç­‰ä»·ï¼Œè¿™æ˜¯å› ä¸ºè®¡ç®—å“ˆå¸Œå€¼å…·æœ‰éšæœºæ€§ï¼Œä¸¤ä¸ªå€¼ä¸åŒçš„å¯¹è±¡å¯èƒ½è®¡ç®—å‡ºç›¸åŒçš„å“ˆå¸Œå€¼ã€‚</p><p>åœ¨è¦†ç›– equals() æ–¹æ³•æ—¶åº”å½“æ€»æ˜¯è¦†ç›– hashCode() æ–¹æ³•ï¼Œä¿è¯ç­‰ä»·çš„ä¸¤ä¸ªå¯¹è±¡å“ˆå¸Œå€¼ä¹Ÿç›¸ç­‰ã€‚</p><p>HashSet  å’Œ HashMap ç­‰é›†åˆç±»ä½¿ç”¨äº† hashCode()  æ–¹æ³•æ¥è®¡ç®—å¯¹è±¡åº”è¯¥å­˜å‚¨çš„ä½ç½®ï¼Œå› æ­¤è¦å°†å¯¹è±¡æ·»åŠ åˆ°è¿™äº›é›†åˆç±»ä¸­ï¼Œéœ€è¦è®©å¯¹åº”çš„ç±»å®ç° hashCode()  æ–¹æ³•ã€‚</p><p>ä¸‹é¢çš„ä»£ç ä¸­ï¼Œæ–°å»ºäº†ä¸¤ä¸ªç­‰ä»·çš„å¯¹è±¡ï¼Œå¹¶å°†å®ƒä»¬æ·»åŠ åˆ° HashSet ä¸­ã€‚æˆ‘ä»¬å¸Œæœ›å°†è¿™ä¸¤ä¸ªå¯¹è±¡å½“æˆä¸€æ ·çš„ï¼Œåªåœ¨é›†åˆä¸­æ·»åŠ ä¸€ä¸ªå¯¹è±¡ã€‚ä½†æ˜¯ EqualExample æ²¡æœ‰å®ç° hashCode() æ–¹æ³•ï¼Œå› æ­¤è¿™ä¸¤ä¸ªå¯¹è±¡çš„å“ˆå¸Œå€¼æ˜¯ä¸åŒçš„ï¼Œæœ€ç»ˆå¯¼è‡´é›†åˆæ·»åŠ äº†ä¸¤ä¸ªç­‰ä»·çš„å¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java">EqualExample e1 = <span class="hljs-keyword">new</span> EqualExample(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);EqualExample e2 = <span class="hljs-keyword">new</span> EqualExample(<span class="hljs-number">1</span>, <span class="hljs-number">1</span>, <span class="hljs-number">1</span>);System.out.println(e1.equals(e2)); <span class="hljs-comment">// true</span>HashSet&lt;EqualExample&gt; set = <span class="hljs-keyword">new</span> HashSet&lt;&gt;();set.add(e1);set.add(e2);System.out.println(set.size());   <span class="hljs-comment">// 2</span></code></pre></div><p>ç†æƒ³çš„å“ˆå¸Œå‡½æ•°åº”å½“å…·æœ‰å‡åŒ€æ€§ï¼Œå³ä¸ç›¸ç­‰çš„å¯¹è±¡åº”å½“å‡åŒ€åˆ†å¸ƒåˆ°æ‰€æœ‰å¯èƒ½çš„å“ˆå¸Œå€¼ä¸Šã€‚è¿™å°±è¦æ±‚äº†å“ˆå¸Œå‡½æ•°è¦æŠŠæ‰€æœ‰åŸŸçš„å€¼éƒ½è€ƒè™‘è¿›æ¥ã€‚å¯ä»¥å°†æ¯ä¸ªåŸŸéƒ½å½“æˆ R è¿›åˆ¶çš„æŸä¸€ä½ï¼Œç„¶åç»„æˆä¸€ä¸ª R è¿›åˆ¶çš„æ•´æ•°ã€‚</p><p>R ä¸€èˆ¬å– 31ï¼Œå› ä¸ºå®ƒæ˜¯ä¸€ä¸ªå¥‡ç´ æ•°ï¼Œå¦‚æœæ˜¯å¶æ•°çš„è¯ï¼Œå½“å‡ºç°ä¹˜æ³•æº¢å‡ºï¼Œä¿¡æ¯å°±ä¼šä¸¢å¤±ï¼Œå› ä¸ºä¸ 2 ç›¸ä¹˜ç›¸å½“äºå‘å·¦ç§»ä¸€ä½ï¼Œæœ€å·¦è¾¹çš„ä½ä¸¢å¤±ã€‚å¹¶ä¸”ä¸€ä¸ªæ•°ä¸ 31 ç›¸ä¹˜å¯ä»¥è½¬æ¢æˆç§»ä½å’Œå‡æ³•ï¼š<code>31*x == (x&lt;&lt;5)-x</code>ï¼Œç¼–è¯‘å™¨ä¼šè‡ªåŠ¨è¿›è¡Œè¿™ä¸ªä¼˜åŒ–ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-meta">@Override</span><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">hashCode</span><span class="hljs-params">()</span> </span>&#123;    <span class="hljs-keyword">int</span> result = <span class="hljs-number">17</span>;    result = <span class="hljs-number">31</span> * result + x;    result = <span class="hljs-number">31</span> * result + y;    result = <span class="hljs-number">31</span> * result + z;    <span class="hljs-keyword">return</span> result;&#125;</code></pre></div><h3 id="toString">toString()</h3><p>é»˜è®¤è¿”å› ToStringExample@4554617c è¿™ç§å½¢å¼ï¼Œå…¶ä¸­ @ åé¢çš„æ•°å€¼ä¸ºæ•£åˆ—ç çš„æ— ç¬¦å·åå…­è¿›åˆ¶è¡¨ç¤ºã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ToStringExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> number;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ToStringExample</span><span class="hljs-params">(<span class="hljs-keyword">int</span> number)</span> </span>&#123;        <span class="hljs-keyword">this</span>.number = number;    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">ToStringExample example = <span class="hljs-keyword">new</span> ToStringExample(<span class="hljs-number">123</span>);System.out.println(example.toString());</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs html">ToStringExample@4554617c</code></pre></div><h3 id="clone">clone()</h3><p><strong>1. cloneable</strong></p><p>clone() æ˜¯ Object çš„ protected æ–¹æ³•ï¼Œå®ƒä¸æ˜¯ publicï¼Œä¸€ä¸ªç±»ä¸æ˜¾å¼å»é‡å†™ clone()ï¼Œå…¶å®ƒç±»å°±ä¸èƒ½ç›´æ¥å»è°ƒç”¨è¯¥ç±»å®ä¾‹çš„ clone() æ–¹æ³•ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CloneExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> a;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> b;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">CloneExample e1 = <span class="hljs-keyword">new</span> CloneExample();<span class="hljs-comment">// CloneExample e2 = e1.clone(); // &#x27;clone()&#x27; has protected access in &#x27;java.lang.Object&#x27;</span></code></pre></div><p>é‡å†™ clone() å¾—åˆ°ä»¥ä¸‹å®ç°ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CloneExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> a;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> b;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> CloneExample <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException </span>&#123;        <span class="hljs-keyword">return</span> (CloneExample)<span class="hljs-keyword">super</span>.clone();    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">CloneExample e1 = <span class="hljs-keyword">new</span> CloneExample();<span class="hljs-keyword">try</span> &#123;    CloneExample e2 = e1.clone();&#125; <span class="hljs-keyword">catch</span> (CloneNotSupportedException e) &#123;    e.printStackTrace();&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs html">java.lang.CloneNotSupportedException: CloneExample</code></pre></div><p>ä»¥ä¸ŠæŠ›å‡ºäº† CloneNotSupportedExceptionï¼Œè¿™æ˜¯å› ä¸º CloneExample æ²¡æœ‰å®ç° Cloneable æ¥å£ã€‚</p><p>åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œclone() æ–¹æ³•å¹¶ä¸æ˜¯ Cloneable æ¥å£çš„æ–¹æ³•ï¼Œè€Œæ˜¯ Object çš„ä¸€ä¸ª protected æ–¹æ³•ã€‚Cloneable æ¥å£åªæ˜¯è§„å®šï¼Œå¦‚æœä¸€ä¸ªç±»æ²¡æœ‰å®ç° Cloneable æ¥å£åˆè°ƒç”¨äº† clone() æ–¹æ³•ï¼Œå°±ä¼šæŠ›å‡º CloneNotSupportedExceptionã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CloneExample</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Cloneable</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> a;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> b;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> Object <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">super</span>.clone();    &#125;&#125;</code></pre></div><p><strong>2. æµ…æ‹·è´</strong></p><p>æ‹·è´å¯¹è±¡å’ŒåŸå§‹å¯¹è±¡çš„å¼•ç”¨ç±»å‹å¼•ç”¨åŒä¸€ä¸ªå¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShallowCloneExample</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Cloneable</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] arr;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ShallowCloneExample</span><span class="hljs-params">()</span> </span>&#123;        arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">10</span>];        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;            arr[i] = i;        &#125;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">set</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, <span class="hljs-keyword">int</span> value)</span> </span>&#123;        arr[index] = value;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;        <span class="hljs-keyword">return</span> arr[index];    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">protected</span> ShallowCloneExample <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException </span>&#123;        <span class="hljs-keyword">return</span> (ShallowCloneExample) <span class="hljs-keyword">super</span>.clone();    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">ShallowCloneExample e1 = <span class="hljs-keyword">new</span> ShallowCloneExample();ShallowCloneExample e2 = <span class="hljs-keyword">null</span>;<span class="hljs-keyword">try</span> &#123;    e2 = e1.clone();&#125; <span class="hljs-keyword">catch</span> (CloneNotSupportedException e) &#123;    e.printStackTrace();&#125;e1.set(<span class="hljs-number">2</span>, <span class="hljs-number">222</span>);System.out.println(e2.get(<span class="hljs-number">2</span>)); <span class="hljs-comment">// 222</span></code></pre></div><p><strong>3. æ·±æ‹·è´</strong></p><p>æ‹·è´å¯¹è±¡å’ŒåŸå§‹å¯¹è±¡çš„å¼•ç”¨ç±»å‹å¼•ç”¨ä¸åŒå¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">DeepCloneExample</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Cloneable</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] arr;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">DeepCloneExample</span><span class="hljs-params">()</span> </span>&#123;        arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">10</span>];        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;            arr[i] = i;        &#125;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">set</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, <span class="hljs-keyword">int</span> value)</span> </span>&#123;        arr[index] = value;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;        <span class="hljs-keyword">return</span> arr[index];    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">protected</span> DeepCloneExample <span class="hljs-title">clone</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> CloneNotSupportedException </span>&#123;        DeepCloneExample result = (DeepCloneExample) <span class="hljs-keyword">super</span>.clone();        result.arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[arr.length];        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;            result.arr[i] = arr[i];        &#125;        <span class="hljs-keyword">return</span> result;    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">DeepCloneExample e1 = <span class="hljs-keyword">new</span> DeepCloneExample();DeepCloneExample e2 = <span class="hljs-keyword">null</span>;<span class="hljs-keyword">try</span> &#123;    e2 = e1.clone();&#125; <span class="hljs-keyword">catch</span> (CloneNotSupportedException e) &#123;    e.printStackTrace();&#125;e1.set(<span class="hljs-number">2</span>, <span class="hljs-number">222</span>);System.out.println(e2.get(<span class="hljs-number">2</span>)); <span class="hljs-comment">// 2</span></code></pre></div><p><strong>4. clone() çš„æ›¿ä»£æ–¹æ¡ˆ</strong></p><p>ä½¿ç”¨ clone() æ–¹æ³•æ¥æ‹·è´ä¸€ä¸ªå¯¹è±¡å³å¤æ‚åˆæœ‰é£é™©ï¼Œå®ƒä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œå¹¶ä¸”è¿˜éœ€è¦ç±»å‹è½¬æ¢ã€‚Effective Java ä¹¦ä¸Šè®²åˆ°ï¼Œæœ€å¥½ä¸è¦å»ä½¿ç”¨ clone()ï¼Œå¯ä»¥ä½¿ç”¨æ‹·è´æ„é€ å‡½æ•°æˆ–è€…æ‹·è´å·¥å‚æ¥æ‹·è´ä¸€ä¸ªå¯¹è±¡ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CloneConstructorExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span>[] arr;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CloneConstructorExample</span><span class="hljs-params">()</span> </span>&#123;        arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[<span class="hljs-number">10</span>];        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; arr.length; i++) &#123;            arr[i] = i;        &#125;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">CloneConstructorExample</span><span class="hljs-params">(CloneConstructorExample original)</span> </span>&#123;        arr = <span class="hljs-keyword">new</span> <span class="hljs-keyword">int</span>[original.arr.length];        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span>; i &lt; original.arr.length; i++) &#123;            arr[i] = original.arr[i];        &#125;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">set</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index, <span class="hljs-keyword">int</span> value)</span> </span>&#123;        arr[index] = value;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">get</span><span class="hljs-params">(<span class="hljs-keyword">int</span> index)</span> </span>&#123;        <span class="hljs-keyword">return</span> arr[index];    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">CloneConstructorExample e1 = <span class="hljs-keyword">new</span> CloneConstructorExample();CloneConstructorExample e2 = <span class="hljs-keyword">new</span> CloneConstructorExample(e1);e1.set(<span class="hljs-number">2</span>, <span class="hljs-number">222</span>);System.out.println(e2.get(<span class="hljs-number">2</span>)); <span class="hljs-comment">// 2</span></code></pre></div><h2 id="å…­ã€ç»§æ‰¿">å…­ã€ç»§æ‰¿</h2><h3 id="è®¿é—®æƒé™">è®¿é—®æƒé™</h3><p>Java ä¸­æœ‰ä¸‰ä¸ªè®¿é—®æƒé™ä¿®é¥°ç¬¦ï¼šprivateã€protected ä»¥åŠ publicï¼Œå¦‚æœä¸åŠ è®¿é—®ä¿®é¥°ç¬¦ï¼Œè¡¨ç¤ºåŒ…çº§å¯è§ã€‚</p><p>å¯ä»¥å¯¹ç±»æˆ–ç±»ä¸­çš„æˆå‘˜ï¼ˆå­—æ®µå’Œæ–¹æ³•ï¼‰åŠ ä¸Šè®¿é—®ä¿®é¥°ç¬¦ã€‚</p><ul><li>ç±»å¯è§è¡¨ç¤ºå…¶å®ƒç±»å¯ä»¥ç”¨è¿™ä¸ªç±»åˆ›å»ºå®ä¾‹å¯¹è±¡ã€‚</li><li>æˆå‘˜å¯è§è¡¨ç¤ºå…¶å®ƒç±»å¯ä»¥ç”¨è¿™ä¸ªç±»çš„å®ä¾‹å¯¹è±¡è®¿é—®åˆ°è¯¥æˆå‘˜ï¼›</li></ul><p>protected ç”¨äºä¿®é¥°æˆå‘˜ï¼Œè¡¨ç¤ºåœ¨ç»§æ‰¿ä½“ç³»ä¸­æˆå‘˜å¯¹äºå­ç±»å¯è§ï¼Œä½†æ˜¯è¿™ä¸ªè®¿é—®ä¿®é¥°ç¬¦å¯¹äºç±»æ²¡æœ‰æ„ä¹‰ã€‚</p><p>è®¾è®¡è‰¯å¥½çš„æ¨¡å—ä¼šéšè—æ‰€æœ‰çš„å®ç°ç»†èŠ‚ï¼ŒæŠŠå®ƒçš„ API ä¸å®ƒçš„å®ç°æ¸…æ™°åœ°éš”ç¦»å¼€æ¥ã€‚æ¨¡å—ä¹‹é—´åªé€šè¿‡å®ƒä»¬çš„ API è¿›è¡Œé€šä¿¡ï¼Œä¸€ä¸ªæ¨¡å—ä¸éœ€è¦çŸ¥é“å…¶ä»–æ¨¡å—çš„å†…éƒ¨å·¥ä½œæƒ…å†µï¼Œè¿™ä¸ªæ¦‚å¿µè¢«ç§°ä¸ºä¿¡æ¯éšè—æˆ–å°è£…ã€‚å› æ­¤è®¿é—®æƒé™åº”å½“å°½å¯èƒ½åœ°ä½¿æ¯ä¸ªç±»æˆ–è€…æˆå‘˜ä¸è¢«å¤–ç•Œè®¿é—®ã€‚</p><p>å¦‚æœå­ç±»çš„æ–¹æ³•é‡å†™äº†çˆ¶ç±»çš„æ–¹æ³•ï¼Œé‚£ä¹ˆå­ç±»ä¸­è¯¥æ–¹æ³•çš„è®¿é—®çº§åˆ«ä¸å…è®¸ä½äºçˆ¶ç±»çš„è®¿é—®çº§åˆ«ã€‚è¿™æ˜¯ä¸ºäº†ç¡®ä¿å¯ä»¥ä½¿ç”¨çˆ¶ç±»å®ä¾‹çš„åœ°æ–¹éƒ½å¯ä»¥ä½¿ç”¨å­ç±»å®ä¾‹å»ä»£æ›¿ï¼Œä¹Ÿå°±æ˜¯ç¡®ä¿æ»¡è¶³é‡Œæ°æ›¿æ¢åŸåˆ™ã€‚</p><p>å­—æ®µå†³ä¸èƒ½æ˜¯å…¬æœ‰çš„ï¼Œå› ä¸ºè¿™ä¹ˆåšçš„è¯å°±å¤±å»äº†å¯¹è¿™ä¸ªå­—æ®µä¿®æ”¹è¡Œä¸ºçš„æ§åˆ¶ï¼Œå®¢æˆ·ç«¯å¯ä»¥å¯¹å…¶éšæ„ä¿®æ”¹ã€‚ä¾‹å¦‚ä¸‹é¢çš„ä¾‹å­ä¸­ï¼ŒAccessExample æ‹¥æœ‰ id å…¬æœ‰å­—æ®µï¼Œå¦‚æœåœ¨æŸä¸ªæ—¶åˆ»ï¼Œæˆ‘ä»¬æƒ³è¦ä½¿ç”¨ int å­˜å‚¨ id å­—æ®µï¼Œé‚£ä¹ˆå°±éœ€è¦ä¿®æ”¹æ‰€æœ‰çš„å®¢æˆ·ç«¯ä»£ç ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccessExample</span> </span>&#123;    <span class="hljs-keyword">public</span> String id;&#125;</code></pre></div><p>å¯ä»¥ä½¿ç”¨å…¬æœ‰çš„ getter å’Œ setter æ–¹æ³•æ¥æ›¿æ¢å…¬æœ‰å­—æ®µï¼Œè¿™æ ·çš„è¯å°±å¯ä»¥æ§åˆ¶å¯¹å­—æ®µçš„ä¿®æ”¹è¡Œä¸ºã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccessExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> id;    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getId</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> id + <span class="hljs-string">&quot;&quot;</span>;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setId</span><span class="hljs-params">(String id)</span> </span>&#123;        <span class="hljs-keyword">this</span>.id = Integer.valueOf(id);    &#125;&#125;</code></pre></div><p>ä½†æ˜¯ä¹Ÿæœ‰ä¾‹å¤–ï¼Œå¦‚æœæ˜¯åŒ…çº§ç§æœ‰çš„ç±»æˆ–è€…ç§æœ‰çš„åµŒå¥—ç±»ï¼Œé‚£ä¹ˆç›´æ¥æš´éœ²æˆå‘˜ä¸ä¼šæœ‰ç‰¹åˆ«å¤§çš„å½±å“ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AccessWithInnerClassExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InnerClass</span> </span>&#123;        <span class="hljs-keyword">int</span> x;    &#125;    <span class="hljs-keyword">private</span> InnerClass innerClass;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">AccessWithInnerClassExample</span><span class="hljs-params">()</span> </span>&#123;        innerClass = <span class="hljs-keyword">new</span> InnerClass();    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getValue</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">return</span> innerClass.x;  <span class="hljs-comment">// ç›´æ¥è®¿é—®</span>    &#125;&#125;</code></pre></div><h3 id="æŠ½è±¡ç±»ä¸æ¥å£">æŠ½è±¡ç±»ä¸æ¥å£</h3><p><strong>1. æŠ½è±¡ç±»</strong></p><p>æŠ½è±¡ç±»å’ŒæŠ½è±¡æ–¹æ³•éƒ½ä½¿ç”¨ abstract å…³é”®å­—è¿›è¡Œå£°æ˜ã€‚å¦‚æœä¸€ä¸ªç±»ä¸­åŒ…å«æŠ½è±¡æ–¹æ³•ï¼Œé‚£ä¹ˆè¿™ä¸ªç±»å¿…é¡»å£°æ˜ä¸ºæŠ½è±¡ç±»ã€‚</p><p>æŠ½è±¡ç±»å’Œæ™®é€šç±»æœ€å¤§çš„åŒºåˆ«æ˜¯ï¼ŒæŠ½è±¡ç±»ä¸èƒ½è¢«å®ä¾‹åŒ–ï¼Œåªèƒ½è¢«ç»§æ‰¿ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractClassExample</span> </span>&#123;    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> x;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> y;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;func2&quot;</span>);    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">AbstractExtendClassExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">AbstractClassExample</span> </span>&#123;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;func1&quot;</span>);    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// AbstractClassExample ac1 = new AbstractClassExample(); // &#x27;AbstractClassExample&#x27; is abstract; cannot be instantiated</span>AbstractClassExample ac2 = <span class="hljs-keyword">new</span> AbstractExtendClassExample();ac2.func1();</code></pre></div><p><strong>2. æ¥å£</strong></p><p>æ¥å£æ˜¯æŠ½è±¡ç±»çš„å»¶ä¼¸ï¼Œåœ¨ Java 8 ä¹‹å‰ï¼Œå®ƒå¯ä»¥çœ‹æˆæ˜¯ä¸€ä¸ªå®Œå…¨æŠ½è±¡çš„ç±»ï¼Œä¹Ÿå°±æ˜¯è¯´å®ƒä¸èƒ½æœ‰ä»»ä½•çš„æ–¹æ³•å®ç°ã€‚</p><p>ä» Java 8 å¼€å§‹ï¼Œæ¥å£ä¹Ÿå¯ä»¥æ‹¥æœ‰é»˜è®¤çš„æ–¹æ³•å®ç°ï¼Œè¿™æ˜¯å› ä¸ºä¸æ”¯æŒé»˜è®¤æ–¹æ³•çš„æ¥å£çš„ç»´æŠ¤æˆæœ¬å¤ªé«˜äº†ã€‚åœ¨ Java 8 ä¹‹å‰ï¼Œå¦‚æœä¸€ä¸ªæ¥å£æƒ³è¦æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œé‚£ä¹ˆè¦ä¿®æ”¹æ‰€æœ‰å®ç°äº†è¯¥æ¥å£çš„ç±»ï¼Œè®©å®ƒä»¬éƒ½å®ç°æ–°å¢çš„æ–¹æ³•ã€‚</p><p>æ¥å£çš„æˆå‘˜ï¼ˆå­—æ®µ + æ–¹æ³•ï¼‰é»˜è®¤éƒ½æ˜¯ public çš„ï¼Œå¹¶ä¸”ä¸å…è®¸å®šä¹‰ä¸º private æˆ–è€… protectedã€‚ä» Java 9 å¼€å§‹ï¼Œå…è®¸å°†æ–¹æ³•å®šä¹‰ä¸º privateï¼Œè¿™æ ·å°±èƒ½å®šä¹‰æŸäº›å¤ç”¨çš„ä»£ç åˆä¸ä¼šæŠŠæ–¹æ³•æš´éœ²å‡ºå»ã€‚</p><p>æ¥å£çš„å­—æ®µé»˜è®¤éƒ½æ˜¯ static å’Œ final çš„ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">InterfaceExample</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span></span>;    <span class="hljs-function"><span class="hljs-keyword">default</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func2</span><span class="hljs-params">()</span></span>&#123;        System.out.println(<span class="hljs-string">&quot;func2&quot;</span>);    &#125;    <span class="hljs-keyword">int</span> x = <span class="hljs-number">123</span>;    <span class="hljs-comment">// int y;               // Variable &#x27;y&#x27; might not have been initialized</span>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> z = <span class="hljs-number">0</span>;       <span class="hljs-comment">// Modifier &#x27;public&#x27; is redundant for interface fields</span>    <span class="hljs-comment">// private int k = 0;   // Modifier &#x27;private&#x27; not allowed here</span>    <span class="hljs-comment">// protected int l = 0; // Modifier &#x27;protected&#x27; not allowed here</span>    <span class="hljs-comment">// private void fun3(); // Modifier &#x27;private&#x27; not allowed here</span>&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">InterfaceImplementExample</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">InterfaceExample</span> </span>&#123;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func1</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;func1&quot;</span>);    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">// InterfaceExample ie1 = new InterfaceExample(); // &#x27;InterfaceExample&#x27; is abstract; cannot be instantiated</span>InterfaceExample ie2 = <span class="hljs-keyword">new</span> InterfaceImplementExample();ie2.func1();System.out.println(InterfaceExample.x);</code></pre></div><p><strong>3. æ¯”è¾ƒ</strong></p><ul><li>ä»è®¾è®¡å±‚é¢ä¸Šçœ‹ï¼ŒæŠ½è±¡ç±»æä¾›äº†ä¸€ç§ IS-A å…³ç³»ï¼Œéœ€è¦æ»¡è¶³é‡Œå¼æ›¿æ¢åŸåˆ™ï¼Œå³å­ç±»å¯¹è±¡å¿…é¡»èƒ½å¤Ÿæ›¿æ¢æ‰æ‰€æœ‰çˆ¶ç±»å¯¹è±¡ã€‚è€Œæ¥å£æ›´åƒæ˜¯ä¸€ç§ LIKE-A å…³ç³»ï¼Œå®ƒåªæ˜¯æä¾›ä¸€ç§æ–¹æ³•å®ç°å¥‘çº¦ï¼Œå¹¶ä¸è¦æ±‚æ¥å£å’Œå®ç°æ¥å£çš„ç±»å…·æœ‰ IS-A å…³ç³»ã€‚</li><li>ä»ä½¿ç”¨ä¸Šæ¥çœ‹ï¼Œä¸€ä¸ªç±»å¯ä»¥å®ç°å¤šä¸ªæ¥å£ï¼Œä½†æ˜¯ä¸èƒ½ç»§æ‰¿å¤šä¸ªæŠ½è±¡ç±»ã€‚</li><li>æ¥å£çš„å­—æ®µåªèƒ½æ˜¯ static å’Œ final ç±»å‹çš„ï¼Œè€ŒæŠ½è±¡ç±»çš„å­—æ®µæ²¡æœ‰è¿™ç§é™åˆ¶ã€‚</li><li>æ¥å£çš„æˆå‘˜åªèƒ½æ˜¯ public çš„ï¼Œè€ŒæŠ½è±¡ç±»çš„æˆå‘˜å¯ä»¥æœ‰å¤šç§è®¿é—®æƒé™ã€‚</li></ul><p><strong>4. ä½¿ç”¨é€‰æ‹©</strong></p><p>ä½¿ç”¨æ¥å£ï¼š</p><ul><li>éœ€è¦è®©ä¸ç›¸å…³çš„ç±»éƒ½å®ç°ä¸€ä¸ªæ–¹æ³•ï¼Œä¾‹å¦‚ä¸ç›¸å…³çš„ç±»éƒ½å¯ä»¥å®ç° Comparable æ¥å£ä¸­çš„ compareTo() æ–¹æ³•ï¼›</li><li>éœ€è¦ä½¿ç”¨å¤šé‡ç»§æ‰¿ã€‚</li></ul><p>ä½¿ç”¨æŠ½è±¡ç±»ï¼š</p><ul><li>éœ€è¦åœ¨å‡ ä¸ªç›¸å…³çš„ç±»ä¸­å…±äº«ä»£ç ã€‚</li><li>éœ€è¦èƒ½æ§åˆ¶ç»§æ‰¿æ¥çš„æˆå‘˜çš„è®¿é—®æƒé™ï¼Œè€Œä¸æ˜¯éƒ½ä¸º publicã€‚</li><li>éœ€è¦ç»§æ‰¿éé™æ€å’Œéå¸¸é‡å­—æ®µã€‚</li></ul><p>åœ¨å¾ˆå¤šæƒ…å†µä¸‹ï¼Œæ¥å£ä¼˜å…ˆäºæŠ½è±¡ç±»ã€‚å› ä¸ºæ¥å£æ²¡æœ‰æŠ½è±¡ç±»ä¸¥æ ¼çš„ç±»å±‚æ¬¡ç»“æ„è¦æ±‚ï¼Œå¯ä»¥çµæ´»åœ°ä¸ºä¸€ä¸ªç±»æ·»åŠ è¡Œä¸ºã€‚å¹¶ä¸”ä» Java 8 å¼€å§‹ï¼Œæ¥å£ä¹Ÿå¯ä»¥æœ‰é»˜è®¤çš„æ–¹æ³•å®ç°ï¼Œä½¿å¾—ä¿®æ”¹æ¥å£çš„æˆæœ¬ä¹Ÿå˜çš„å¾ˆä½ã€‚</p><ul><li><a href="https://docs.oracle.com/javase/tutorial/java/IandI/abstract.html">Abstract Methods and Classes</a></li><li><a href="https://www.ibm.com/developerworks/cn/java/l-javainterface-abstract/">æ·±å…¥ç†è§£ abstract class å’Œ interface</a></li><li><a href="https://dzone.com/articles/when-to-use-abstract-class-and-intreface">When to Use Abstract Class and Interface</a></li><li><a href="https://www.journaldev.com/12850/java-9-private-methods-interfaces">Java 9 Private Methods in Interfaces</a></li></ul><h3 id="super">super</h3><ul><li>è®¿é—®çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼šå¯ä»¥ä½¿ç”¨ super() å‡½æ•°è®¿é—®çˆ¶ç±»çš„æ„é€ å‡½æ•°ï¼Œä»è€Œå§”æ‰˜çˆ¶ç±»å®Œæˆä¸€äº›åˆå§‹åŒ–çš„å·¥ä½œã€‚åº”è¯¥æ³¨æ„åˆ°ï¼Œå­ç±»ä¸€å®šä¼šè°ƒç”¨çˆ¶ç±»çš„æ„é€ å‡½æ•°æ¥å®Œæˆåˆå§‹åŒ–å·¥ä½œï¼Œä¸€èˆ¬æ˜¯è°ƒç”¨çˆ¶ç±»çš„é»˜è®¤æ„é€ å‡½æ•°ï¼Œå¦‚æœå­ç±»éœ€è¦è°ƒç”¨çˆ¶ç±»å…¶å®ƒæ„é€ å‡½æ•°ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ super() å‡½æ•°ã€‚</li><li>è®¿é—®çˆ¶ç±»çš„æˆå‘˜ï¼šå¦‚æœå­ç±»é‡å†™äº†çˆ¶ç±»çš„æŸä¸ªæ–¹æ³•ï¼Œå¯ä»¥é€šè¿‡ä½¿ç”¨ super å…³é”®å­—æ¥å¼•ç”¨çˆ¶ç±»çš„æ–¹æ³•å®ç°ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperExample</span> </span>&#123;    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> x;    <span class="hljs-keyword">protected</span> <span class="hljs-keyword">int</span> y;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SuperExample</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y)</span> </span>&#123;        <span class="hljs-keyword">this</span>.x = x;        <span class="hljs-keyword">this</span>.y = y;    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;SuperExample.func()&quot;</span>);    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperExtendExample</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SuperExample</span> </span>&#123;    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> z;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">SuperExtendExample</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, <span class="hljs-keyword">int</span> y, <span class="hljs-keyword">int</span> z)</span> </span>&#123;        <span class="hljs-keyword">super</span>(x, y);        <span class="hljs-keyword">this</span>.z = z;    &#125;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">func</span><span class="hljs-params">()</span> </span>&#123;        <span class="hljs-keyword">super</span>.func();        System.out.println(<span class="hljs-string">&quot;SuperExtendExample.func()&quot;</span>);    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java">SuperExample e = <span class="hljs-keyword">new</span> SuperExtendExample(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);e.func();</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs html">SuperExample.func()SuperExtendExample.func()</code></pre></div><p><a href="https://docs.oracle.com/javase/tutorial/java/IandI/super.html">Using the Keyword super</a></p><h3 id="é‡å†™ä¸é‡è½½">é‡å†™ä¸é‡è½½</h3><p><strong>1. é‡å†™ï¼ˆOverrideï¼‰</strong></p><p>å­˜åœ¨äºç»§æ‰¿ä½“ç³»ä¸­ï¼ŒæŒ‡å­ç±»å®ç°äº†ä¸€ä¸ªä¸çˆ¶ç±»åœ¨æ–¹æ³•å£°æ˜ä¸Šå®Œå…¨ç›¸åŒçš„ä¸€ä¸ªæ–¹æ³•ã€‚</p><p>ä¸ºäº†æ»¡è¶³é‡Œå¼æ›¿æ¢åŸåˆ™ï¼Œé‡å†™æœ‰ä»¥ä¸‹ä¸‰ä¸ªé™åˆ¶ï¼š</p><ul><li>å­ç±»æ–¹æ³•çš„è®¿é—®æƒé™å¿…é¡»å¤§äºç­‰äºçˆ¶ç±»æ–¹æ³•ï¼›</li><li>å­ç±»æ–¹æ³•çš„è¿”å›ç±»å‹å¿…é¡»æ˜¯çˆ¶ç±»æ–¹æ³•è¿”å›ç±»å‹æˆ–ä¸ºå…¶å­ç±»å‹ã€‚</li><li>å­ç±»æ–¹æ³•æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹å¿…é¡»æ˜¯çˆ¶ç±»æŠ›å‡ºå¼‚å¸¸ç±»å‹æˆ–ä¸ºå…¶å­ç±»å‹ã€‚</li></ul><p>ä½¿ç”¨ @Override æ³¨è§£ï¼Œå¯ä»¥è®©ç¼–è¯‘å™¨å¸®å¿™æ£€æŸ¥æ˜¯å¦æ»¡è¶³ä¸Šé¢çš„ä¸‰ä¸ªé™åˆ¶æ¡ä»¶ã€‚</p><p>ä¸‹é¢çš„ç¤ºä¾‹ä¸­ï¼ŒSubClass ä¸º SuperClass çš„å­ç±»ï¼ŒSubClass é‡å†™äº† SuperClass çš„ func() æ–¹æ³•ã€‚å…¶ä¸­ï¼š</p><ul><li>å­ç±»æ–¹æ³•è®¿é—®æƒé™ä¸º publicï¼Œå¤§äºçˆ¶ç±»çš„ protectedã€‚</li><li>å­ç±»çš„è¿”å›ç±»å‹ä¸º ArrayList&lt;Integer&gt;ï¼Œæ˜¯çˆ¶ç±»è¿”å›ç±»å‹ List&lt;Integer&gt; çš„å­ç±»ã€‚</li><li>å­ç±»æŠ›å‡ºçš„å¼‚å¸¸ç±»å‹ä¸º Exceptionï¼Œæ˜¯çˆ¶ç±»æŠ›å‡ºå¼‚å¸¸ Throwable çš„å­ç±»ã€‚</li><li>å­ç±»é‡å†™æ–¹æ³•ä½¿ç”¨ @Override æ³¨è§£ï¼Œä»è€Œè®©ç¼–è¯‘å™¨è‡ªåŠ¨æ£€æŸ¥æ˜¯å¦æ»¡è¶³é™åˆ¶æ¡ä»¶ã€‚</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SuperClass</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">protected</span> List&lt;Integer&gt; <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Throwable </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SubClass</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SuperClass</span> </span>&#123;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> ArrayList&lt;Integer&gt; <span class="hljs-title">func</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> Exception </span>&#123;        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ArrayList&lt;&gt;();    &#125;&#125;</code></pre></div><p>åœ¨è°ƒç”¨ä¸€ä¸ªæ–¹æ³•æ—¶ï¼Œå…ˆä»æœ¬ç±»ä¸­æŸ¥æ‰¾çœ‹æ˜¯å¦æœ‰å¯¹åº”çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰å†åˆ°çˆ¶ç±»ä¸­æŸ¥çœ‹ï¼Œçœ‹æ˜¯å¦ä»çˆ¶ç±»ç»§æ‰¿æ¥ã€‚å¦åˆ™å°±è¦å¯¹å‚æ•°è¿›è¡Œè½¬å‹ï¼Œè½¬æˆçˆ¶ç±»ä¹‹åçœ‹æ˜¯å¦æœ‰å¯¹åº”çš„æ–¹æ³•ã€‚æ€»çš„æ¥è¯´ï¼Œæ–¹æ³•è°ƒç”¨çš„ä¼˜å…ˆçº§ä¸ºï¼š</p><ul><li>this.func(this)</li><li>super.func(this)</li><li>this.func(super)</li><li>super.func(super)</li></ul><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-comment">/*</span><span class="hljs-comment">    A</span><span class="hljs-comment">    |</span><span class="hljs-comment">    B</span><span class="hljs-comment">    |</span><span class="hljs-comment">    C</span><span class="hljs-comment">    |</span><span class="hljs-comment">    D</span><span class="hljs-comment"> */</span><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">A</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">(A obj)</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;A.show(A)&quot;</span>);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">(C obj)</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;A.show(C)&quot;</span>);    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">B</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">A</span> </span>&#123;    <span class="hljs-meta">@Override</span>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">(A obj)</span> </span>&#123;        System.out.println(<span class="hljs-string">&quot;B.show(A)&quot;</span>);    &#125;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">C</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">B</span> </span>&#123;&#125;<span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">D</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">C</span> </span>&#123;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    A a = <span class="hljs-keyword">new</span> A();    B b = <span class="hljs-keyword">new</span> B();    C c = <span class="hljs-keyword">new</span> C();    D d = <span class="hljs-keyword">new</span> D();    <span class="hljs-comment">// åœ¨ A ä¸­å­˜åœ¨ show(A obj)ï¼Œç›´æ¥è°ƒç”¨</span>    a.show(a); <span class="hljs-comment">// A.show(A)</span>    <span class="hljs-comment">// åœ¨ A ä¸­ä¸å­˜åœ¨ show(B obj)ï¼Œå°† B è½¬å‹æˆå…¶çˆ¶ç±» A</span>    a.show(b); <span class="hljs-comment">// A.show(A)</span>    <span class="hljs-comment">// åœ¨ B ä¸­å­˜åœ¨ä» A ç»§æ‰¿æ¥çš„ show(C obj)ï¼Œç›´æ¥è°ƒç”¨</span>    b.show(c); <span class="hljs-comment">// A.show(C)</span>    <span class="hljs-comment">// åœ¨ B ä¸­ä¸å­˜åœ¨ show(D obj)ï¼Œä½†æ˜¯å­˜åœ¨ä» A ç»§æ‰¿æ¥çš„ show(C obj)ï¼Œå°† D è½¬å‹æˆå…¶çˆ¶ç±» C</span>    b.show(d); <span class="hljs-comment">// A.show(C)</span>    <span class="hljs-comment">// å¼•ç”¨çš„è¿˜æ˜¯ B å¯¹è±¡ï¼Œæ‰€ä»¥ ba å’Œ b çš„è°ƒç”¨ç»“æœä¸€æ ·</span>    A ba = <span class="hljs-keyword">new</span> B();    ba.show(c); <span class="hljs-comment">// A.show(C)</span>    ba.show(d); <span class="hljs-comment">// A.show(C)</span>&#125;</code></pre></div><p><strong>2. é‡è½½ï¼ˆOverloadï¼‰</strong></p><p>å­˜åœ¨äºåŒä¸€ä¸ªç±»ä¸­ï¼ŒæŒ‡ä¸€ä¸ªæ–¹æ³•ä¸å·²ç»å­˜åœ¨çš„æ–¹æ³•åç§°ä¸Šç›¸åŒï¼Œä½†æ˜¯å‚æ•°ç±»å‹ã€ä¸ªæ•°ã€é¡ºåºè‡³å°‘æœ‰ä¸€ä¸ªä¸åŒã€‚</p><p>åº”è¯¥æ³¨æ„çš„æ˜¯ï¼Œè¿”å›å€¼ä¸åŒï¼Œå…¶å®ƒéƒ½ç›¸åŒä¸ç®—æ˜¯é‡è½½ã€‚</p><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">OverloadingExample</span> </span>&#123;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x)</span> </span>&#123;        System.out.println(x);    &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">show</span><span class="hljs-params">(<span class="hljs-keyword">int</span> x, String y)</span> </span>&#123;        System.out.println(x + <span class="hljs-string">&quot; &quot;</span> + y);    &#125;&#125;</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>&#123;    OverloadingExample example = <span class="hljs-keyword">new</span> OverloadingExample();    example.show(<span class="hljs-number">1</span>);    example.show(<span class="hljs-number">1</span>, <span class="hljs-string">&quot;2&quot;</span>);&#125;</code></pre></div><h2 id="ä¸ƒã€åå°„">ä¸ƒã€åå°„</h2><p>æ¯ä¸ªç±»éƒ½æœ‰ä¸€ä¸ª   <strong>Class</strong>   å¯¹è±¡ï¼ŒåŒ…å«äº†ä¸ç±»æœ‰å…³çš„ä¿¡æ¯ã€‚å½“ç¼–è¯‘ä¸€ä¸ªæ–°ç±»æ—¶ï¼Œä¼šäº§ç”Ÿä¸€ä¸ªåŒåçš„ .class æ–‡ä»¶ï¼Œè¯¥æ–‡ä»¶å†…å®¹ä¿å­˜ç€ Class å¯¹è±¡ã€‚</p><p>ç±»åŠ è½½ç›¸å½“äº Class å¯¹è±¡çš„åŠ è½½ï¼Œç±»åœ¨ç¬¬ä¸€æ¬¡ä½¿ç”¨æ—¶æ‰åŠ¨æ€åŠ è½½åˆ° JVM ä¸­ã€‚ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;)</code> è¿™ç§æ–¹å¼æ¥æ§åˆ¶ç±»çš„åŠ è½½ï¼Œè¯¥æ–¹æ³•ä¼šè¿”å›ä¸€ä¸ª Class å¯¹è±¡ã€‚</p><p>åå°„å¯ä»¥æä¾›è¿è¡Œæ—¶çš„ç±»ä¿¡æ¯ï¼Œå¹¶ä¸”è¿™ä¸ªç±»å¯ä»¥åœ¨è¿è¡Œæ—¶æ‰åŠ è½½è¿›æ¥ï¼Œç”šè‡³åœ¨ç¼–è¯‘æ—¶æœŸè¯¥ç±»çš„ .class ä¸å­˜åœ¨ä¹Ÿå¯ä»¥åŠ è½½è¿›æ¥ã€‚</p><p>Class å’Œ java.lang.reflect ä¸€èµ·å¯¹åå°„æä¾›äº†æ”¯æŒï¼Œjava.lang.reflect ç±»åº“ä¸»è¦åŒ…å«äº†ä»¥ä¸‹ä¸‰ä¸ªç±»ï¼š</p><ul><li><strong>Field</strong>  ï¼šå¯ä»¥ä½¿ç”¨ get() å’Œ set() æ–¹æ³•è¯»å–å’Œä¿®æ”¹ Field å¯¹è±¡å…³è”çš„å­—æ®µï¼›</li><li><strong>Method</strong>  ï¼šå¯ä»¥ä½¿ç”¨ invoke() æ–¹æ³•è°ƒç”¨ä¸ Method å¯¹è±¡å…³è”çš„æ–¹æ³•ï¼›</li><li><strong>Constructor</strong>  ï¼šå¯ä»¥ç”¨ Constructor çš„ newInstance() åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</li></ul><p><strong>åå°„çš„ä¼˜ç‚¹ï¼š</strong></p><ul><li><strong>å¯æ‰©å±•æ€§</strong>   ï¼šåº”ç”¨ç¨‹åºå¯ä»¥åˆ©ç”¨å…¨é™å®šååˆ›å»ºå¯æ‰©å±•å¯¹è±¡çš„å®ä¾‹ï¼Œæ¥ä½¿ç”¨æ¥è‡ªå¤–éƒ¨çš„ç”¨æˆ·è‡ªå®šä¹‰ç±»ã€‚</li><li><strong>ç±»æµè§ˆå™¨å’Œå¯è§†åŒ–å¼€å‘ç¯å¢ƒ</strong>   ï¼šä¸€ä¸ªç±»æµè§ˆå™¨éœ€è¦å¯ä»¥æšä¸¾ç±»çš„æˆå‘˜ã€‚å¯è§†åŒ–å¼€å‘ç¯å¢ƒï¼ˆå¦‚ IDEï¼‰å¯ä»¥ä»åˆ©ç”¨åå°„ä¸­å¯ç”¨çš„ç±»å‹ä¿¡æ¯ä¸­å—ç›Šï¼Œä»¥å¸®åŠ©ç¨‹åºå‘˜ç¼–å†™æ­£ç¡®çš„ä»£ç ã€‚</li><li><strong>è°ƒè¯•å™¨å’Œæµ‹è¯•å·¥å…·</strong>   ï¼š è°ƒè¯•å™¨éœ€è¦èƒ½å¤Ÿæ£€æŸ¥ä¸€ä¸ªç±»é‡Œçš„ç§æœ‰æˆå‘˜ã€‚æµ‹è¯•å·¥å…·å¯ä»¥åˆ©ç”¨åå°„æ¥è‡ªåŠ¨åœ°è°ƒç”¨ç±»é‡Œå®šä¹‰çš„å¯è¢«å‘ç°çš„ API å®šä¹‰ï¼Œä»¥ç¡®ä¿ä¸€ç»„æµ‹è¯•ä¸­æœ‰è¾ƒé«˜çš„ä»£ç è¦†ç›–ç‡ã€‚</li></ul><p><strong>åå°„çš„ç¼ºç‚¹ï¼š</strong></p><p>å°½ç®¡åå°„éå¸¸å¼ºå¤§ï¼Œä½†ä¹Ÿä¸èƒ½æ»¥ç”¨ã€‚å¦‚æœä¸€ä¸ªåŠŸèƒ½å¯ä»¥ä¸ç”¨åå°„å®Œæˆï¼Œé‚£ä¹ˆæœ€å¥½å°±ä¸ç”¨ã€‚åœ¨æˆ‘ä»¬ä½¿ç”¨åå°„æŠ€æœ¯æ—¶ï¼Œä¸‹é¢å‡ æ¡å†…å®¹åº”è¯¥ç‰¢è®°äºå¿ƒã€‚</p><ul><li><p><strong>æ€§èƒ½å¼€é”€</strong>   ï¼šåå°„æ¶‰åŠäº†åŠ¨æ€ç±»å‹çš„è§£æï¼Œæ‰€ä»¥ JVM æ— æ³•å¯¹è¿™äº›ä»£ç è¿›è¡Œä¼˜åŒ–ã€‚å› æ­¤ï¼Œåå°„æ“ä½œçš„æ•ˆç‡è¦æ¯”é‚£äº›éåå°„æ“ä½œä½å¾—å¤šã€‚æˆ‘ä»¬åº”è¯¥é¿å…åœ¨ç»å¸¸è¢«æ‰§è¡Œçš„ä»£ç æˆ–å¯¹æ€§èƒ½è¦æ±‚å¾ˆé«˜çš„ç¨‹åºä¸­ä½¿ç”¨åå°„ã€‚</p></li><li><p><strong>å®‰å…¨é™åˆ¶</strong>   ï¼šä½¿ç”¨åå°„æŠ€æœ¯è¦æ±‚ç¨‹åºå¿…é¡»åœ¨ä¸€ä¸ªæ²¡æœ‰å®‰å…¨é™åˆ¶çš„ç¯å¢ƒä¸­è¿è¡Œã€‚å¦‚æœä¸€ä¸ªç¨‹åºå¿…é¡»åœ¨æœ‰å®‰å…¨é™åˆ¶çš„ç¯å¢ƒä¸­è¿è¡Œï¼Œå¦‚ Appletï¼Œé‚£ä¹ˆè¿™å°±æ˜¯ä¸ªé—®é¢˜äº†ã€‚</p></li><li><p><strong>å†…éƒ¨æš´éœ²</strong>   ï¼šç”±äºåå°„å…è®¸ä»£ç æ‰§è¡Œä¸€äº›åœ¨æ­£å¸¸æƒ…å†µä¸‹ä¸è¢«å…è®¸çš„æ“ä½œï¼ˆæ¯”å¦‚è®¿é—®ç§æœ‰çš„å±æ€§å’Œæ–¹æ³•ï¼‰ï¼Œæ‰€ä»¥ä½¿ç”¨åå°„å¯èƒ½ä¼šå¯¼è‡´æ„æ–™ä¹‹å¤–çš„å‰¯ä½œç”¨ï¼Œè¿™å¯èƒ½å¯¼è‡´ä»£ç åŠŸèƒ½å¤±è°ƒå¹¶ç ´åå¯ç§»æ¤æ€§ã€‚åå°„ä»£ç ç ´åäº†æŠ½è±¡æ€§ï¼Œå› æ­¤å½“å¹³å°å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œä»£ç çš„è¡Œä¸ºå°±æœ‰å¯èƒ½ä¹Ÿéšç€å˜åŒ–ã€‚</p></li><li><p><a href="https://docs.oracle.com/javase/tutorial/reflect/index.html">Trail: The Reflection API</a></p></li><li><p><a href="http://www.sczyh30.com/posts/Java/java-reflection-1/">æ·±å…¥è§£æ Java åå°„ï¼ˆ1ï¼‰- åŸºç¡€</a></p></li></ul><h2 id="å…«ã€å¼‚å¸¸">å…«ã€å¼‚å¸¸</h2><p>Throwable å¯ä»¥ç”¨æ¥è¡¨ç¤ºä»»ä½•å¯ä»¥ä½œä¸ºå¼‚å¸¸æŠ›å‡ºçš„ç±»ï¼Œåˆ†ä¸ºä¸¤ç§ï¼š  <strong>Error</strong>   å’Œ <strong>Exception</strong>ã€‚å…¶ä¸­ Error ç”¨æ¥è¡¨ç¤º JVM æ— æ³•å¤„ç†çš„é”™è¯¯ï¼ŒException åˆ†ä¸ºä¸¤ç§ï¼š</p><ul><li><strong>å—æ£€å¼‚å¸¸</strong>  ï¼šéœ€è¦ç”¨ tryâ€¦catchâ€¦ è¯­å¥æ•è·å¹¶è¿›è¡Œå¤„ç†ï¼Œå¹¶ä¸”å¯ä»¥ä»å¼‚å¸¸ä¸­æ¢å¤ï¼›</li><li><strong>éå—æ£€å¼‚å¸¸</strong>  ï¼šæ˜¯ç¨‹åºè¿è¡Œæ—¶é”™è¯¯ï¼Œä¾‹å¦‚é™¤ 0 ä¼šå¼•å‘ Arithmetic Exceptionï¼Œæ­¤æ—¶ç¨‹åºå´©æºƒå¹¶ä¸”æ— æ³•æ¢å¤ã€‚</li></ul><div align="center"> <img src="https://cs-notes-1256109796.cos.ap-guangzhou.myqcloud.com/PPjwP.png" width="600"/> </div><br><ul><li><p><a href="https://www.journaldev.com/2167/java-exception-interview-questions-and-answersl">Java Exception Interview Questions and Answers</a></p></li><li><p><a href="https://www.cnblogs.com/Qian123/p/5715402.html">Javaæé«˜ç¯‡â€”â€”Java å¼‚å¸¸å¤„ç†</a></p></li></ul><h2 id="ä¹ã€æ³›å‹">ä¹ã€æ³›å‹</h2><div class="hljs code-wrapper"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Box</span>&lt;<span class="hljs-title">T</span>&gt; </span>&#123;    <span class="hljs-comment">// T stands for &quot;Type&quot;</span>    <span class="hljs-keyword">private</span> T t;    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">set</span><span class="hljs-params">(T t)</span> </span>&#123; <span class="hljs-keyword">this</span>.t = t; &#125;    <span class="hljs-function"><span class="hljs-keyword">public</span> T <span class="hljs-title">get</span><span class="hljs-params">()</span> </span>&#123; <span class="hljs-keyword">return</span> t; &#125;&#125;</code></pre></div><ul><li><a href="https://www.cnblogs.com/Blue-Keroro/p/8875898.html">Java æ³›å‹è¯¦è§£</a></li><li><a href="https://cloud.tencent.com/developer/article/1033693">10 é“ Java æ³›å‹é¢è¯•é¢˜</a></li></ul><h2 id="åã€æ³¨è§£">åã€æ³¨è§£</h2><p>Java æ³¨è§£æ˜¯é™„åŠ åœ¨ä»£ç ä¸­çš„ä¸€äº›å…ƒä¿¡æ¯ï¼Œç”¨äºä¸€äº›å·¥å…·åœ¨ç¼–è¯‘ã€è¿è¡Œæ—¶è¿›è¡Œè§£æå’Œä½¿ç”¨ï¼Œèµ·åˆ°è¯´æ˜ã€é…ç½®çš„åŠŸèƒ½ã€‚æ³¨è§£ä¸ä¼šä¹Ÿä¸èƒ½å½±å“ä»£ç çš„å®é™…é€»è¾‘ï¼Œä»…ä»…èµ·åˆ°è¾…åŠ©æ€§çš„ä½œç”¨ã€‚</p><p><a href="https://www.cnblogs.com/acm-bingzi/p/javaAnnotation.html">æ³¨è§£ Annotation å®ç°åŸç†ä¸è‡ªå®šä¹‰æ³¨è§£ä¾‹å­</a></p><h2 id="åä¸€ã€ç‰¹æ€§">åä¸€ã€ç‰¹æ€§</h2><h3 id="Java-å„ç‰ˆæœ¬çš„æ–°ç‰¹æ€§">Java å„ç‰ˆæœ¬çš„æ–°ç‰¹æ€§</h3><p><strong>New highlights in Java SE 8</strong></p><ol><li>Lambda Expressions</li><li>Pipelines and Streams</li><li>Date and Time API</li><li>Default Methods</li><li>Type Annotations</li><li>Nashhorn JavaScript Engine</li><li>Concurrent Accumulators</li><li>Parallel operations</li><li>PermGen Error Removed</li></ol><p><strong>New highlights in Java SE 7</strong></p><ol><li>Strings in Switch Statement</li><li>Type Inference for Generic Instance Creation</li><li>Multiple Exception Handling</li><li>Support for Dynamic Languages</li><li>Try with Resources</li><li>Java nio Package</li><li>Binary Literals, Underscore in literals</li><li>Diamond Syntax</li></ol><ul><li><a href="http://www.selfgrowth.com/articles/difference-between-java-18-and-java-17">Difference between Java 1.8 and Java 1.7?</a></li><li><a href="http://www.importnew.com/19345.html">Java 8 ç‰¹æ€§</a></li></ul><h3 id="Java-ä¸-C-çš„åŒºåˆ«">Java ä¸ C++ çš„åŒºåˆ«</h3><ul><li>Java æ˜¯çº¯ç²¹çš„é¢å‘å¯¹è±¡è¯­è¨€ï¼Œæ‰€æœ‰çš„å¯¹è±¡éƒ½ç»§æ‰¿è‡ª java.lang.Objectï¼ŒC++ ä¸ºäº†å…¼å®¹ C å³æ”¯æŒé¢å‘å¯¹è±¡ä¹Ÿæ”¯æŒé¢å‘è¿‡ç¨‹ã€‚</li><li>Java é€šè¿‡è™šæ‹Ÿæœºä»è€Œå®ç°è·¨å¹³å°ç‰¹æ€§ï¼Œä½†æ˜¯ C++ ä¾èµ–äºç‰¹å®šçš„å¹³å°ã€‚</li><li>Java æ²¡æœ‰æŒ‡é’ˆï¼Œå®ƒçš„å¼•ç”¨å¯ä»¥ç†è§£ä¸ºå®‰å…¨æŒ‡é’ˆï¼Œè€Œ C++ å…·æœ‰å’Œ C ä¸€æ ·çš„æŒ‡é’ˆã€‚</li><li>Java æ”¯æŒè‡ªåŠ¨åƒåœ¾å›æ”¶ï¼Œè€Œ C++ éœ€è¦æ‰‹åŠ¨å›æ”¶ã€‚</li><li>Java ä¸æ”¯æŒå¤šé‡ç»§æ‰¿ï¼Œåªèƒ½é€šè¿‡å®ç°å¤šä¸ªæ¥å£æ¥è¾¾åˆ°ç›¸åŒç›®çš„ï¼Œè€Œ C++ æ”¯æŒå¤šé‡ç»§æ‰¿ã€‚</li><li>Java ä¸æ”¯æŒæ“ä½œç¬¦é‡è½½ï¼Œè™½ç„¶å¯ä»¥å¯¹ä¸¤ä¸ª String å¯¹è±¡æ‰§è¡ŒåŠ æ³•è¿ç®—ï¼Œä½†æ˜¯è¿™æ˜¯è¯­è¨€å†…ç½®æ”¯æŒçš„æ“ä½œï¼Œä¸å±äºæ“ä½œç¬¦é‡è½½ï¼Œè€Œ C++ å¯ä»¥ã€‚</li><li>Java çš„ goto æ˜¯ä¿ç•™å­—ï¼Œä½†æ˜¯ä¸å¯ç”¨ï¼ŒC++ å¯ä»¥ä½¿ç”¨ gotoã€‚</li></ul><p><a href="http://cs-fundamentals.com/tech-interview/java/differences-between-java-and-cpp.php">What are the main differences between Java and C++?</a></p><h3 id="JRE-or-JDK">JRE or JDK</h3><ul><li>JREï¼šJava Runtime Environmentï¼ŒJava è¿è¡Œç¯å¢ƒçš„ç®€ç§°ï¼Œä¸º Java çš„è¿è¡Œæä¾›äº†æ‰€éœ€çš„ç¯å¢ƒã€‚å®ƒæ˜¯ä¸€ä¸ª JVM ç¨‹åºï¼Œä¸»è¦åŒ…æ‹¬äº† JVM çš„æ ‡å‡†å®ç°å’Œä¸€äº› Java åŸºæœ¬ç±»åº“ã€‚</li><li>JDKï¼šJava Development Kitï¼ŒJava å¼€å‘å·¥å…·åŒ…ï¼Œæä¾›äº† Java çš„å¼€å‘åŠè¿è¡Œç¯å¢ƒã€‚JDK æ˜¯ Java å¼€å‘çš„æ ¸å¿ƒï¼Œé›†æˆäº† JRE ä»¥åŠä¸€äº›å…¶å®ƒçš„å·¥å…·ï¼Œæ¯”å¦‚ç¼–è¯‘ Java æºç çš„ç¼–è¯‘å™¨ javac ç­‰ã€‚</li></ul><h2 id="å‚è€ƒèµ„æ–™">å‚è€ƒèµ„æ–™</h2><ul><li>Eckel B. Java ç¼–ç¨‹æ€æƒ³[M]. æœºæ¢°å·¥ä¸šå‡ºç‰ˆç¤¾, 2002.</li><li>Bloch J. Effective java[M]. Addison-Wesley Professional, 2017.</li></ul>]]></content>
    
    
    
    <tags>
      
      <tag>JAVA</tag>
      
    </tags>
    
  </entry>
  
  
  
  <entry>
    <title>å±€åŸŸç½‘è®¿é—®win11çš„Linuxå­ç³»ç»Ÿ</title>
    <link href="/2021/11/18/%E5%B1%80%E5%9F%9F%E7%BD%91%E8%AE%BF%E9%97%AEwin11%E7%9A%84Linux%E5%AD%90%E7%B3%BB%E7%BB%9F/"/>
    <url>/2021/11/18/%E5%B1%80%E5%9F%9F%E7%BD%91%E8%AE%BF%E9%97%AEwin11%E7%9A%84Linux%E5%AD%90%E7%B3%BB%E7%BB%9F/</url>
    
    <content type="html"><![CDATA[<h1>å±€åŸŸç½‘è®¿é—®win11çš„Linuxå­ç³»ç»Ÿ</h1><p>1ã€å…ˆæ‰¾åˆ°Linuxå­ç³»ç»Ÿçš„ip</p><div class="hljs code-wrapper"><pre><code class="hljs mipsasm">ip <span class="hljs-keyword">addr </span><span class="hljs-keyword">show </span>eth0</code></pre></div><p>2ã€è®¾ç½®ç«¯å£è½¬å‘ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™è¿è¡Œpowershellï¼‰</p><p>æ ¼å¼</p><div class="hljs code-wrapper"><pre><code class="hljs routeros">netsh<span class="hljs-built_in"> interface </span>portproxy <span class="hljs-builtin-name">add</span> v4tov4 <span class="hljs-attribute">listenport</span>=ã€å®¿ä¸»æœºwindowså¹³å°ç›‘å¬ç«¯å£ã€‘ <span class="hljs-attribute">listenaddress</span>=0.0.0.0 <span class="hljs-attribute">connectport</span>=ã€wsl2å¹³å°ç›‘å¬ç«¯å£ã€‘ <span class="hljs-attribute">connectaddress</span>=ã€wsl2å¹³å°ipã€‘protocol=tcp</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs routeros">netsh<span class="hljs-built_in"> interface </span>portproxy <span class="hljs-builtin-name">add</span> v4tov4 <span class="hljs-attribute">listenport</span>=80 <span class="hljs-attribute">listenaddress</span>=0.0.0.0 <span class="hljs-attribute">connectport</span>=80 <span class="hljs-attribute">connectaddress</span>=172.30.144.91 <span class="hljs-attribute">protocol</span>=tcp</code></pre></div><p>æˆ–</p><div class="hljs code-wrapper"><pre><code class="hljs routeros">netsh<span class="hljs-built_in"> interface </span>portproxy <span class="hljs-builtin-name">add</span> v4tov4 <span class="hljs-attribute">listenport</span>=80 <span class="hljs-attribute">listenaddress</span>=* <span class="hljs-attribute">connectport</span>=80 <span class="hljs-attribute">connectaddress</span>=172.30.144.91 <span class="hljs-attribute">protocol</span>=tcp</code></pre></div><p>ç„¶åæŸ¥çœ‹ä¸‹ç«¯å£è½¬å‘çŠ¶æ€ï¼š</p><div class="hljs code-wrapper"><pre><code class="hljs angelscript">netsh <span class="hljs-keyword">interface</span> <span class="hljs-symbol">portproxy</span> <span class="hljs-symbol">show</span> <span class="hljs-symbol">all</span></code></pre></div><p>3ã€åˆ é™¤ç«¯å£è½¬å‘</p><p>æ ¼å¼</p><div class="hljs code-wrapper"><pre><code class="hljs routeros">netsh<span class="hljs-built_in"> interface </span>portproxy delete v4tov4 <span class="hljs-attribute">listenport</span>=ã€å®¿ä¸»æœºwindowså¹³å°ç›‘å¬ç«¯å£ã€‘ <span class="hljs-attribute">listenaddress</span>=0.0.0.0</code></pre></div><div class="hljs code-wrapper"><pre><code class="hljs angelscript">netsh <span class="hljs-keyword">interface</span> <span class="hljs-symbol">portproxy</span> <span class="hljs-symbol">delete</span> <span class="hljs-symbol">v4tov4</span> <span class="hljs-symbol">listenport</span>=<span class="hljs-symbol">80</span> <span class="hljs-symbol">listenaddress</span>=*</code></pre></div><p>æˆ–</p><div class="hljs code-wrapper"><pre><code class="hljs routeros">netsh<span class="hljs-built_in"> interface </span>portproxy delete v4tov4 <span class="hljs-attribute">listenport</span>=80 <span class="hljs-attribute">listenaddress</span>=0.0.0.0</code></pre></div><p>æ³¨æ„</p><p>å†™çš„æ˜¯0.0.0.0åˆ çš„æ—¶å€™ä¹Ÿéœ€è¦æ˜¯0.0.0.0è¿›è¡Œå¯¹åº”ï¼Œä¸ç„¶ä¼šæç¤ºæ‰¾ä¸åˆ°æ–‡ä»¶ã€‚</p>]]></content>
    
    
    
    <tags>
      
      <tag>Linux</tag>
      
    </tags>
    
  </entry>
  
  
  
  
</search>
